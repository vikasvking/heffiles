;/*FB_PKG_DELIM*/

__d("WAWebBizClearCartAction",["WAWebBizSyncCartAction"],(function(a,b,c,d,e,f,g){function a(a){a.cartItemCollection.reset(),a.set("message",void 0),a.trigger("change:cartItemCollection"),c("WAWebBizSyncCartAction")(a)}g["default"]=a}),98);
__d("WAWebBizMatchCartItemsToProductsAction",["fbt","WATypeUtils","WAWebBizClearCartAction","WAWebBizProductCatalogBridge","WAWebBizSyncCartAction","WAWebCatalogCollection","WAWebConfirmPopup.react","WAWebModalManager","WAWebProductModel","WAWebProductSelectors","WAWebWidFactory","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function k(a,b){return a.priceAmount1000===d("WAWebProductSelectors").getActivePrice(b)&&a.currency===b.currency&&a.name===b.name&&a.imageHash===b.imageHash&&a.maxAvailable===b.maxAvailable}function l(a,b){var c=d("WAWebProductSelectors").getActivePrice(q(b));return s(a.priceAmount1000,c)&&(!d("WATypeUtils").isString(a.currency)&&!d("WATypeUtils").isString(b.currency)||a.currency===b.currency)&&a.name===b.name&&a.imageHash===((c=b.media)==null?void 0:(a=c.image)==null?void 0:a.id)}function m(a,b){var c=k(a,b);c||a.set({priceAmount1000:d("WAWebProductSelectors").getActivePrice(b),currency:b.currency,name:b.name,imageHash:b.imageHash,maxAvailable:b.maxAvailable},{silent:!0});return c}function n(a,b){var c=b?l(a,b):!0;if(!c&&b){b=q(b);a.set({priceAmount1000:d("WAWebProductSelectors").getActivePrice(b),currency:b.currency,name:b.name,imageHash:b.imageHash,maxAvailable:b.maxAvailable},{silent:!0})}return c}function o(a,b){if(a&&a.status==="deleted"){b.productCollection.remove(a.id);return void 0}return a}function p(){d("WAWebModalManager").ModalManager.open(j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){d("WAWebModalManager").ModalManager.close()},children:h._(/*BTDS*/"__JHASH__q_1muHhhF8F__JHASH__")}))}function q(a){var b;return{id:a.id,name:(b=a.name)!=null?b:"",imageCdnUrl:(b=a.media)==null?void 0:(b=b.image)==null?void 0:b.request_image_url,imageHash:(b=a.media)==null?void 0:(b=b.image)==null?void 0:b.id,currency:a.currency,priceAmount1000:r(a.price),salePriceAmount1000:r((b=a.sale_price)==null?void 0:b.price),salePriceStartDate:d("WAWebBizProductCatalogBridge").parseDateValue((b=a.sale_price)==null?void 0:b.start_date),salePriceEndDate:d("WAWebBizProductCatalogBridge").parseDateValue((b=a.sale_price)==null?void 0:b.end_date),maxAvailable:a.max_available}}function r(a){return typeof a==="string"?a.length>0?parseInt(a,10):null:a}function s(a,b){a=r(a);b=r(b);if(d("WATypeUtils").isNumber(a)&&d("WATypeUtils").isNumber(b))return a===b;else if(!d("WATypeUtils").isNumber(a)&&!d("WATypeUtils").isNumber(b))return!0;return!1}function t(a,b){return new(d("WAWebProductModel").Product)(babelHelpers["extends"]({},q(a),{catalogWid:d("WAWebWidFactory").createWid(b),productMsgMediaData:null,imageCount:1,fetchedFromServer:!0,t:Date.now()/1e3,old:!1}))}function a(a,b){var e=d("WAWebCatalogCollection").CatalogCollection.get(d("WAWebWidFactory").createWid(a.id)),f=[],g=[],h=!0;e&&a.cartItemCollection.forEach(function(c){var d=e.productCollection.get(c.id),i=b&&b.products.find(function(a){return a.id===c.id});i=o(i,e);if(!b&&d){var j=m(c,d);h=h&&j;f.push({product:d,cartItem:c})}else if(i){j=n(c,i);h=h&&j;f.push({product:t(i,a.id),cartItem:c})}else h=!1,g.push(c.id)});e||c("WAWebBizClearCartAction")(a);h||(g.length&&a.cartItemCollection.remove(g),a.trigger("change:cartItemCollection"),p());c("WAWebBizSyncCartAction")(a);return f}function b(a){return a.reduce(function(a,b){return a+b.cartItem.quantity*d("WAWebProductSelectors").getSavings(b.product)},0)}g.parsePrice=r;g.isPriceMatch=s;g.createProductFromRefreshCartItem=t;g.matchCartItemsToProducts=a;g.getSavingsFromCartItemsAndProducts=b}),226);
__d("WAWebBizPullCartUpdateAction",["Promise","WAWebBizCartBridge","WAWebCartCollection","WAWebWidFactory"],(function(a,b,c,d,e,f,g){var h;function a(a,c){if(a.cartItemCollection.length===0)return(h||(h=b("Promise"))).resolve({products:[],price:{}});var e=a.cartItemCollection.map(function(a){return a.id});return d("WAWebBizCartBridge").refreshCart(d("WAWebWidFactory").createWid(a.id),e,d("WAWebCartCollection").CartCollection.imageWidth,d("WAWebCartCollection").CartCollection.imageHeight,c)}g["default"]=a}),98);
__d("WAWebSendOrderChatAction",["WALogger","WATimeUtils","WAWebAck","WAWebBizGatingUtils","WAWebMsgKey","WAWebNoop","WAWebProtobufsE2E.pb","WAWebSendMsgChatAction","WAWebSendMsgResultAction","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Order message send to chat failure: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Order message send to chat failure: ",""]);i=function(){return a};return a}function a(a,b,c,d,e){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){b=(yield k(a,b,e,f,g));if(d("WAWebUserPrefsMeUser").isMeAccount(a.id))return d("WAWebSendMsgChatAction").addAndSendMsgToChat(a,b)[0].then(c("WAWebNoop"))["catch"](function(a){d("WALogger").WARN(i(),a);throw a});try{e=(yield d("WAWebSendMsgChatAction").addAndSendMsgToChat(a,b)[1]);if(!e||e.messageSendResult!==d("WAWebSendMsgResultAction").SendMsgResult.OK)throw c("err")("Order message SendMsgResult failure status")}catch(a){d("WALogger").WARN(h(),a);throw a}});return j.apply(this,arguments)}function k(a,b,c,d,e){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){var h=d("WAWebUserPrefsMeUser").getMaybeMeUser(),i=b.price.total;h={type:"order",ack:d("WAWebAck").ACK.CLOCK,from:h,id:new(c("WAWebMsgKey"))({from:h,to:a.id,id:yield c("WAWebMsgKey").newId(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,t:d("WATimeUtils").unixTime(),to:a.id,orderId:b.id,token:b.token,orderTitle:a.name||a.formattedTitle,sellerJid:a.id.toString({legacy:!0}),status:d("WAWebProtobufsE2E.pb").Message$OrderMessage$OrderStatus.INQUIRY,messageVersion:d("WAWebBizGatingUtils").isBuyerOrderRevampEnabled()?2:1,thumbnail:f,itemCount:e,message:g,totalAmount1000:i!=null&&i.length>0?parseInt(i,10):void 0,totalCurrencyCode:b.price.currency!=null&&b.price.currency.length>0?b.price.currency:void 0};return h});return l.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebBizSubmitOrderAction",["WAWebBizOrderAction","WAWebBizSyncCartAction","WAWebCatalogCollection","WAWebMediaOpaqueData","WAWebSendOrderChatAction","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a){var b=a.cartItemCollection.at(0);if(b==null)return"";a=d("WAWebCatalogCollection").CatalogCollection.get(d("WAWebWidFactory").createWid(a.id));a=a==null?void 0:a.productCollection.get(b.id);a=a==null?void 0:(b=a.getProductImageCollectionHead())==null?void 0:b.mediaData;return a==null?"":a.preview instanceof c("WAWebMediaOpaqueData")?(b=a.preview.getBase64())!=null?b:"":""}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield d("WAWebBizOrderAction").createOrder(b.id,a.cartItemCollection.toArray()));yield c("WAWebSendOrderChatAction")(b,e,a.itemCount,h(a),a.message);void c("WAWebBizSyncCartAction")(a);return e.id});return i.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebBizUpdateCartMessageAction",["WAWebBizSyncCartAction"],(function(a,b,c,d,e,f,g){function a(a,b){a.set("message",b),c("WAWebBizSyncCartAction")(a)}g["default"]=a}),98);
__d("WAWebCartDetailDrawerFooter.react",["fbt","WAWebABProps","WAWebBizGatingUtils","WAWebButton.react","WAWebCurrencyUtils","WAWebDirectConnectionGatingUtils","WAWebExternalLink.react","WAWebFaqUrl","WAWebFlex.react","WAWebUISpacing","WAWebVelocityTransitionGroup","WAWebWDSText.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k={footerPrice:{width:"xh8yej3",$$css:!0},footerBorder:{borderTopWidth:"x178xt8z",borderTopStyle:"x13fuv20",borderTopColor:"xyj1x25",$$css:!0}};function l(){return j.jsxs(j.Fragment,{children:[h._(/*BTDS*/"__JHASH__G9tzjED6A63__JHASH__")," ",j.jsx(d("WAWebExternalLink.react").ExternalLink,{href:d("WAWebFaqUrl").getJioMartPostcodeChangeLearnMoreLink(),children:h._(/*BTDS*/"__JHASH__gfhYbdjTG7D__JHASH__")})]})}l.displayName=l.name+" [from "+f.id+"]";function m(){return h._(/*BTDS*/"__JHASH__afktUMFi_Aa__JHASH__")}m.displayName=m.name+" [from "+f.id+"]";function n(a){a=a.isDirectConnection;a=a&&d("WAWebDirectConnectionGatingUtils").supportsDirectConnection()&&d("WAWebABProps").getABPropConfigValue("share_phone_number_on_cart_send_to_direct_connection_biz_enabled");return a?j.jsx(l,{}):j.jsx(m,{})}n.displayName=n.name+" [from "+f.id+"]";function o(a){var b=a.currency;a=a.savings;return j.jsxs(d("WAWebFlex.react").FlexRow,{align:"baseline",justify:"all",xstyle:[d("WAWebUISpacing").uiMargin.bottom8,k.footerPrice],children:[j.jsx(d("WAWebWDSText.react").WDSTextTitle,{as:"span",color:"secondary",children:h._(/*BTDS*/"__JHASH__2_wYWAVI65P__JHASH__")}),j.jsx(d("WAWebWDSText.react").WDSTextTitle,{as:"span",color:"teal",children:h._(/*BTDS*/"__JHASH__7wDn1wZLOf0__JHASH__",[h._param("cart-savings",d("WAWebCurrencyUtils").formatAmount1000(b,a))])})]})}o.displayName=o.name+" [from "+f.id+"]";function p(a){var b=a.currency,c=a.savings;a=a.total;return j.jsxs(j.Fragment,{children:[c>0?j.jsx(o,{currency:b,savings:c}):null,j.jsxs(d("WAWebFlex.react").FlexRow,{align:"baseline",justify:"all",xstyle:[d("WAWebUISpacing").uiMargin.bottom8,k.footerPrice],children:[j.jsx(d("WAWebWDSText.react").WDSTextTitle,{as:"span",weight:"medium",children:h._(/*BTDS*/"__JHASH__vZfVdHxwv6O__JHASH__")}),j.jsx(d("WAWebWDSText.react").WDSTextTitle,{as:"span",children:h._(/*BTDS*/"__JHASH__4_k8jPAfACN__JHASH__",[h._param("cart-total-price",d("WAWebCurrencyUtils").formatAmount1000(b,a))])})]})]})}p.displayName=p.name+" [from "+f.id+"]";function q(){return j.jsx(d("WAWebWDSText.react").WDSTextTitle,{as:"span",weight:"medium",children:h._(/*BTDS*/"__JHASH__iCtn8dLuK19__JHASH__")})}q.displayName=q.name+" [from "+f.id+"]";function r(a){var b=a.currency,c=a.savings;a=a.total;return a!=null&&b!=null?j.jsx(p,{currency:b,savings:c,total:a}):j.jsx(q,{})}r.displayName=r.name+" [from "+f.id+"]";function a(a){var b=a.onSend,e=a.isDirectConnection,f=a.cart;a=a.savings;return j.jsxs(d("WAWebFlex.react").FlexColumn,{xstyle:[k.footerBorder,d("WAWebUISpacing").uiPadding.all16],children:[j.jsx(r,{total:f.total,currency:f.currency,savings:a}),j.jsx(d("WAWebWDSText.react").WDSTextMuted,{color:"secondaryLighter",xstyle:d("WAWebUISpacing").uiMargin.bottom15,children:j.jsx(n,{isDirectConnection:e})}),j.jsx(c("WAWebVelocityTransitionGroup"),{appear:!0,transitionName:"btn",children:j.jsx(c("WAWebButton.react"),{testid:void 0,type:"primary",onClick:b,children:d("WAWebBizGatingUtils").isBuyerOrderRequestVariantEnabled()?h._(/*BTDS*/"__JHASH__UG9r9dK0_nM__JHASH__"):h._(/*BTDS*/"__JHASH__SrTQXYXTKa1__JHASH__")})})]})}a.displayName=a.name+" [from "+f.id+"]";g.CartDrawerContentFooter=a}),226);
__d("WAWebCartProductQuantity.react",["WAWebBizCartConstants","WAWebStopEvent","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={selectComponent:{fontFamily:"xjb2p0i",$$css:!0}};function l(){var a=[];for(var b=1;b<=d("WAWebBizCartConstants").CART_ITEM_MAX_QUANTITY;b++)a.push(j.jsx("option",{value:b,children:b},b));return a}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=a.onChange,e=a.quantity;a=a.testid;function f(a){a=a.target;a instanceof HTMLSelectElement&&b(parseInt(a.value,10))}return j.jsxs("div",{className:"x1n2onr6 x1iyjqo2 xs83m0k x18xmwgd x1pju0fl","data-testid":void 0,children:[j.jsx("span",{className:"x10l6tqk x1atx4j1 x1923su1 x11uqc5h x1lliihq xmix8c7 x1c3i2sq xo5v014 x40yjcy x47corl xiy17q3",children:"\u25be"}),j.jsx("select",{className:(i||(i=c("stylex")))(k.selectComponent,d("WAWebUISpacing").uiPadding.horiz10),onClick:d("WAWebStopEvent").stopEvent,value:e,onChange:f,children:j.jsx(l,{})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCartProductListItem.react",["WAWebBizDeleteProductFromCartAction","WAWebBizGatingUtils","WAWebBizUpdateProductQuantityCartAction","WAWebCartDeleteIcon.react","WAWebCartLogEvents","WAWebCartProductQuantity.react","WAWebCartQuantityControls.react","WAWebCellFrame.react","WAWebDrawerContext","WAWebEmojiText.react","WAWebFlexItem.react","WAWebProductCatalogContext","WAWebProductCatalogProductPriceInfoText.react","WAWebProductCatalogProductThumb.react","WAWebStopEvent","WAWebUISpacing","react","stylex","useHoverState"],(function(a,b,c,d,e,f,g){var h,i,j,k=j||c("react"),l=(h||(h=d("react"))).useContext,m={deleteIconHidden:{visibility:"xlshs6z",$$css:!0},deleteIconVisible:{visibility:"xnpuxes",$$css:!0}};function n(a){var b=a.cartId,e=a.cartProduct,f=a.isHovered;a=a.quantity;var g=l(d("WAWebDrawerContext").DrawerContext),h=d("WAWebProductCatalogContext").getProductCatalogContext(g);function j(a,b){c("WAWebBizUpdateProductQuantityCartAction")(e,a),d("WAWebCartLogEvents").logEditProduct(e,b,a)}function n(a,f){var g=c("WAWebBizDeleteProductFromCartAction")(b,e.id.toString());c("WAWebBizDeleteProductFromCartAction")(b,e.id.toString());d("WAWebCartLogEvents").logDeleteProduct(e,f);g===0&&d("WAWebCartLogEvents").logCartAbandon(e.catalogWid.toString(),f);d("WAWebStopEvent").stopEvent(a)}f=(i||(i=c("stylex")))(f?[m.deleteIconVisible,d("WAWebUISpacing").uiPadding.top5]:m.deleteIconHidden);a=k.jsxs(k.Fragment,{children:[k.jsx(c("WAWebCartProductQuantity.react"),{testid:void 0,quantity:a,onChange:function(a){return j(a,h)}}),k.jsx("div",{className:f,children:k.jsx(c("WAWebCartDeleteIcon.react"),{onClick:function(a){return n(a,h)}})})]});f=k.jsx(c("WAWebCartQuantityControls.react"),{product:e,context:g});return k.jsx(c("WAWebFlexItem.react"),{xstyle:d("WAWebUISpacing").uiMargin.end5,children:d("WAWebBizGatingUtils").isQuantityControlsFeatureEnabled()?f:a})}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b,e=a.cartId,f=a.product,g=a.quantity;a=a.onClick;var h=k.jsx(d("WAWebEmojiText.react").EmojiText,{text:f.name,ellipsify:!0,titlify:!0});b=(b=f.getPreviewImage())==null?void 0:b.mediaData;b=b?k.jsx(d("WAWebProductCatalogProductThumb.react").ProductThumb,{theme:"cart-list",mediaData:b}):null;var i=c("useHoverState")(),j=i.isHovered,l=i.onMouseEnter;i=i.onMouseLeave;var m=k.jsx(c("WAWebProductCatalogProductPriceInfoText.react"),{className:"x6s0dn4 x78zum5",showTotalPrice:!0,product:f});j=k.jsx(n,{isHovered:j,cartId:e,cartProduct:f,quantity:g});return k.jsx(c("WAWebCellFrame.react"),{onMouseEnter:l,onMouseLeave:i,image:b,customImage:!0,primary:h,secondary:j,theme:"cart-product",onClick:a,detail:m},f.id.toString())}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCartProductList.react",["WAWebCartProductListItem.react","WAWebFlatList.react","WAWebFlatListContainer.react","WAWebProductCatalogCatalogConstants","lodash","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j=d("WAWebFlatList.react").FlatListFactory();function a(a){var b=a.cartProductItems,e=a.onProductDetail,f=a.sellerJid;return i.jsx(c("WAWebFlatListContainer.react"),{flatListControllers:[a.flatListController],children:i.jsx(j,{flatListController:a.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:b.map(function(a){return{itemKey:a.cartItem.id,contentKey:c("lodash").uniqueId("cartItem"),product:a.product,cartItem:a.cartItem}}),renderItem:function(a){return i.jsx(c("WAWebCartProductListItem.react"),{cartId:f,product:a.product,quantity:a.cartItem.quantity,onClick:function(){return e({productId:a.cartItem.id,businessOwnerJid:f})}})},defaultItemHeight:d("WAWebProductCatalogCatalogConstants").CART_PRODUCT_LIST_ITEM_HEIGHT})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebShoppingCartEmptyIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="shopping-cart-empty";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=90;m=90;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:h,height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),children:[j.jsx("title",{children:k}),j.jsxs("g",{fillRule:"nonzero",fill:"currentColor",children:[j.jsx("path",{d:"M36.6666667 55C34.8333333 55 33.35 56.5 33.35 58.3333333 33.35 60.1666667 34.8333333 61.6666667 36.6666667 61.6666667 38.5 61.6666667 40 60.1666667 40 58.3333333 40 56.5 38.5 55 36.6666667 55zM26.6666667 30C26.6666667 30.9166667 27.4166667 31.6666667 28.3333333 31.6666667L30 31.6666667 36 44.3166667 33.75 48.3833333C32.5333333 50.6166667 34.1333333 53.3333333 36.6666667 53.3333333L55 53.3333333C55.9166667 53.3333333 56.6666667 52.5833333 56.6666667 51.6666667 56.6666667 50.75 55.9166667 50 55 50L36.6666667 50 38.5 46.6666667 50.9166667 46.6666667C52.1666667 46.6666667 53.2666667 45.9833333 53.8333333 44.95L59.8 34.1333333C60.4166667 33.0333333 59.6166667 31.6666667 58.35 31.6666667L33.6833333 31.6666667 32.5666667 29.2833333C32.3 28.7 31.7 28.3333333 31.0666667 28.3333333L28.3333333 28.3333333C27.4166667 28.3333333 26.6666667 29.0833333 26.6666667 30zM53.3333333 55C51.5 55 50.0166667 56.5 50.0166667 58.3333333 50.0166667 60.1666667 51.5 61.6666667 53.3333333 61.6666667 55.1666667 61.6666667 56.6666667 60.1666667 56.6666667 58.3333333 56.6666667 56.5 55.1666667 55 53.3333333 55z"}),j.jsx("path",{d:"M44.957,2 C21.221,2 2,21.264 2,45 C2,68.736 21.221,88 44.957,88 C68.736,88 88,68.736 88,45 C88,21.264 68.736,2 44.957,2 Z M45,90 C20.1375,90 0,69.8625 0,45 C0,20.1375 20.1375,0 45,0 C69.8625,0 90,20.1375 90,45 C90,69.8625 69.8625,90 45,90 Z"})]})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.ShoppingCartEmptyIcon=a}),98);
__d("WAWebShowGenericErrorToastAction",["fbt","WAWebToast.react","WAWebToastManager","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(){d("WAWebToastManager").ToastManager.open(j.jsx(d("WAWebToast.react").Toast,{msg:h._(/*BTDS*/"__JHASH__QLdqjTjQ0CL__JHASH__"),duration:6e3}))}g["default"]=a}),226);
__d("WAWebCartDetailDrawer.react",["fbt","$InternalEnum","Promise","WALogger","WAQplTypes","WATimeUtils","WAWebBizClearCartAction","WAWebBizGatingUtils","WAWebBizMatchCartItemsToProductsAction","WAWebBizPullCartUpdateAction","WAWebBizSubmitOrderAction","WAWebBizUpdateCartMessageAction","WAWebBusinessProfileCollection","WAWebBusinessProfileUtils","WAWebCartCollection","WAWebCartDetailDrawerFooter.react","WAWebCartLogEvents","WAWebCartProductList.react","WAWebChatThreadLogging","WAWebConfirmPopup.react","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerContext","WAWebDrawerHeader.react","WAWebDrawerManager","WAWebFbtCommon","WAWebFlatListController","WAWebFlatListLoadingSpinnerItem.react","WAWebFlex.react","WAWebModalManager","WAWebOrderLogEvents","WAWebProductCatalogContext","WAWebPromiseQueue","WAWebShoppingCartEmptyIcon.react","WAWebShowGenericErrorToastAction","WAWebText_DONOTUSE.react","WAWebThemeContext","WAWebUISpacing","WAWebUtilsLogQplEvents","WAWebWDSButton","WAWebWDSText.react","asyncToGeneratorRuntime","react","stylex","useLazyRef","useWAWebListener"],(function(a,b,c,d,e,f,g,h){var i,j,k,l;function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to create catalog order"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to open the cart"]);n=function(){return a};return a}e=l||d("react");var o=j||(j=c("react")),p=e.useContext,q=e.useEffect,r=e.useMemo,s=e.useRef,t=e.useState,u={emptyCardText:{textAlign:"x2b8uid",$$css:!0},contentBackground:{backgroundColor:"x150wa6m",$$css:!0},footer:{position:"x1n2onr6",zIndex:"xhtitgo",boxSizing:"x9f619",backgroundColor:"x150wa6m",$$css:!0},footerDark:{backgroundColor:"x1m8r95a",$$css:!0}};function v(a){a=a.cart;a=a.itemCount;return a==null||a===0?null:o.jsx(d("WAWebWDSText.react").WDSTextTitle,{children:h._(/*BTDS*/"__JHASH__WkdDeznIhww__JHASH__",[h._plural(a,"cart-number-of-items")])})}v.displayName=v.name+" [from "+f.id+"]";function w(a){var b=a.cart,e=a.onSend,f=a.cartFlatListController,g=a.onProductDetail,h=a.sellerJid,i=a.cartProductItems,j=a.isDarkTheme,l=a.isDirectConnection;a=a.onProductCatalog;var m=d("WAWebBizMatchCartItemsToProductsAction").getSavingsFromCartItemsAndProducts(i);return o.jsxs(o.Fragment,{children:[o.jsx(y,{cart:b,onProductCatalog:a}),o.jsx(c("WAWebCartProductList.react"),{flatListController:f,onProductDetail:g,cart:b,sellerJid:h,cartProductItems:i}),o.jsx("div",{className:(k||(k=c("stylex")))(u.footer,j&&u.footerDark),children:o.jsx(d("WAWebCartDetailDrawerFooter.react").CartDrawerContentFooter,{savings:m,cart:b,onSend:e,isDirectConnection:l})})]})}w.displayName=w.name+" [from "+f.id+"]";function x(a){a=a.onProductCatalog;return o.jsx(d("WAWebWDSButton").WDSButtonSecondary,{testid:void 0,onClick:a,children:h._(/*BTDS*/"__JHASH__vn5A07mhsrS__JHASH__")})}x.displayName=x.name+" [from "+f.id+"]";function y(a){var b=a.cart;a=a.onProductCatalog;return o.jsxs(d("WAWebFlex.react").FlexRow,{justify:"all",align:"center",xstyle:[d("WAWebUISpacing").uiPadding.all16,u.contentBackground],children:[o.jsx(v,{cart:b}),o.jsx(x,{onProductCatalog:a})]})}y.displayName=y.name+" [from "+f.id+"]";function z(a){var b=a.businessProfile;a=a.onProductCatalog;return o.jsxs("div",{className:"x78zum5 xdt5ytf x6s0dn4 x5yr21d x13crsa5 x13omvei x1rxj1xn x1m6arcz x150wa6m",children:[o.jsx(d("WAWebShoppingCartEmptyIcon.react").ShoppingCartEmptyIcon,{}),o.jsx(d("WAWebWDSText.react").WDSTextLarge,{xstyle:[d("WAWebUISpacing").uiMargin.top30,d("WAWebUISpacing").uiMargin.bottom15],children:h._(/*BTDS*/"__JHASH__Xd4-0R6qGw8__JHASH__")}),o.jsx(d("WAWebText_DONOTUSE.react").TextDiv,{xstyle:[u.emptyCardText,d("WAWebUISpacing").uiPadding.bottom30],theme:"plain",children:h._(/*BTDS*/"__JHASH__sEouFfZOfyF__JHASH__")}),d("WAWebBusinessProfileUtils").hasCatalog(b)&&o.jsx(d("WAWebWDSButton").WDSButtonPrimary,{onClick:a,children:h._(/*BTDS*/"__JHASH__BPknNIlBS71__JHASH__")})]})}z.displayName=z.name+" [from "+f.id+"]";var A=b("$InternalEnum")({LOADING:"loading",READY_EMPTY:"readyEmpty",READY_CONTENT:"readyContent"});function B(a){var b=a.children,d=a.drawerState;a=a.emptyContent;switch(d){case A.READY_EMPTY:return a;case A.READY_CONTENT:return b;case A.LOADING:return o.jsx(c("WAWebFlatListLoadingSpinnerItem.react"),{})}}B.displayName=B.name+" [from "+f.id+"]";e=o.forwardRef(a);function a(a,e){a=babelHelpers["extends"]({},a);var f=a.onBack,g=a.sellerJid,j=a.chat,k=a.closeDrawerRightOnSend,l=a.onProductCatalog,u=a.onProductDetail;a=a.canLogQpl;var v=a===void 0?!0:a,x=p(d("WAWebDrawerContext").DrawerContext);a=d("WAWebThemeContext").useIsDarkTheme();var y=r(function(){return d("WAWebCartCollection").CartCollection.findCart(g)},[g]),C=s(null),D=c("useLazyRef")(function(){return new(d("WAWebPromiseQueue").PromiseQueue)()}),E=r(function(){return new(c("WAWebFlatListController"))()},[]),F=t(!0),G=F[0],H=F[1];F=t(void 0);var I=F[0],J=F[1];F=t([]);var K=F[0],L=F[1];F=t(y.message);var M=F[0],N=F[1],O=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield (i||(i=b("Promise"))).all([a?c("WAWebBizPullCartUpdateAction")(y,v):(i||(i=b("Promise"))).resolve(),d("WAWebBusinessProfileCollection").BusinessProfileCollection.find(j.id)]));var e=a[0];a=a[1];e&&(C.current=e);e=d("WAWebBizMatchCartItemsToProductsAction").matchCartItemsToProducts(y,C.current);H(!1);J(a);L(e)});return function(b){return a.apply(this,arguments)}}();d("useWAWebListener").useListener(y,"change:cartItemCollection",function(){D.current.enqueue(function(){return O()})});q(function(){var a=!0;v&&d("WAWebUtilsLogQplEvents").qplAnnotateCartView(y.id.toString()!==g,y.itemCount);O(!0,v).then(function(b){a=!1,v&&d("WAWebUtilsLogQplEvents").qplEndCartView(d("WAQplTypes").QuickLogActionType.SUCCESS),d("WAWebCartLogEvents").logCartListImpression(y.id.toString(),d("WAWebProductCatalogContext").getProductCatalogContext(x))})["catch"](function(a){d("WALogger").ERROR(n()).verbose().devConsole(a).sendLogs("openCart: failed to open the cart"),c("WAWebShowGenericErrorToastAction")(),c("WAWebBizClearCartAction")(y)})["finally"](function(){a&&v&&d("WAWebUtilsLogQplEvents").qplEndCartView(d("WAQplTypes").QuickLogActionType.FAIL),H(!1)})},[]);var P=function(){d("WAWebDrawerManager").DrawerManager.existsDrawerRight(function(a){a&&d("WAWebDrawerManager").DrawerManager.closeDrawerRight()})};F=function(){H(!0),d("WAWebUtilsLogQplEvents").qplStartOrderCreate(K.length),c("WAWebBizSubmitOrderAction")(y,j).then(function(a){var b=Boolean(y.message);d("WAWebOrderLogEvents").logSendOrderMessage({orderId:a,catalogOwnerJid:y.id.toString(),catalogContext:d("WAWebProductCatalogContext").getProductCatalogContext(x),isOrderMsgAttached:b,quantity:y.itemCount});d("WAWebBizGatingUtils").commerceThreadsLoggingEnabled()&&d("WAWebChatThreadLogging").handleActivitiesForChatThreadLogging([{activityType:"ordersSent",ts:d("WATimeUtils").unixTime(),chatId:j.id}]);f();c("WAWebBizClearCartAction")(y);y.message=void 0;k&&P();d("WAWebUtilsLogQplEvents").qplEndOrderCreate(d("WAQplTypes").QuickLogActionType.SUCCESS)})["catch"](function(a){d("WALogger").ERROR(m()).verbose().devConsole(a).sendLogs("submitOrder: order creation or order message send error"),c("WAWebShowGenericErrorToastAction")(),O(!0),d("WAWebUtilsLogQplEvents").qplEndOrderCreate(d("WAQplTypes").QuickLogActionType.FAIL)})["finally"](function(){H(!1)})};var Q=function(a){N(a),c("WAWebBizUpdateCartMessageAction")(y,a)},R=function(){d("WAWebModalManager").ModalManager.open(o.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._(/*BTDS*/"__JHASH__M8kY6PDUnWh__JHASH__"),onOK:function(){d("WAWebModalManager").ModalManager.close()},okText:c("WAWebFbtCommon")("OK"),children:h._(/*BTDS*/"__JHASH__rPBUmkqwFy5__JHASH__")}))},S=r(function(){if(G)return A.LOADING;return!y.itemCount?A.READY_EMPTY:A.READY_CONTENT},[G,y.itemCount]),T=o.jsx(z,{onProductCatalog:l,businessProfile:I}),U=d("WAWebBizGatingUtils").isBuyerOrderRequestVariantEnabled()?h._(/*BTDS*/"__JHASH__Ujj5mDA5sGT__JHASH__"):h._(/*BTDS*/"__JHASH__SpYF24yGb8G__JHASH__");return o.jsxs(c("WAWebDrawer.react"),{ref:e,onDrop:f,theme:"striped",children:[o.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:U,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL,onBack:f}),o.jsx(c("WAWebDrawerBody.react"),{flatListControllers:[E],children:o.jsx(B,{drawerState:S,emptyContent:T,children:o.jsx(w,{cart:y,chat:j,onSend:F,onChange:Q,onMaxPasteExceeded:R,cartMessage:M,cartFlatListController:E,onProductDetail:u,onProductCatalog:l,sellerJid:g,cartProductItems:K,isDarkTheme:a,isDirectConnection:Boolean(I==null?void 0:I.isBusinessDirectConnection())})})})]})}a.displayName=a.name+" [from "+f.id+"]";g.CartDetailDrawer=e}),226);
__d("WAWebBizCartFlow",["$InternalEnum","WAWebCartDetailDrawer.react","WAWebDrawerContext","WAWebDrawerManager","WAWebProductCatalogContext","WAWebProductDetailsFlowLoadable","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebUtilsLogQplEvents","WAWebWamEnumCatalogEntryPoint","react","useWAWebFlow"],(function(a,b,c,d,e,f,g){var h,i,j=i||d("react"),k=h||(h=c("react")),l=j.useContext,m=j.useEffect,n=j.useState,o=b("$InternalEnum").Mirrored(["CartDetails","ProductCatalog","ProductDetails"]);function a(a){var b=d("useWAWebFlow").useFlow(o.CartDetails),c=b[0],e=b[1];b=a.sellerJid;a=a.chat;var f=n(null),g=f[0],h=f[1];f=n(!0);var i=f[0],j=f[1];m(function(){d("WAWebDrawerManager").DrawerManager.existsDrawerLeft(function(a){a&&d("WAWebDrawerManager").DrawerManager.closeDrawerLeft()}),d("WAWebDrawerManager").DrawerManager.existsDrawerMid(function(a){a&&d("WAWebDrawerManager").DrawerManager.closeDrawerMid()})},[]);if(e.step==null)return null;f=function(){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{annotations:{string:{EntryPoint:"Cart"}}}),j(!1),e.push(o.ProductCatalog)};var l=function(a){d("WAWebUtilsLogQplEvents").qplStartProductView("Cart"),j(!1),h(a),e.push(o.ProductDetails)},q=function(){e.pop()},r;switch(e.step){case o.CartDetails:r=k.jsx(p,{chat:a,sellerJid:b,onProductDetail:l,onProductCatalog:f,onBack:function(){return e.end()},canLogQpl:i});break;case o.ProductCatalog:r=k.jsx(d("WAWebProductDetailsFlowLoadable").ProductDetailsFlowLoadable,{chat:a,catalogOwnerJid:b});break;case o.ProductDetails:g!=null&&(r=k.jsx(d("WAWebProductDetailsFlowLoadable").ProductDetailsFlowLoadable,{refreshCarousel:!0,chat:a,productInfo:g,onEnd:q}));break}return k.jsx(c,{flow:e,children:r})}a.displayName=a.name+" [from "+f.id+"]";var p=k.forwardRef(e);function e(a,b){a=babelHelpers["extends"]({},a);var c=l(d("WAWebDrawerContext").DrawerContext);c=d("WAWebProductCatalogContext").getProductCatalogContext(c);c=c.entryPoint;return k.jsx(d("WAWebCartDetailDrawer.react").CartDetailDrawer,babelHelpers["extends"]({ref:b,closeDrawerRightOnSend:c===d("WAWebWamEnumCatalogEntryPoint").CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PRODUCT_LIST_MESSAGE},a))}e.displayName=e.name+" [from "+f.id+"]";g["default"]=a}),98);