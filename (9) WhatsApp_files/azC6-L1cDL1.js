;/*FB_PKG_DELIM*/

__d("WAWeb-easeljs",[],(function(b,c,d,e,f,g){var h=h||{};h.extend=function(b,c){"use strict";function d(){this.constructor=b}return d.prototype=c.prototype,b.prototype=new d},h=h||{},h.promote=function(b,c){"use strict";var d=b.prototype,e=Object.getPrototypeOf&&Object.getPrototypeOf(d)||d.__proto__;if(e){d[(c+="_")+"constructor"]=e.constructor;for(var f in e)d.hasOwnProperty(f)&&"function"==typeof e[f]&&(d[c+f]=e[f])}return b},h=h||{},h.indexOf=function(b,c){"use strict";for(var d=0,e=b.length;e>d;d++)if(c===b[d])return d;return-1},h=h||{},(function(){"use strict";function b(b,c,d){this.type=b,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!c,this.cancelable=!!d,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var c=b.prototype;c.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},c.stopPropagation=function(){this.propagationStopped=!0},c.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},c.remove=function(){this.removed=!0},c.clone=function(){return new b(this.type,this.bubbles,this.cancelable)},c.set=function(b){for(var c in b)this[c]=b[c];return this},c.toString=function(){return"[Event (type="+this.type+")]"},h.Event=b})(),h=h||{},(function(){"use strict";function b(){this._listeners=null,this._captureListeners=null}var c=b.prototype;b.initialize=function(b){b.addEventListener=c.addEventListener,b.on=c.on,b.removeEventListener=b.off=c.removeEventListener,b.removeAllEventListeners=c.removeAllEventListeners,b.hasEventListener=c.hasEventListener,b.dispatchEvent=c.dispatchEvent,b._dispatchEvent=c._dispatchEvent,b.willTrigger=c.willTrigger},c.addEventListener=function(b,c,d){var e;e=d?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var f=e[b];return f&&this.removeEventListener(b,c,d),f=e[b],f?f.push(c):e[b]=[c],c},c.on=function(b,c,d,e,f,g){return c.handleEvent&&(d=d||c,c=c.handleEvent),d=d||this,this.addEventListener(b,function(b){c.call(d,b,f),e&&b.remove()},g)},c.removeEventListener=function(b,c,d){d=d?this._captureListeners:this._listeners;if(d){var e=d[b];if(e)for(var f=0,g=e.length;g>f;f++)if(e[f]==c){1==g?delete d[b]:e.splice(f,1);break}}},c.off=c.removeEventListener,c.removeAllEventListeners=function(b){b?(this._listeners&&delete this._listeners[b],this._captureListeners&&delete this._captureListeners[b]):this._listeners=this._captureListeners=null},c.dispatchEvent=function(b,c,d){if("string"==typeof b){var e=this._listeners;if(!(c||e&&e[b]))return!0;b=new h.Event(b,c,d)}else b.target&&b.clone&&(b=b.clone());try{b.target=this}catch(b){}if(b.bubbles&&this.parent){for(e=this,c=[e];e.parent;)c.push(e=e.parent);d=c.length;for(e=d-1;e>=0&&!b.propagationStopped;e--)c[e]._dispatchEvent(b,1+(0==e));for(e=1;d>e&&!b.propagationStopped;e++)c[e]._dispatchEvent(b,3)}else this._dispatchEvent(b,2);return!b.defaultPrevented},c.hasEventListener=function(b){var c=this._listeners,d=this._captureListeners;return!!(c&&c[b]||d&&d[b])},c.willTrigger=function(b){for(var c=this;c;){if(c.hasEventListener(b))return!0;c=c.parent}return!1},c.toString=function(){return"[EventDispatcher]"},c._dispatchEvent=function(b,c){var d,e=1==c?this._captureListeners:this._listeners;if(b&&e){e=e[b.type];if(!e||!(d=e.length))return;try{b.currentTarget=this}catch(b){}try{b.eventPhase=c}catch(b){}b.removed=!1,e=e.slice();for(var f=0;d>f&&!b.immediatePropagationStopped;f++){var g=e[f];g.handleEvent?g.handleEvent(b):g(b),b.removed&&(this.off(b.type,g,1==c),b.removed=!1)}}},h.EventDispatcher=b})(),h=h||{},(function(){"use strict";function b(){throw"Ticker cannot be instantiated."}b.RAF_SYNCHED="synched",b.RAF="raf",b.TIMEOUT="timeout",b.useRAF=!1,b.timingMode=null,b.maxDelta=0,b.paused=!1,b.removeEventListener=null,b.removeAllEventListeners=null,b.dispatchEvent=null,b.hasEventListener=null,b._listeners=null,h.EventDispatcher.initialize(b),b._addEventListener=b.addEventListener,b.addEventListener=function(){return!b._inited&&b.init(),b._addEventListener.apply(b,arguments)},b._inited=!1,b._startTime=0,b._pausedTime=0,b._ticks=0,b._pausedTicks=0,b._interval=50,b._lastTime=0,b._times=null,b._tickTimes=null,b._timerId=null,b._raf=!0,b.setInterval=function(c){b._interval=c,b._inited&&b._setupTick()},b.getInterval=function(){return b._interval},b.setFPS=function(c){b.setInterval(1e3/c)},b.getFPS=function(){return 1e3/b._interval};try{Object.defineProperties(b,{interval:{get:b.getInterval,set:b.setInterval},framerate:{get:b.getFPS,set:b.setFPS}})}catch(b){}b.init=function(){b._inited||(b._inited=!0,b._times=[],b._tickTimes=[],b._startTime=b._getTime(),b._times.push(b._lastTime=0),b.interval=b._interval)},b.reset=function(){if(b._raf){var c=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;c&&c(b._timerId)}else clearTimeout(b._timerId);b.removeAllEventListeners("tick"),b._timerId=b._times=b._tickTimes=null,b._startTime=b._lastTime=b._ticks=0,b._inited=!1},b.getMeasuredTickTime=function(d){var c=0,e=b._tickTimes;if(!e||e.length<1)return-1;d=Math.min(e.length,d||0|b.getFPS());for(var f=0;d>f;f++)c+=e[f];return c/d},b.getMeasuredFPS=function(d){var c=b._times;return!c||c.length<2?-1:(d=Math.min(c.length-1,d||0|b.getFPS()),1e3/((c[0]-c[d])/d))},b.setPaused=function(c){b.paused=c},b.getPaused=function(){return b.paused},b.getTime=function(c){return b._startTime?b._getTime()-(c?b._pausedTime:0):-1},b.getEventTime=function(c){return b._startTime?(b._lastTime||b._startTime)-(c?b._pausedTime:0):-1},b.getTicks=function(c){return b._ticks-(c?b._pausedTicks:0)},b._handleSynch=function(){b._timerId=null,b._setupTick(),b._getTime()-b._lastTime>=.97*(b._interval-1)&&b._tick()},b._handleRAF=function(){b._timerId=null,b._setupTick(),b._tick()},b._handleTimeout=function(){b._timerId=null,b._setupTick(),b._tick()},b._setupTick=function(){if(null==b._timerId){var d=b.timingMode||b.useRAF&&b.RAF_SYNCHED;if(d==b.RAF_SYNCHED||d==b.RAF){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(c)return b._timerId=c(d==b.RAF?b._handleRAF:b._handleSynch),void (b._raf=!0)}b._raf=!1,b._timerId=setTimeout(b._handleTimeout,b._interval)}},b._tick=function(){var d=b.paused,c=b._getTime(),e=c-b._lastTime;if(b._lastTime=c,b._ticks++,d&&(b._pausedTicks++,b._pausedTime+=e),b.hasEventListener("tick")){var f=new h.Event("tick"),g=b.maxDelta;f.delta=g&&e>g?g:e,f.paused=d,f.time=c,f.runTime=c-b._pausedTime,b.dispatchEvent(f)}for(b._tickTimes.unshift(b._getTime()-c);b._tickTimes.length>100;)b._tickTimes.pop();for(b._times.unshift(c);b._times.length>100;)b._times.pop()};var c=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);b._getTime=function(){return(c&&c.call(performance)||(new Date).getTime())-b._startTime},h.Ticker=b})(),h=h||{},(function(){"use strict";function b(){throw"UID cannot be instantiated"}b._nextID=0,b.get=function(){return b._nextID++},h.UID=b})(),h=h||{},(function(){"use strict";function b(b,c,d,e,f,g,h,i,j,k,l){this.Event_constructor(b,c,d),this.stageX=e,this.stageY=f,this.rawX=null==j?e:j,this.rawY=null==k?f:k,this.nativeEvent=g,this.pointerID=h,this.primary=!!i,this.relatedTarget=l}var c=h.extend(b,h.Event);c._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},c._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},c._get_isTouch=function(){return-1!==this.pointerID};try{Object.defineProperties(c,{localX:{get:c._get_localX},localY:{get:c._get_localY},isTouch:{get:c._get_isTouch}})}catch(b){}c.clone=function(){return new b(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},c.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},h.MouseEvent=h.promote(b,"Event")})(),h=h||{},(function(){"use strict";function b(b,c,d,e,f,g){this.setValues(b,c,d,e,f,g)}var c=b.prototype;b.DEG_TO_RAD=Math.PI/180,b.identity=null,c.setValues=function(b,c,d,e,f,g){return this.a=null==b?1:b,this.b=c||0,this.c=d||0,this.d=null==e?1:e,this.tx=f||0,this.ty=g||0,this},c.append=function(b,c,d,e,f,g){var h=this.a,i=this.b,j=this.c,k=this.d;return(1!=b||0!=c||0!=d||1!=e)&&(this.a=h*b+j*c,this.b=i*b+k*c,this.c=h*d+j*e,this.d=i*d+k*e),this.tx=h*f+j*g+this.tx,this.ty=i*f+k*g+this.ty,this},c.prepend=function(b,c,d,e,f,g){var h=this.a,i=this.c,j=this.tx;return this.a=b*h+d*this.b,this.b=c*h+e*this.b,this.c=b*i+d*this.d,this.d=c*i+e*this.d,this.tx=b*j+d*this.ty+f,this.ty=c*j+e*this.ty+g,this},c.appendMatrix=function(b){return this.append(b.a,b.b,b.c,b.d,b.tx,b.ty)},c.prependMatrix=function(b){return this.prepend(b.a,b.b,b.c,b.d,b.tx,b.ty)},c.appendTransform=function(c,d,e,f,g,h,i,j,k){if(g%360)var g=g*b.DEG_TO_RAD,l=Math.cos(g),g=Math.sin(g);else l=1,g=0;return h||i?(h*=b.DEG_TO_RAD,i*=b.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(h),Math.cos(h),c,d),this.append(l*e,g*e,-g*f,l*f,0,0)):this.append(l*e,g*e,-g*f,l*f,c,d),(j||k)&&(this.tx-=j*this.a+k*this.c,this.ty-=j*this.b+k*this.d),this},c.prependTransform=function(c,d,e,f,g,h,i,j,k){if(g%360)var g=g*b.DEG_TO_RAD,l=Math.cos(g),g=Math.sin(g);else l=1,g=0;return(j||k)&&(this.tx-=j,this.ty-=k),h||i?(h*=b.DEG_TO_RAD,i*=b.DEG_TO_RAD,this.prepend(l*e,g*e,-g*f,l*f,0,0),this.prepend(Math.cos(i),Math.sin(i),-Math.sin(h),Math.cos(h),c,d)):this.prepend(l*e,g*e,-g*f,l*f,c,d),this},c.rotate=function(c){c*=b.DEG_TO_RAD;var d=Math.cos(c);c=Math.sin(c);var e=this.a,f=this.b;return this.a=e*d+this.c*c,this.b=f*d+this.d*c,this.c=-e*c+this.c*d,this.d=-f*c+this.d*d,this},c.skew=function(c,d){return c*=b.DEG_TO_RAD,d*=b.DEG_TO_RAD,this.append(Math.cos(d),Math.sin(d),-Math.sin(c),Math.cos(c),0,0),this},c.scale=function(b,c){return this.a*=b,this.b*=b,this.c*=c,this.d*=c,this},c.translate=function(b,c){return this.tx+=this.a*b+this.c*c,this.ty+=this.b*b+this.d*c,this},c.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},c.invert=function(){var b=this.a,c=this.b,d=this.c,e=this.d,f=this.tx,g=b*e-c*d;return this.a=e/g,this.b=-c/g,this.c=-d/g,this.d=b/g,this.tx=(d*this.ty-e*f)/g,this.ty=-(b*this.ty-c*f)/g,this},c.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},c.equals=function(b){return this.tx===b.tx&&this.ty===b.ty&&this.a===b.a&&this.b===b.b&&this.c===b.c&&this.d===b.d},c.transformPoint=function(b,c,d){return d=d||{},d.x=b*this.a+c*this.c+this.tx,d.y=b*this.b+c*this.d+this.ty,d},c.decompose=function(c){null==c&&(c={}),c.x=this.tx,c.y=this.ty,c.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),c.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var d=Math.atan2(-this.c,this.d),e=Math.atan2(this.b,this.a),f=Math.abs(1-d/e);return 1e-5>f?(c.rotation=e/b.DEG_TO_RAD,this.a<0&&this.d>=0&&(c.rotation+=c.rotation<=0?180:-180),c.skewX=c.skewY=0):(c.skewX=d/b.DEG_TO_RAD,c.skewY=e/b.DEG_TO_RAD),c},c.copy=function(b){return this.setValues(b.a,b.b,b.c,b.d,b.tx,b.ty)},c.clone=function(){return new b(this.a,this.b,this.c,this.d,this.tx,this.ty)},c.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},b.identity=new b,h.Matrix2D=b})(),h=h||{},(function(){"use strict";function b(b,c,d,e,f){this.setValues(b,c,d,e,f)}var c=b.prototype;c.setValues=function(b,c,d,e,f){return this.visible=null==b?!0:!!b,this.alpha=null==c?1:c,this.shadow=d,this.compositeOperation=e,this.matrix=f||this.matrix&&this.matrix.identity()||new h.Matrix2D,this},c.append=function(b,c,d,e,f){return this.alpha*=c,this.shadow=d||this.shadow,this.compositeOperation=e||this.compositeOperation,this.visible=this.visible&&b,f&&this.matrix.appendMatrix(f),this},c.prepend=function(b,c,d,e,f){return this.alpha*=c,this.shadow=this.shadow||d,this.compositeOperation=this.compositeOperation||e,this.visible=this.visible&&b,f&&this.matrix.prependMatrix(f),this},c.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},c.clone=function(){return new b(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},h.DisplayProps=b})(),h=h||{},(function(){"use strict";function b(b,c){this.setValues(b,c)}var c=b.prototype;c.setValues=function(b,c){return this.x=b||0,this.y=c||0,this},c.copy=function(b){return this.x=b.x,this.y=b.y,this},c.clone=function(){return new b(this.x,this.y)},c.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},h.Point=b})(),h=h||{},(function(){"use strict";function b(b,c,d,e){this.setValues(b,c,d,e)}var c=b.prototype;c.setValues=function(b,c,d,e){return this.x=b||0,this.y=c||0,this.width=d||0,this.height=e||0,this},c.extend=function(b,c,d,e){return d=d||0,e=e||0,b+d>this.x+this.width&&(this.width=b+d-this.x),c+e>this.y+this.height&&(this.height=c+e-this.y),b<this.x&&(this.width+=this.x-b,this.x=b),c<this.y&&(this.height+=this.y-c,this.y=c),this},c.pad=function(b,c,d,e){return this.x-=c,this.y-=b,this.width+=c+e,this.height+=b+d,this},c.copy=function(b){return this.setValues(b.x,b.y,b.width,b.height)},c.contains=function(b,c,d,e){return d=d||0,e=e||0,b>=this.x&&b+d<=this.x+this.width&&c>=this.y&&c+e<=this.y+this.height},c.union=function(b){return this.clone().extend(b.x,b.y,b.width,b.height)},c.intersection=function(c){var d=c.x,e=c.y,f=d+c.width;c=e+c.height;return this.x>d&&(d=this.x),this.y>e&&(e=this.y),this.x+this.width<f&&(f=this.x+this.width),this.y+this.height<c&&(c=this.y+this.height),d>=f||e>=c?null:new b(d,e,f-d,c-e)},c.intersects=function(b){return b.x<=this.x+this.width&&this.x<=b.x+b.width&&b.y<=this.y+this.height&&this.y<=b.y+b.height},c.isEmpty=function(){return this.width<=0||this.height<=0},c.clone=function(){return new b(this.x,this.y,this.width,this.height)},c.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},h.Rectangle=b})(),h=h||{},(function(){"use strict";function b(b,c,d,e,f,g,h){b.addEventListener&&(this.target=b,this.overLabel=null==d?"over":d,this.outLabel=null==c?"out":c,this.downLabel=null==e?"down":e,this.play=f,this._isPressed=!1,this._isOver=!1,this._enabled=!1,b.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),g&&(h&&(g.actionsEnabled=!1,g.gotoAndStop&&g.gotoAndStop(h)),b.hitArea=g))}var c=b.prototype;c.setEnabled=function(b){if(b!=this._enabled){var c=this.target;this._enabled=b,b?(c.cursor="pointer",c.addEventListener("rollover",this),c.addEventListener("rollout",this),c.addEventListener("mousedown",this),c.addEventListener("pressup",this),c._reset&&(c.__reset=c._reset,c._reset=this._reset)):(c.cursor=null,c.removeEventListener("rollover",this),c.removeEventListener("rollout",this),c.removeEventListener("mousedown",this),c.removeEventListener("pressup",this),c.__reset&&(c._reset=c.__reset,delete c.__reset))}},c.getEnabled=function(){return this._enabled};try{Object.defineProperties(c,{enabled:{get:c.getEnabled,set:c.setEnabled}})}catch(b){}c.toString=function(){return"[ButtonHelper]"},c.handleEvent=function(b){var c,d=this.target;b=b.type;"mousedown"==b?(this._isPressed=!0,c=this.downLabel):"pressup"==b?(this._isPressed=!1,c=this._isOver?this.overLabel:this.outLabel):"rollover"==b?(this._isOver=!0,c=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,c=this._isPressed?this.overLabel:this.outLabel),this.play?d.gotoAndPlay&&d.gotoAndPlay(c):d.gotoAndStop&&d.gotoAndStop(c)},c._reset=function(){var b=this.paused;this.__reset(),this.paused=b},h.ButtonHelper=b})(),h=h||{},(function(){"use strict";function b(b,c,d,e){this.color=b||"black",this.offsetX=c||0,this.offsetY=d||0,this.blur=e||0}var c=b.prototype;b.identity=new b("transparent",0,0,0),c.toString=function(){return"[Shadow]"},c.clone=function(){return new b(this.color,this.offsetX,this.offsetY,this.blur)},h.Shadow=b})(),h=h||{},(function(){"use strict";function b(b){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(b)}var c=h.extend(b,h.EventDispatcher);c.getAnimations=function(){return this._animations.slice()};try{Object.defineProperties(c,{animations:{get:c.getAnimations}})}catch(b){}c.getNumFrames=function(b){if(null==b)return this._frames?this._frames.length:this._numFrames||0;b=this._data[b];return null==b?0:b.frames.length},c.getAnimation=function(b){return this._data[b]},c.getFrame=function(b){var c;return this._frames&&(c=this._frames[b])?c:null},c.getFrameBounds=function(b,c){b=this.getFrame(b);return b?(c||new h.Rectangle).setValues(-b.regX,-b.regY,b.rect.width,b.rect.height):null},c.toString=function(){return"[SpriteSheet]"},c.clone=function(){throw"SpriteSheet cannot be cloned."},c._parseData=function(b){var c,d,e;if(null!=b){if(this.framerate=b.framerate||0,b.images&&(d=b.images.length)>0)for(e=this._images=[],c=0;d>c;c++){var f=b.images[c];if("string"==typeof f){var g=f;f=document.createElement("img"),f.src=g}e.push(f),f.getContext||f.naturalWidth||(this._loadCount++,this.complete=!1,function(b,c){f.onload=function(){b._handleImageLoad(c)}}(this,g),function(b,c){f.onerror=function(){b._handleImageError(c)}}(this,g))}if(!(null==b.frames))if(Array.isArray(b.frames))for(this._frames=[],e=b.frames,c=0,d=e.length;d>c;c++){var i=e[c];this._frames.push({image:this._images[i[4]?i[4]:0],rect:new h.Rectangle(i[0],i[1],i[2],i[3]),regX:i[5]||0,regY:i[6]||0})}else i=b.frames,this._frameWidth=i.width,this._frameHeight=i.height,this._regX=i.regX||0,this._regY=i.regY||0,this._spacing=i.spacing||0,this._margin=i.margin||0,this._numFrames=i.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(i=b.animations)){this._data={};for(b in i){var j={name:b},k=i[b];if("number"==typeof k)e=j.frames=[k];else if(Array.isArray(k))if(1==k.length)j.frames=[k[0]];else for(j.speed=k[3],j.next=k[2],e=j.frames=[],c=k[0];c<=k[1];c++)e.push(c);else{j.speed=k.speed,j.next=k.next;k=k.frames;e=j.frames="number"==typeof k?[k]:k.slice(0)}(j.next===!0||void 0===j.next)&&(j.next=b),(j.next===!1||e.length<2&&j.next==b)&&(j.next=null),j.speed||(j.speed=1),this._animations.push(b),this._data[b]=j}}}},c._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},c._handleImageError=function(b){var c=new h.Event("error");c.src=b,this.dispatchEvent(c),0==--this._loadCount&&this.dispatchEvent("complete")},c._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];var b=this._numFrames||1e5,c=0,d=this._frameWidth,e=this._frameHeight,f=this._spacing,g=this._margin;a:for(var i=0,j=this._images;i<j.length;i++)for(var k=j[i],l=k.width,m=k.height,n=g;m-g-e>=n;){for(var o=g;l-g-d>=o;){if(c>=b)break a;c++,this._frames.push({image:k,rect:new h.Rectangle(o,n,d,e),regX:this._regX,regY:this._regY}),o+=d+f}n+=e+f}this._numFrames=c}},h.SpriteSheet=h.promote(b,"EventDispatcher")})(),h=h||{},(function(){"use strict";function b(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var c=b.prototype,d=b;b.getRGB=function(b,c,d,e){return null!=b&&null==d&&(e=c,d=255&b,c=b>>8&255,b=b>>16&255),null==e?"rgb("+b+","+c+","+d+")":"rgba("+b+","+c+","+d+","+e+")"},b.getHSL=function(b,c,d,e){return null==e?"hsl("+b%360+","+c+"%,"+d+"%)":"hsla("+b%360+","+c+"%,"+d+"%,"+e+")"},b.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},b.STROKE_CAPS_MAP=["butt","round","square"],b.STROKE_JOINTS_MAP=["miter","round","bevel"];var e=h.createCanvas?h.createCanvas():document.createElement("canvas");e.getContext&&(b._ctx=e.getContext("2d"),e.width=e.height=1),c.getInstructions=function(){return this._updateInstructions(),this._instructions};try{Object.defineProperties(c,{instructions:{get:c.getInstructions}})}catch(b){}c.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},c.draw=function(b,c){this._updateInstructions();for(var d=this._instructions,e=this._storeIndex,f=d.length;f>e;e++)d[e].exec(b,c)},c.drawAsPath=function(b){this._updateInstructions();for(var c,d=this._instructions,e=this._storeIndex,f=d.length;f>e;e++)(c=d[e]).path!==!1&&c.exec(b)},c.moveTo=function(b,c){return this.append(new d.MoveTo(b,c),!0)},c.lineTo=function(b,c){return this.append(new d.LineTo(b,c))},c.arcTo=function(b,c,e,f,g){return this.append(new d.ArcTo(b,c,e,f,g))},c.arc=function(b,c,e,f,g,h){return this.append(new d.Arc(b,c,e,f,g,h))},c.quadraticCurveTo=function(b,c,e,f){return this.append(new d.QuadraticCurveTo(b,c,e,f))},c.bezierCurveTo=function(b,c,e,f,g,h){return this.append(new d.BezierCurveTo(b,c,e,f,g,h))},c.rect=function(b,c,e,f){return this.append(new d.Rect(b,c,e,f))},c.closePath=function(){return this._activeInstructions.length?this.append(new d.ClosePath):this},c.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},c.beginFill=function(b){return this._setFill(b?new d.Fill(b):null)},c.beginLinearGradientFill=function(b,c,e,f,g,h){return this._setFill((new d.Fill).linearGradient(b,c,e,f,g,h))},c.beginRadialGradientFill=function(b,c,e,f,g,h,i,j){return this._setFill((new d.Fill).radialGradient(b,c,e,f,g,h,i,j))},c.beginBitmapFill=function(b,c,e){return this._setFill(new d.Fill(null,e).bitmap(b,c))},c.endFill=function(){return this.beginFill()},c.setStrokeStyle=function(b,c,e,f,g){return this._updateInstructions(!0),this._strokeStyle=this.command=new d.StrokeStyle(b,c,e,f,g),this._stroke&&(this._stroke.ignoreScale=g),this._strokeIgnoreScale=g,this},c.setStrokeDash=function(b,c){return this._updateInstructions(!0),this._strokeDash=this.command=new d.StrokeDash(b,c),this},c.beginStroke=function(b){return this._setStroke(b?new d.Stroke(b):null)},c.beginLinearGradientStroke=function(b,c,e,f,g,h){return this._setStroke((new d.Stroke).linearGradient(b,c,e,f,g,h))},c.beginRadialGradientStroke=function(b,c,e,f,g,h,i,j){return this._setStroke((new d.Stroke).radialGradient(b,c,e,f,g,h,i,j))},c.beginBitmapStroke=function(b,c){return this._setStroke((new d.Stroke).bitmap(b,c))},c.endStroke=function(){return this.beginStroke()},c.curveTo=c.quadraticCurveTo,c.drawRect=c.rect,c.drawRoundRect=function(b,c,d,e,f){return this.drawRoundRectComplex(b,c,d,e,f,f,f,f)},c.drawRoundRectComplex=function(b,c,e,f,g,h,i,j){return this.append(new d.RoundRect(b,c,e,f,g,h,i,j))},c.drawCircle=function(b,c,e){return this.append(new d.Circle(b,c,e))},c.drawEllipse=function(b,c,e,f){return this.append(new d.Ellipse(b,c,e,f))},c.drawPolyStar=function(b,c,e,f,g,h){return this.append(new d.PolyStar(b,c,e,f,g,h))},c.append=function(b,c){return this._activeInstructions.push(b),this.command=b,c||(this._dirty=!0),this},c.decodePath=function(c){for(var d=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],e=[2,2,4,6,0],f=0,g=c.length,h=[],i=0,j=0,k=b.BASE_64;g>f;){var l=c.charAt(f),m=k[l],n=m>>3,o=d[n];if(!o||3&m)throw"bad path data (@"+f+"): "+l;l=e[n];n||(i=j=0),h.length=0,f++;for(n=(m>>2&1)+2,m=0;l>m;m++){var a=k[c.charAt(f)],p=a>>5?-1:1;a=(31&a)<<6|k[c.charAt(f+1)],3==n&&(a=a<<6|k[c.charAt(f+2)]),a=p*a/10,m%2?i=a+=i:j=a+=j,h[m]=a,f+=n}o.apply(this,h)}return this},c.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},c.unstore=function(){return this._storeIndex=0,this},c.clone=function(){var c=new b;return c.command=this.command,c._stroke=this._stroke,c._strokeStyle=this._strokeStyle,c._strokeDash=this._strokeDash,c._strokeIgnoreScale=this._strokeIgnoreScale,c._fill=this._fill,c._instructions=this._instructions.slice(),c._commitIndex=this._commitIndex,c._activeInstructions=this._activeInstructions.slice(),c._dirty=this._dirty,c._storeIndex=this._storeIndex,c},c.toString=function(){return"[Graphics]"},c.mt=c.moveTo,c.lt=c.lineTo,c.at=c.arcTo,c.bt=c.bezierCurveTo,c.qt=c.quadraticCurveTo,c.a=c.arc,c.r=c.rect,c.cp=c.closePath,c.c=c.clear,c.f=c.beginFill,c.lf=c.beginLinearGradientFill,c.rf=c.beginRadialGradientFill,c.bf=c.beginBitmapFill,c.ef=c.endFill,c.ss=c.setStrokeStyle,c.sd=c.setStrokeDash,c.s=c.beginStroke,c.ls=c.beginLinearGradientStroke,c.rs=c.beginRadialGradientStroke,c.bs=c.beginBitmapStroke,c.es=c.endStroke,c.dr=c.drawRect,c.rr=c.drawRoundRect,c.rc=c.drawRoundRectComplex,c.dc=c.drawCircle,c.de=c.drawEllipse,c.dp=c.drawPolyStar,c.p=c.decodePath,c._updateInstructions=function(c){var d=this._instructions,e=this._activeInstructions,f=this._commitIndex;if(this._dirty&&e.length){d.length=f,d.push(b.beginCmd);f=e.length;var g=d.length;d.length=g+f;for(var h=0;f>h;h++)d[h+g]=e[h];this._fill&&d.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&(this._oldStrokeDash=this._strokeDash,d.push(this._strokeDash)),this._strokeStyle!==this._oldStrokeStyle&&(this._oldStrokeStyle=this._strokeStyle,d.push(this._strokeStyle)),d.push(this._stroke)),this._dirty=!1}c&&(e.length=0,this._commitIndex=d.length)},c._setFill=function(b){return this._updateInstructions(!0),this.command=this._fill=b,this},c._setStroke=function(b){return this._updateInstructions(!0),(this.command=this._stroke=b)&&(b.ignoreScale=this._strokeIgnoreScale),this},(d.LineTo=function(b,c){this.x=b,this.y=c}).prototype.exec=function(b){b.lineTo(this.x,this.y)},(d.MoveTo=function(b,c){this.x=b,this.y=c}).prototype.exec=function(b){b.moveTo(this.x,this.y)},(d.ArcTo=function(b,c,d,e,f){this.x1=b,this.y1=c,this.x2=d,this.y2=e,this.radius=f}).prototype.exec=function(b){b.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(d.Arc=function(b,c,d,e,f,g){this.x=b,this.y=c,this.radius=d,this.startAngle=e,this.endAngle=f,this.anticlockwise=!!g}).prototype.exec=function(b){b.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(d.QuadraticCurveTo=function(b,c,d,e){this.cpx=b,this.cpy=c,this.x=d,this.y=e}).prototype.exec=function(b){b.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(d.BezierCurveTo=function(b,c,d,e,f,g){this.cp1x=b,this.cp1y=c,this.cp2x=d,this.cp2y=e,this.x=f,this.y=g}).prototype.exec=function(b){b.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(d.Rect=function(b,c,d,e){this.x=b,this.y=c,this.w=d,this.h=e}).prototype.exec=function(b){b.rect(this.x,this.y,this.w,this.h)},(d.ClosePath=function(){}).prototype.exec=function(b){b.closePath()},(d.BeginPath=function(){}).prototype.exec=function(b){b.beginPath()},c=(d.Fill=function(b,c){this.style=b,this.matrix=c}).prototype,c.exec=function(b){if(this.style){b.fillStyle=this.style;var c=this.matrix;c&&(b.save(),b.transform(c.a,c.b,c.c,c.d,c.tx,c.ty)),b.fill(),c&&b.restore()}},c.linearGradient=function(c,d,e,f,g,h){for(var i=this.style=b._ctx.createLinearGradient(e,f,g,h),j=0,k=c.length;k>j;j++)i.addColorStop(d[j],c[j]);return i.props={colors:c,ratios:d,x0:e,y0:f,x1:g,y1:h,type:"linear"},this},c.radialGradient=function(c,d,e,f,g,h,i,j){for(var k=this.style=b._ctx.createRadialGradient(e,f,g,h,i,j),l=0,m=c.length;m>l;l++)k.addColorStop(d[l],c[l]);return k.props={colors:c,ratios:d,x0:e,y0:f,r0:g,x1:h,y1:i,r1:j,type:"radial"},this},c.bitmap=function(c,d){if(c.naturalWidth||c.getContext||c.readyState>=2){var e=this.style=b._ctx.createPattern(c,d||"");e.props={image:c,repetition:d,type:"bitmap"}}return this},c.path=!1,c=(d.Stroke=function(b,c){this.style=b,this.ignoreScale=c}).prototype,c.exec=function(b){this.style&&(b.strokeStyle=this.style,this.ignoreScale&&(b.save(),b.setTransform(1,0,0,1,0,0)),b.stroke(),this.ignoreScale&&b.restore())},c.linearGradient=d.Fill.prototype.linearGradient,c.radialGradient=d.Fill.prototype.radialGradient,c.bitmap=d.Fill.prototype.bitmap,c.path=!1,c=(d.StrokeStyle=function(b,c,d,e,f){this.width=b,this.caps=c,this.joints=d,this.miterLimit=e,this.ignoreScale=f}).prototype,c.exec=function(c){c.lineWidth=null==this.width?"1":this.width,c.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:b.STROKE_CAPS_MAP[this.caps],c.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:b.STROKE_JOINTS_MAP[this.joints],c.miterLimit=null==this.miterLimit?"10":this.miterLimit,c.ignoreScale=null==this.ignoreScale?!1:this.ignoreScale},c.path=!1,(d.StrokeDash=function(b,c){this.segments=b,this.offset=c||0}).prototype.exec=function(b){b.setLineDash&&(b.setLineDash(this.segments||d.StrokeDash.EMPTY_SEGMENTS),b.lineDashOffset=this.offset||0)},d.StrokeDash.EMPTY_SEGMENTS=[],(d.RoundRect=function(b,c,d,e,f,g,h,i){this.x=b,this.y=c,this.w=d,this.h=e,this.radiusTL=f,this.radiusTR=g,this.radiusBR=h,this.radiusBL=i}).prototype.exec=function(b){var c=(k>j?j:k)/2,d=0,e=0,f=0,g=0,h=this.x,i=this.y,j=this.w,k=this.h,l=this.radiusTL,m=this.radiusTR,n=this.radiusBR,o=this.radiusBL;0>l&&(l*=d=-1),l>c&&(l=c),0>m&&(m*=e=-1),m>c&&(m=c),0>n&&(n*=f=-1),n>c&&(n=c),0>o&&(o*=g=-1),o>c&&(o=c),b.moveTo(h+j-m,i),b.arcTo(h+j+m*e,i-m*e,h+j,i+m,m),b.lineTo(h+j,i+k-n),b.arcTo(h+j+n*f,i+k+n*f,h+j-n,i+k,n),b.lineTo(h+o,i+k),b.arcTo(h-o*g,i+k+o*g,h,i+k-o,o),b.lineTo(h,i+l),b.arcTo(h-l*d,i-l*d,h+l,i,l),b.closePath()},(d.Circle=function(b,c,d){this.x=b,this.y=c,this.radius=d}).prototype.exec=function(b){b.arc(this.x,this.y,this.radius,0,2*Math.PI)},(d.Ellipse=function(b,c,d,e){this.x=b,this.y=c,this.w=d,this.h=e}).prototype.exec=function(b){var c=this.x,d=this.y,e=this.w,f=this.h,g=.5522848,h=e/2*g;g=f/2*g;var i=c+e,j=d+f;e=c+e/2;f=d+f/2;b.moveTo(c,f),b.bezierCurveTo(c,f-g,e-h,d,e,d),b.bezierCurveTo(e+h,d,i,f-g,i,f),b.bezierCurveTo(i,f+g,e+h,j,e,j),b.bezierCurveTo(e-h,j,c,f+g,c,f)},(d.PolyStar=function(b,c,d,e,f,g){this.x=b,this.y=c,this.radius=d,this.sides=e,this.pointSize=f,this.angle=g}).prototype.exec=function(b){var c=this.x,d=this.y,e=this.radius,f=(this.angle||0)/180*Math.PI,g=this.sides,h=1-(this.pointSize||0),i=Math.PI/g;b.moveTo(c+Math.cos(f)*e,d+Math.sin(f)*e);for(var j=0;g>j;j++)f+=i,1!=h&&b.lineTo(c+Math.cos(f)*e*h,d+Math.sin(f)*e*h),f+=i,b.lineTo(c+Math.cos(f)*e,d+Math.sin(f)*e);b.closePath()},b.beginCmd=new d.BeginPath,h.Graphics=b})(),h=h||{},(function(){"use strict";function b(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.cacheID=0,this.id=h.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._cacheOffsetX=0,this._cacheOffsetY=0,this._filterOffsetX=0,this._filterOffsetY=0,this._cacheScale=1,this._cacheDataURLID=0,this._cacheDataURL=null,this._props=new h.DisplayProps,this._rectangle=new h.Rectangle,this._bounds=null}var c=h.extend(b,h.EventDispatcher);b._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],b.suppressCrossDomainErrors=!1,b._snapToPixelEnabled=!1;var d=h.createCanvas?h.createCanvas():document.createElement("canvas");d.getContext&&(b._hitTestCanvas=d,b._hitTestContext=d.getContext("2d"),d.width=d.height=1),b._nextCacheID=1,c.getStage=function(){for(var b=this,c=h.Stage;b.parent;)b=b.parent;return b instanceof c?b:null};try{Object.defineProperties(c,{stage:{get:c.getStage}})}catch(b){}c.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},c.draw=function(b,c){var d=this.cacheCanvas;if(c||!d)return!1;c=this._cacheScale;return b.drawImage(d,this._cacheOffsetX+this._filterOffsetX,this._cacheOffsetY+this._filterOffsetY,d.width/c,d.height/c),!0},c.updateContext=function(c){var d=this,e=d.mask,f=d._props.matrix;e&&e.graphics&&!e.graphics.isEmpty()&&(e.getMatrix(f),c.transform(f.a,f.b,f.c,f.d,f.tx,f.ty),e.graphics.drawAsPath(c),c.clip(),f.invert(),c.transform(f.a,f.b,f.c,f.d,f.tx,f.ty)),this.getMatrix(f);e=f.tx;var g=f.ty;b._snapToPixelEnabled&&d.snapToPixel&&(e=e+(0>e?-.5:.5)|0,g=g+(0>g?-.5:.5)|0),c.transform(f.a,f.b,f.c,f.d,e,g),c.globalAlpha*=d.alpha,d.compositeOperation&&(c.globalCompositeOperation=d.compositeOperation),d.shadow&&this._applyShadow(c,d.shadow)},c.cache=function(b,c,d,e,f){f=f||1,this.cacheCanvas||(this.cacheCanvas=h.createCanvas?h.createCanvas():document.createElement("canvas")),this._cacheWidth=d,this._cacheHeight=e,this._cacheOffsetX=b,this._cacheOffsetY=c,this._cacheScale=f,this.updateCache()},c.updateCache=function(c){var d=this.cacheCanvas;if(!d)throw"cache() must be called before updateCache()";var e=this._cacheScale,f=this._cacheOffsetX*e,g=this._cacheOffsetY*e,h=this._cacheWidth,i=this._cacheHeight,j=d.getContext("2d"),k=this._getFilterBounds();f+=this._filterOffsetX=k.x,g+=this._filterOffsetY=k.y,h=Math.ceil(h*e)+k.width,i=Math.ceil(i*e)+k.height,h!=d.width||i!=d.height?(d.width=h,d.height=i):c||j.clearRect(0,0,h+1,i+1),j.save(),j.globalCompositeOperation=c,j.setTransform(e,0,0,e,-f,-g),this.draw(j,!0),this._applyFilters(),j.restore(),this.cacheID=b._nextCacheID++},c.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=this._filterOffsetX=this._filterOffsetY=0,this._cacheScale=1},c.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},c.localToGlobal=function(b,c,d){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(b,c,d||new h.Point)},c.globalToLocal=function(b,c,d){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(b,c,d||new h.Point)},c.localToLocal=function(b,c,d,e){return e=this.localToGlobal(b,c,e),d.globalToLocal(e.x,e.y,e)},c.setTransform=function(b,c,d,e,f,g,h,i,j){return this.x=b||0,this.y=c||0,this.scaleX=null==d?1:d,this.scaleY=null==e?1:e,this.rotation=f||0,this.skewX=g||0,this.skewY=h||0,this.regX=i||0,this.regY=j||0,this},c.getMatrix=function(b){var c=this;b=b&&b.identity()||new h.Matrix2D;return c.transformMatrix?b.copy(c.transformMatrix):b.appendTransform(c.x,c.y,c.scaleX,c.scaleY,c.rotation,c.skewX,c.skewY,c.regX,c.regY)},c.getConcatenatedMatrix=function(b){for(var c=this,b=this.getMatrix(b);c=c.parent;)b.prependMatrix(c.getMatrix(c._props.matrix));return b},c.getConcatenatedDisplayProps=function(b){b=b?b.identity():new h.DisplayProps;var c=this,d=c.getMatrix(b.matrix);do b.prepend(c.visible,c.alpha,c.shadow,c.compositeOperation),c!=this&&d.prependMatrix(c.getMatrix(c._props.matrix));while(c=c.parent);return b},c.hitTest=function(c,d){var e=b._hitTestContext;e.setTransform(1,0,0,1,-c,-d),this.draw(e);c=this._testHit(e);return e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,2,2),c},c.set=function(b){for(var c in b)this[c]=b[c];return this},c.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var b=this.cacheCanvas;if(b){var c=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,b.width/c,b.height/c)}return null},c.getTransformedBounds=function(){return this._getBounds()},c.setBounds=function(b,c,d,e){null==b&&(this._bounds=b),this._bounds=(this._bounds||new h.Rectangle).setValues(b,c,d,e)},c.clone=function(){return this._cloneProps(new b)},c.toString=function(){return"[DisplayObject (name="+this.name+")]"},c._cloneProps=function(b){return b.alpha=this.alpha,b.mouseEnabled=this.mouseEnabled,b.tickEnabled=this.tickEnabled,b.name=this.name,b.regX=this.regX,b.regY=this.regY,b.rotation=this.rotation,b.scaleX=this.scaleX,b.scaleY=this.scaleY,b.shadow=this.shadow,b.skewX=this.skewX,b.skewY=this.skewY,b.visible=this.visible,b.x=this.x,b.y=this.y,b.compositeOperation=this.compositeOperation,b.snapToPixel=this.snapToPixel,b.filters=null==this.filters?null:this.filters.slice(0),b.mask=this.mask,b.hitArea=this.hitArea,b.cursor=this.cursor,b._bounds=this._bounds,b},c._applyShadow=function(b,c){c=c||Shadow.identity,b.shadowColor=c.color,b.shadowOffsetX=c.offsetX,b.shadowOffsetY=c.offsetY,b.shadowBlur=c.blur},c._tick=function(b){var c=this._listeners;c&&c.tick&&(b.target=null,b.propagationStopped=b.immediatePropagationStopped=!1,this.dispatchEvent(b))},c._testHit=function(c){try{var d=c.getImageData(0,0,1,1).data[3]>1}catch(c){if(!b.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return d},c._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var b=this.filters.length,c=this.cacheCanvas.getContext("2d"),d=this.cacheCanvas.width,e=this.cacheCanvas.height,f=0;b>f;f++)this.filters[f].applyFilter(c,0,0,d,e)},c._getFilterBounds=function(){var b,c=this.filters,d=this._rectangle.setValues(0,0,0,0);if(!c||!(b=c.length))return d;for(c=0;b>c;c++){var e=this.filters[c];e.getBounds&&e.getBounds(d)}return d},c._getBounds=function(b,c){return this._transformBounds(this.getBounds(),b,c)},c._transformBounds=function(b,c,d){if(!b)return b;var e=b.x,f=b.y,g=b.width,h=b.height,i=this._props.matrix;i=d?i.identity():this.getMatrix(i),(e||f)&&i.appendTransform(0,0,1,1,0,0,0,-e,-f),c&&i.prependMatrix(c);d=g*i.a;c=g*i.b;g=h*i.c;h=h*i.d;var j=i.tx;i=i.ty;var k=j,l=j,m=i,n=i;return(e=d+j)<k?k=e:e>l&&(l=e),(e=d+g+j)<k?k=e:e>l&&(l=e),(e=g+j)<k?k=e:e>l&&(l=e),(f=c+i)<m?m=f:f>n&&(n=f),(f=c+h+i)<m?m=f:f>n&&(n=f),(f=h+i)<m?m=f:f>n&&(n=f),b.setValues(k,m,l-k,n-m)},c._hasMouseEventListener=function(){for(var c=b._MOUSE_EVENTS,d=0,e=c.length;e>d;d++)if(this.hasEventListener(c[d]))return!0;return!!this.cursor},h.DisplayObject=h.promote(b,"EventDispatcher")})(),h=h||{},(function(){"use strict";function b(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var c=h.extend(b,h.DisplayObject);c.getNumChildren=function(){return this.children.length};try{Object.defineProperties(c,{numChildren:{get:c.getNumChildren}})}catch(b){}c.initialize=b,c.isVisible=function(){var b=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&b)},c.draw=function(b,c){if(this.DisplayObject_draw(b,c))return!0;for(var c=this.children.slice(),d=0,e=c.length;e>d;d++){var f=c[d];f.isVisible()&&(b.save(),f.updateContext(b),f.draw(b),b.restore())}return!0},c.addChild=function(b){if(null==b)return b;var c=arguments.length;if(c>1){for(var d=0;c>d;d++)this.addChild(arguments[d]);return arguments[c-1]}return b.parent&&b.parent.removeChild(b),b.parent=this,this.children.push(b),b.dispatchEvent("added"),b},c.addChildAt=function(b,c){var d=arguments.length,e=arguments[d-1];if(0>e||e>this.children.length)return arguments[d-2];if(d>2){for(var f=0;d-1>f;f++)this.addChildAt(arguments[f],e+f);return arguments[d-2]}return b.parent&&b.parent.removeChild(b),b.parent=this,this.children.splice(c,0,b),b.dispatchEvent("added"),b},c.removeChild=function(b){var c=arguments.length;if(c>1){for(var d=!0,e=0;c>e;e++)d=d&&this.removeChild(arguments[e]);return d}return this.removeChildAt(h.indexOf(this.children,b))},c.removeChildAt=function(b){var c=arguments.length;if(c>1){for(var d=[],e=0;c>e;e++)d[e]=arguments[e];d.sort(function(b,c){return c-b});for(var f=!0,e=0;c>e;e++)f=f&&this.removeChildAt(d[e]);return f}if(0>b||b>this.children.length-1)return!1;var g=this.children[b];return g&&(g.parent=null),this.children.splice(b,1),g.dispatchEvent("removed"),!0},c.removeAllChildren=function(){for(var b=this.children;b.length;)this.removeChildAt(0)},c.getChildAt=function(b){return this.children[b]},c.getChildByName=function(b){for(var c=this.children,d=0,e=c.length;e>d;d++)if(c[d].name==b)return c[d];return null},c.sortChildren=function(b){this.children.sort(b)},c.getChildIndex=function(b){return h.indexOf(this.children,b)},c.swapChildrenAt=function(b,c){var d=this.children,e=d[b],f=d[c];e&&f&&(d[b]=f,d[c]=e)},c.swapChildren=function(b,c){for(var d,e,f=this.children,g=0,h=f.length;h>g&&(f[g]==b&&(d=g),f[g]==c&&(e=g),null==d||null==e);g++);g!=h&&(f[d]=c,f[e]=b)},c.setChildIndex=function(b,c){var d=this.children,e=d.length;if(!(b.parent!=this||0>c||c>=e)){for(var f=0;e>f&&d[f]!=b;f++);f!=e&&f!=c&&(d.splice(f,1),d.splice(c,0,b))}},c.contains=function(b){for(;b;){if(b==this)return!0;b=b.parent}return!1},c.hitTest=function(b,c){return null!=this.getObjectUnderPoint(b,c)},c.getObjectsUnderPoint=function(b,c,d){var e=[];b=this.localToGlobal(b,c);return this._getObjectsUnderPoint(b.x,b.y,e,d>0,1==d),e},c.getObjectUnderPoint=function(b,c,d){b=this.localToGlobal(b,c);return this._getObjectsUnderPoint(b.x,b.y,null,d>0,1==d)},c.getBounds=function(){return this._getBounds(null,!0)},c.getTransformedBounds=function(){return this._getBounds()},c.clone=function(c){var d=this._cloneProps(new b);return c&&this._cloneChildren(d),d},c.toString=function(){return"[Container (name="+this.name+")]"},c._tick=function(b){if(this.tickChildren)for(var c=this.children.length-1;c>=0;c--){var d=this.children[c];d.tickEnabled&&d._tick&&d._tick(b)}this.DisplayObject__tick(b)},c._cloneChildren=function(b){b.children.length&&b.removeAllChildren();for(var c=b.children,d=0,e=this.children.length;e>d;d++){var f=this.children[d].clone(!0);f.parent=b,c.push(f)}},c._getObjectsUnderPoint=function(c,d,e,f,g,i){if(i=i||0,!i&&!this._testMask(this,c,d))return null;var j,k=h.DisplayObject._hitTestContext;g=g||f&&this._hasMouseEventListener();for(var l=this.children,m=l.length,m=m-1;m>=0;m--){var n=l[m],o=n.hitArea;if(n.visible&&(o||n.isVisible())&&(!f||n.mouseEnabled)&&(o||this._testMask(n,c,d)))if(!o&&n instanceof b){var a=n._getObjectsUnderPoint(c,d,e,f,g,i+1);if(!e&&a)return f&&!this.mouseChildren?this:a}else{if(f&&!g&&!n._hasMouseEventListener())continue;a=n.getConcatenatedDisplayProps(n._props);if(j=a.matrix,o&&(j.appendMatrix(o.getMatrix(o._props.matrix)),a.alpha=o.alpha),k.globalAlpha=a.alpha,k.setTransform(j.a,j.b,j.c,j.d,j.tx-c,j.ty-d),(o||n).draw(k),!this._testHit(k))continue;if(k.setTransform(1,0,0,1,0,0),k.clearRect(0,0,2,2),!e)return f&&!this.mouseChildren?this:n;e.push(n)}}return null},c._testMask=function(b,c,d){var e=b.mask;if(!e||!e.graphics||e.graphics.isEmpty())return!0;var f=this._props.matrix;b=b.parent;f=b?b.getConcatenatedMatrix(f):f.identity(),f=e.getMatrix(e._props.matrix).prependMatrix(f);b=h.DisplayObject._hitTestContext;return b.setTransform(f.a,f.b,f.c,f.d,f.tx-c,f.ty-d),e.graphics.drawAsPath(b),b.fillStyle="#000",b.fill(),this._testHit(b)?(b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,2,2),!0):!1},c._getBounds=function(b,c){var d=this.DisplayObject_getBounds();if(d)return this._transformBounds(d,b,c);var e=this._props.matrix;e=c?e.identity():this.getMatrix(e),b&&e.prependMatrix(b);for(var c=this.children.length,b=null,f=0;c>f;f++){var g=this.children[f];g.visible&&(d=g._getBounds(e))&&(b?b.extend(d.x,d.y,d.width,d.height):b=d.clone())}return b},h.Container=h.promote(b,"DisplayObject")})(),h=h||{},(function(){"use strict";function b(b){this.Container_constructor(),this.autoClear=!0,this.canvas="string"==typeof b?document.getElementById(b):b,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var c=h.extend(b,h.Container);c._get_nextStage=function(){return this._nextStage},c._set_nextStage=function(b){this._nextStage&&(this._nextStage._prevStage=null),b&&(b._prevStage=this),this._nextStage=b};try{Object.defineProperties(c,{nextStage:{get:c._get_nextStage,set:c._set_nextStage}})}catch(b){}c.update=function(b){if(this.canvas&&(this.tickOnUpdate&&this.tick(b),this.dispatchEvent("drawstart",!1,!0)!==!1)){h.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;b=this.drawRect;var c=this.canvas.getContext("2d");c.setTransform(1,0,0,1,0,0),this.autoClear&&(b?c.clearRect(b.x,b.y,b.width,b.height):c.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),c.save(),this.drawRect&&(c.beginPath(),c.rect(b.x,b.y,b.width,b.height),c.clip()),this.updateContext(c),this.draw(c,!1),c.restore(),this.dispatchEvent("drawend")}},c.tick=function(b){if(this.tickEnabled&&this.dispatchEvent("tickstart",!1,!0)!==!1){var c=new h.Event("tick");if(b)for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);this._tick(c),this.dispatchEvent("tickend")}},c.handleEvent=function(b){"tick"==b.type&&this.update(b)},c.clear=function(){if(this.canvas){var b=this.canvas.getContext("2d");b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},c.toDataURL=function(b,c){var d,e=this.canvas.getContext("2d"),f=this.canvas.width,g=this.canvas.height;if(b){d=e.getImageData(0,0,f,g);var h=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.fillStyle=b,e.fillRect(0,0,f,g)}f=this.canvas.toDataURL(c||"image/png");return b&&(e.putImageData(d,0,0),e.globalCompositeOperation=h),f},c.enableMouseOver=function(b){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==b&&this._testMouseOver(!0)),null==b)b=20;else if(0>=b)return;var c=this;this._mouseOverIntervalID=setInterval(function(){c._testMouseOver()},1e3/Math.min(50,b))},c.enableDOMEvents=function(b){null==b&&(b=!0);var c,d,e=this._eventListeners;if(!b&&e){for(c in e)d=e[c],d.t.removeEventListener(c,d.f,!1);this._eventListeners=null}else if(b&&!e&&this.canvas){b=window.addEventListener?window:document;var f=this;e=this._eventListeners={},e.mouseup={t:b,f:function(b){f._handleMouseUp(b)}},e.mousemove={t:b,f:function(b){f._handleMouseMove(b)}},e.dblclick={t:this.canvas,f:function(b){f._handleDoubleClick(b)}},e.mousedown={t:this.canvas,f:function(b){f._handleMouseDown(b)}};for(c in e)d=e[c],d.t.addEventListener(c,d.f,!1)}},c.clone=function(){throw"Stage cannot be cloned."},c.toString=function(){return"[Stage (name="+this.name+")]"},c._getElementRect=function(b){var c;try{c=b.getBoundingClientRect()}catch(d){c={top:b.offsetTop,left:b.offsetLeft,width:b.offsetWidth,height:b.offsetHeight}}var d=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),e=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0);b=window.getComputedStyle?getComputedStyle(b,null):b.currentStyle;var f=parseInt(b.paddingLeft)+parseInt(b.borderLeftWidth),g=parseInt(b.paddingTop)+parseInt(b.borderTopWidth),h=parseInt(b.paddingRight)+parseInt(b.borderRightWidth);b=parseInt(b.paddingBottom)+parseInt(b.borderBottomWidth);return{left:c.left+d+f,right:c.right+d-h,top:c.top+e+g,bottom:c.bottom+e-b}},c._getPointerData=function(b){var c=this._pointerData[b];return c||(c=this._pointerData[b]={x:0,y:0}),c},c._handleMouseMove=function(b){b||(b=window.event),this._handlePointerMove(-1,b,b.pageX,b.pageY)},c._handlePointerMove=function(b,c,d,e,f){if((!this._prevStage||void 0!==f)&&this.canvas){f=this._nextStage;var g=this._getPointerData(b),h=g.inBounds;this._updatePointerPosition(b,c,d,e),(h||g.inBounds||this.mouseMoveOutside)&&(-1===b&&g.inBounds==!h&&this._dispatchMouseEvent(this,h?"mouseleave":"mouseenter",!1,b,g,c),this._dispatchMouseEvent(this,"stagemousemove",!1,b,g,c),this._dispatchMouseEvent(g.target,"pressmove",!0,b,g,c)),f&&f._handlePointerMove(b,c,d,e,null)}},c._updatePointerPosition=function(b,c,d,e){var f=this._getElementRect(this.canvas);d-=f.left,e-=f.top;var g=this.canvas.width,h=this.canvas.height;d/=(f.right-f.left)/g,e/=(f.bottom-f.top)/h;f=this._getPointerData(b);(f.inBounds=d>=0&&e>=0&&g-1>=d&&h-1>=e)?(f.x=d,f.y=e):this.mouseMoveOutside&&(f.x=0>d?0:d>g-1?g-1:d,f.y=0>e?0:e>h-1?h-1:e),f.posEvtObj=c,f.rawX=d,f.rawY=e,(b===this._primaryPointerID||-1===b)&&(this.mouseX=f.x,this.mouseY=f.y,this.mouseInBounds=f.inBounds)},c._handleMouseUp=function(b){this._handlePointerUp(-1,b,!1)},c._handlePointerUp=function(b,c,d,e){var f=this._nextStage,g=this._getPointerData(b);if(!this._prevStage||void 0!==e){var h=null,i=g.target;e||!i&&!f||(h=this._getObjectsUnderPoint(g.x,g.y,null,!0)),g.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,b,g,c,h),g.down=!1),h==i&&this._dispatchMouseEvent(i,"click",!0,b,g,c),this._dispatchMouseEvent(i,"pressup",!0,b,g,c),d?(b==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[b]):g.target=null,f&&f._handlePointerUp(b,c,d,e||h&&this)}},c._handleMouseDown=function(b){this._handlePointerDown(-1,b,b.pageX,b.pageY)},c._handlePointerDown=function(b,c,d,e,f){this.preventSelection&&c.preventDefault(),(null==this._primaryPointerID||-1===b)&&(this._primaryPointerID=b),null!=e&&this._updatePointerPosition(b,c,d,e);var g=null,h=this._nextStage,i=this._getPointerData(b);f||(g=i.target=this._getObjectsUnderPoint(i.x,i.y,null,!0)),i.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,b,i,c,g),i.down=!0),this._dispatchMouseEvent(g,"mousedown",!0,b,i,c),h&&h._handlePointerDown(b,c,d,e,f||g&&this)},c._testMouseOver=function(b,c,d){if(!this._prevStage||void 0!==c){var e=this._nextStage;if(!this._mouseOverIntervalID)return void (e&&e._testMouseOver(b,c,d));var f=this._getPointerData(-1);if(f&&(b||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var g,h=f.posEvtObj,i=d||h&&h.target==this.canvas,j=null,k=-1,l="";!c&&(b||this.mouseInBounds&&i)&&(j=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var m=this._mouseOverTarget||[],n=m[m.length-1],o=this._mouseOverTarget=[];for(g=j;g;)o.unshift(g),l||(l=g.cursor),g=g.parent;for(this.canvas.style.cursor=l,!c&&d&&(d.canvas.style.cursor=l),g=0,l=o.length;l>g&&o[g]==m[g];g++)k=g;for(n!=j&&this._dispatchMouseEvent(n,"mouseout",!0,-1,f,h,j),g=m.length-1;g>k;g--)this._dispatchMouseEvent(m[g],"rollout",!1,-1,f,h,j);for(g=o.length-1;g>k;g--)this._dispatchMouseEvent(o[g],"rollover",!1,-1,f,h,n);n!=j&&this._dispatchMouseEvent(j,"mouseover",!0,-1,f,h,n),e&&e._testMouseOver(b,c||j&&this,d||i&&this)}}},c._handleDoubleClick=function(b,c){var d=null,e=this._nextStage,f=this._getPointerData(-1);c||(d=this._getObjectsUnderPoint(f.x,f.y,null,!0),this._dispatchMouseEvent(d,"dblclick",!0,-1,f,b)),e&&e._handleDoubleClick(b,c||d&&this)},c._dispatchMouseEvent=function(b,c,d,e,f,g,i){if(b&&(d||b.hasEventListener(c))){c=new h.MouseEvent(c,d,!1,f.x,f.y,g,e,e===this._primaryPointerID||-1===e,f.rawX,f.rawY,i);b.dispatchEvent(c)}},h.Stage=h.promote(b,"Container")})(),h=h||{},(function(){function b(b){this.DisplayObject_constructor(),"string"==typeof b?(this.image=document.createElement("img"),this.image.src=b):this.image=b,this.sourceRect=null}var c=h.extend(b,h.DisplayObject);c.initialize=b,c.isVisible=function(){var b=this.image;b=this.cacheCanvas||b&&(b.naturalWidth||b.getContext||b.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&b)},c.draw=function(b,c){if(this.DisplayObject_draw(b,c)||!this.image)return!0;c=this.image;var d=this.sourceRect;if(d){var e=d.x,f=d.y,g=e+d.width;d=f+d.height;var h=0,i=0,j=c.width,k=c.height;0>e&&(h-=e,e=0),g>j&&(g=j),0>f&&(i-=f,f=0),d>k&&(d=k),b.drawImage(c,e,f,g-e,d-f,h,i,g-e,d-f)}else b.drawImage(c,0,0);return!0},c.getBounds=function(){var b=this.DisplayObject_getBounds();if(b)return b;b=this.image;var c=this.sourceRect||b;b=b&&(b.naturalWidth||b.getContext||b.readyState>=2);return b?this._rectangle.setValues(0,0,c.width,c.height):null},c.clone=function(){var c=new b(this.image);return this.sourceRect&&(c.sourceRect=this.sourceRect.clone()),this._cloneProps(c),c},c.toString=function(){return"[Bitmap (name="+this.name+")]"},h.Bitmap=h.promote(b,"DisplayObject")})(),h=h||{},(function(){"use strict";function b(b,c){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=b,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,null!=c&&this.gotoAndPlay(c)}var c=h.extend(b,h.DisplayObject);c.initialize=b,c.isVisible=function(){var b=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&b)},c.draw=function(b,c){if(this.DisplayObject_draw(b,c))return!0;this._normalizeFrame();c=this.spriteSheet.getFrame(0|this._currentFrame);if(!c)return!1;var d=c.rect;return d.width&&d.height&&b.drawImage(c.image,d.x,d.y,d.width,d.height,-c.regX,-c.regY,d.width,d.height),!0},c.play=function(){this.paused=!1},c.stop=function(){this.paused=!0},c.gotoAndPlay=function(b){this.paused=!1,this._skipAdvance=!0,this._goto(b)},c.gotoAndStop=function(b){this.paused=!0,this._goto(b)},c.advance=function(b){var c=this.framerate||this.spriteSheet.framerate;b=c&&null!=b?b/(1e3/c):1;this._normalizeFrame(b)},c.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},c.clone=function(){return this._cloneProps(new b(this.spriteSheet))},c.toString=function(){return"[Sprite (name="+this.name+")]"},c._cloneProps=function(b){return this.DisplayObject__cloneProps(b),b.currentFrame=this.currentFrame,b.currentAnimation=this.currentAnimation,b.paused=this.paused,b.currentAnimationFrame=this.currentAnimationFrame,b.framerate=this.framerate,b._animation=this._animation,b._currentFrame=this._currentFrame,b._skipAdvance=this._skipAdvance,b},c._tick=function(b){this.paused||(this._skipAdvance||this.advance(b&&b.delta),this._skipAdvance=!1),this.DisplayObject__tick(b)},c._normalizeFrame=function(b){b=b||0;var c,d=this._animation,e=this.paused,f=this._currentFrame;if(d){var g=d.speed||1,h=this.currentAnimationFrame;if(c=d.frames.length,h+b*g>=c){var i=d.next;if(this._dispatchAnimationEnd(d,f,e,i,c-1))return;if(i)return this._goto(i,b-(c-h)/g);this.paused=!0,h=d.frames.length-1}else h+=b*g;this.currentAnimationFrame=h,this._currentFrame=d.frames[0|h]}else if(f=this._currentFrame+=b,c=this.spriteSheet.getNumFrames(),f>=c&&c>0&&!this._dispatchAnimationEnd(d,f,e,c-1)&&(this._currentFrame-=c)>=c)return this._normalizeFrame();f=0|this._currentFrame,this.currentFrame!=f&&(this.currentFrame=f,this.dispatchEvent("change"))},c._dispatchAnimationEnd=function(b,c,d,e,f){var g=b?b.name:null;if(this.hasEventListener("animationend")){var i=new h.Event("animationend");i.name=g,i.next=e,this.dispatchEvent(i)}g=this._animation!=b||this._currentFrame!=c;return g||d||!this.paused||(this.currentAnimationFrame=f,g=!0),g},c._goto=function(b,c){if(this.currentAnimationFrame=0,isNaN(b)){var d=this.spriteSheet.getAnimation(b);d&&(this._animation=d,this.currentAnimation=b,this._normalizeFrame(c))}else this.currentAnimation=this._animation=null,this._currentFrame=b,this._normalizeFrame()},h.Sprite=h.promote(b,"DisplayObject")})(),h=h||{},(function(){"use strict";function b(b){this.DisplayObject_constructor(),this.graphics=b?b:new h.Graphics}var c=h.extend(b,h.DisplayObject);c.isVisible=function(){var b=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&b)},c.draw=function(b,c){return this.DisplayObject_draw(b,c)?!0:(this.graphics.draw(b,this),!0)},c.clone=function(c){c=c&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new b(c))},c.toString=function(){return"[Shape (name="+this.name+")]"},h.Shape=h.promote(b,"DisplayObject")})(),h=h||{},(function(){"use strict";function b(b,c,d){this.DisplayObject_constructor(),this.text=b,this.font=c,this.color=d,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var c=h.extend(b,h.DisplayObject),d=h.createCanvas?h.createCanvas():document.createElement("canvas");d.getContext&&(b._workingContext=d.getContext("2d"),d.width=d.height=1),b.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},b.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},c.isVisible=function(){var b=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&b)},c.draw=function(b,c){if(this.DisplayObject_draw(b,c))return!0;c=this.color||"#000";return this.outline?(b.strokeStyle=c,b.lineWidth=1*this.outline):b.fillStyle=c,this._drawText(this._prepContext(b)),!0},c.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},c.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},c.getMeasuredHeight=function(){return this._drawText(null,{}).height},c.getBounds=function(){var c=this.DisplayObject_getBounds();if(c)return c;if(null==this.text||""===this.text)return null;c=this._drawText(null,{});var d=this.maxWidth&&this.maxWidth<c.width?this.maxWidth:c.width,e=d*b.H_OFFSETS[this.textAlign||"left"],f=this.lineHeight||this.getMeasuredLineHeight();f=f*b.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(e,f,d,c.height)},c.getMetrics=function(){var c={lines:[]};return c.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),c.vOffset=c.lineHeight*b.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,c,c.lines)},c.clone=function(){return this._cloneProps(new b(this.text,this.font,this.color))},c.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},c._cloneProps=function(b){return this.DisplayObject__cloneProps(b),b.textAlign=this.textAlign,b.textBaseline=this.textBaseline,b.maxWidth=this.maxWidth,b.outline=this.outline,b.lineHeight=this.lineHeight,b.lineWidth=this.lineWidth,b},c._prepContext=function(b){return b.font=this.font||"10px sans-serif",b.textAlign=this.textAlign||"left",b.textBaseline=this.textBaseline||"top",b},c._drawText=function(c,d,e){var f=!!c;f||(c=b._workingContext,c.save(),this._prepContext(c));for(var g=this.lineHeight||this.getMeasuredLineHeight(),h=0,i=0,j=String(this.text).split(/(?:\r\n|\r|\n)/),k=0,l=j.length;l>k;k++){var m=j[k],n=null;if(null!=this.lineWidth&&(n=c.measureText(m).width)>this.lineWidth){var o=m.split(/(\s)/);m=o[0],n=c.measureText(m).width;for(var a=1,p=o.length;p>a;a+=2){var q=c.measureText(o[a]+o[a+1]).width;n+q>this.lineWidth?(f&&this._drawTextLine(c,m,i*g),e&&e.push(m),n>h&&(h=n),m=o[a+1],n=c.measureText(m).width,i++):(m+=o[a]+o[a+1],n+=q)}}f&&this._drawTextLine(c,m,i*g),e&&e.push(m),d&&null==n&&(n=c.measureText(m).width),n>h&&(h=n),i++}return d&&(d.width=h,d.height=i*g),f||c.restore(),d},c._drawTextLine=function(b,c,d){this.outline?b.strokeText(c,0,d,this.maxWidth||65535):b.fillText(c,0,d,this.maxWidth||65535)},c._getMeasuredWidth=function(c){var d=b._workingContext;d.save();c=this._prepContext(d).measureText(c).width;return d.restore(),c},h.Text=h.promote(b,"DisplayObject")})(),h=h||{},(function(){"use strict";function b(b,c){this.Container_constructor(),this.text=b||"",this.spriteSheet=c,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0}}var c=h.extend(b,h.Container);b.maxPoolSize=100,b._spritePool=[],c.draw=function(b,c){this.DisplayObject_draw(b,c)||(this._updateText(),this.Container_draw(b,c))},c.getBounds=function(){return this._updateText(),this.Container_getBounds()},c.isVisible=function(){var b=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&b)},c.clone=function(){return this._cloneProps(new b(this.text,this.spriteSheet))},c.addChild=c.addChildAt=c.removeChild=c.removeChildAt=c.removeAllChildren=function(){},c._cloneProps=function(b){return this.Container__cloneProps(b),b.lineHeight=this.lineHeight,b.letterSpacing=this.letterSpacing,b.spaceWidth=this.spaceWidth,b},c._getFrameIndex=function(b,c){var d,e=c.getAnimation(b);return e||(b!=(d=b.toUpperCase())||b!=(d=b.toLowerCase())||(d=null),d&&(e=c.getAnimation(d))),e&&e.frames[0]},c._getFrame=function(b,c){b=this._getFrameIndex(b,c);return null==b?b:c.getFrame(b)},c._getLineHeight=function(b){b=this._getFrame("1",b)||this._getFrame("T",b)||this._getFrame("L",b)||b.getFrame(0);return b?b.rect.height:1},c._getSpaceWidth=function(b){b=this._getFrame("1",b)||this._getFrame("l",b)||this._getFrame("e",b)||this._getFrame("a",b)||b.getFrame(0);return b?b.rect.width:1},c._updateText=function(){var c,d=0,e=0,f=this._oldProps,g=!1,i=this.spaceWidth,j=this.lineHeight,k=this.spriteSheet,l=b._spritePool,m=this.children,n=0,o=m.length;for(var a in f)f[a]!=this[a]&&(f[a]=this[a],g=!0);if(g){f=!!this._getFrame(" ",k);f||i||(i=this._getSpaceWidth(k)),j||(j=this._getLineHeight(k));for(a=0,g=this.text.length;g>a;a++){var p=this.text.charAt(a);if(" "!=p||f)if("\n"!=p&&"\r"!=p){var q=this._getFrameIndex(p,k);null!=q&&(o>n?c=m[n]:(m.push(c=l.length?l.pop():new h.Sprite),c.parent=this,o++),c.spriteSheet=k,c.gotoAndStop(q),c.x=d,c.y=e,n++,d+=c.getBounds().width+this.letterSpacing)}else"\r"==p&&"\n"==this.text.charAt(a+1)&&a++,d=0,e+=j;else d+=i}for(;o>n;)l.push(c=m.pop()),c.parent=null,o--;l.length>b.maxPoolSize&&(l.length=b.maxPoolSize)}},h.BitmapText=h.promote(b,"Container")})(),h=h||{},(function(){"use strict";function b(c,d,e,f){this.Container_constructor(),!b.inited&&b.init(),this.mode=c||b.INDEPENDENT,this.startPosition=d||0,this.loop=e,this.currentFrame=0,this.timeline=new h.Timeline(null,f,{paused:!0,position:d,useTicks:!0}),this.paused=!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||null,this.framerate=null,this._synchOffset=0,this._prevPos=-1,this._prevPosition=0,this._t=0,this._managed={}}function c(){throw"MovieClipPlugin cannot be instantiated."}var d=h.extend(b,h.Container);b.INDEPENDENT="independent",b.SINGLE_FRAME="single",b.SYNCHED="synched",b.inited=!1,b.init=function(){b.inited||(c.install(),b.inited=!0)},d.getLabels=function(){return this.timeline.getLabels()},d.getCurrentLabel=function(){return this._updateTimeline(),this.timeline.getCurrentLabel()},d.getDuration=function(){return this.timeline.duration};try{Object.defineProperties(d,{labels:{get:d.getLabels},currentLabel:{get:d.getCurrentLabel},totalFrames:{get:d.getDuration},duration:{get:d.getDuration}})}catch(b){}d.initialize=b,d.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},d.draw=function(b,c){return this.DisplayObject_draw(b,c)?!0:(this._updateTimeline(),this.Container_draw(b,c),!0)},d.play=function(){this.paused=!1},d.stop=function(){this.paused=!0},d.gotoAndPlay=function(b){this.paused=!1,this._goto(b)},d.gotoAndStop=function(b){this.paused=!0,this._goto(b)},d.advance=function(c){var d=b.INDEPENDENT;if(this.mode==d){for(var e=this,f=e.framerate;(e=e.parent)&&null==f;)e.mode==d&&(f=e._framerate);this._framerate=f;d=null!=f&&-1!=f&&null!=c?c/(1e3/f)+this._t:1;e=0|d;for(this._t=d-e;!this.paused&&e--;)this._prevPosition=this._prevPos<0?0:this._prevPosition+1,this._updateTimeline()}},d.clone=function(){throw"MovieClip cannot be cloned."},d.toString=function(){return"[MovieClip (name="+this.name+")]"},d._tick=function(b){this.advance(b&&b.delta),this.Container__tick(b)},d._goto=function(b){b=this.timeline.resolve(b);null!=b&&(-1==this._prevPos&&(this._prevPos=0/0),this._prevPosition=b,this._t=0,this._updateTimeline())},d._reset=function(){this._prevPos=-1,this._t=this.currentFrame=0,this.paused=!1},d._updateTimeline=function(){var c=this.timeline,d=this.mode!=b.INDEPENDENT;c.loop=null==this.loop?!0:this.loop;var e=d?this.startPosition+(this.mode==b.SINGLE_FRAME?0:this._synchOffset):this._prevPos<0?0:this._prevPosition;d=d||!this.actionsEnabled?h.Tween.NONE:null;if(this.currentFrame=c._calcPosition(e),c.setPosition(e,d),this._prevPosition=c._prevPosition,this._prevPos!=c._prevPos){this.currentFrame=this._prevPos=c._prevPos;for(e in this._managed)this._managed[e]=1;for(d=c._tweens,e=0,c=d.length;c>e;e++){var f=d[e],g=f._target;if(g!=this&&!f.passive){f=f._stepPosition;g instanceof h.DisplayObject?this._addManagedChild(g,f):this._setState(g.state,f)}}g=this.children;for(e=g.length-1;e>=0;e--){f=g[e].id;1==this._managed[f]&&(this.removeChildAt(e),delete this._managed[f])}}},d._setState=function(b,c){if(b)for(var d=b.length-1;d>=0;d--){var e=b[d],f=e.t;e=e.p;for(var g in e)f[g]=e[g];this._addManagedChild(f,c)}},d._addManagedChild=function(c,d){c._off||(this.addChildAt(c,0),c instanceof b&&(c._synchOffset=d,c.mode==b.INDEPENDENT&&c.autoReset&&!this._managed[c.id]&&c._reset()),this._managed[c.id]=2)},d._getBounds=function(b,c){var d=this.DisplayObject_getBounds();return d||(this._updateTimeline(),this.frameBounds&&(d=this._rectangle.copy(this.frameBounds[this.currentFrame]))),d?this._transformBounds(d,b,c):this.Container__getBounds(b,c)},h.MovieClip=h.promote(b,"Container"),c.priority=100,c.install=function(){h.Tween.installPlugin(c,["startPosition"])},c.init=function(b,c,d){return d},c.step=function(){},c.tween=function(c,d,e,f,g,h){return c.target instanceof b?1==h?g[d]:f[d]:e}})(),h=h||{},(function(){"use strict";function b(){throw"SpriteSheetUtils cannot be instantiated"}var c=h.createCanvas?h.createCanvas():document.createElement("canvas");c.getContext&&(b._workingCanvas=c,b._workingContext=c.getContext("2d"),c.width=c.height=1),b.addFlippedFrames=function(c,d,e,f){if(d||e||f){var g=0;d&&b._flip(c,++g,!0,!1),e&&b._flip(c,++g,!1,!0),f&&b._flip(c,++g,!0,!0)}},b.extractFrame=function(c,d){isNaN(d)&&(d=c.getAnimation(d).frames[0]);c=c.getFrame(d);if(!c)return null;d=c.rect;var e=b._workingCanvas;e.width=d.width,e.height=d.height,b._workingContext.drawImage(c.image,d.x,d.y,d.width,d.height,0,0,d.width,d.height);c=document.createElement("img");return c.src=e.toDataURL("image/png"),c},b.mergeAlpha=function(b,c,d){d||(d=h.createCanvas?h.createCanvas():document.createElement("canvas")),d.width=Math.max(c.width,b.width),d.height=Math.max(c.height,b.height);var e=d.getContext("2d");return e.save(),e.drawImage(b,0,0),e.globalCompositeOperation="destination-in",e.drawImage(c,0,0),e.restore(),d},b._flip=function(c,d,e,f){for(var g=c._images,h=b._workingCanvas,i=b._workingContext,j=g.length/d,k=0;j>k;k++){var l=g[k];l.__tmp=k,i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,h.width+1,h.height+1),h.width=l.width,h.height=l.height,i.setTransform(e?-1:1,0,0,f?-1:1,e?l.width:0,f?l.height:0),i.drawImage(l,0,0);var m=document.createElement("img");m.src=h.toDataURL("image/png"),m.width=l.width,m.height=l.height,g.push(m)}h=c._frames;i=h.length/d;for(k=0;i>k;k++){l=h[k];var n=l.rect.clone();m=g[l.image.__tmp+j*d];var o={image:m,rect:n,regX:l.regX,regY:l.regY};e&&(n.x=m.width-n.x-n.width,o.regX=n.width-l.regX),f&&(n.y=m.height-n.y-n.height,o.regY=n.height-l.regY),h.push(o)}m="_"+(e?"h":"")+(f?"v":"");n=c._animations;o=c._data;g=n.length/d;for(k=0;g>k;k++){j=n[k];l=o[j];e={name:j+m,speed:l.speed,next:l.next,frames:[]};l.next&&(e.next+=m),h=l.frames;for(f=0,c=h.length;c>f;f++)e.frames.push(h[f]+i*d);o[e.name]=e,n.push(e.name)}},h.SpriteSheetUtils=b})(),h=h||{},(function(){"use strict";function b(b){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=b||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var c=h.extend(b,h.EventDispatcher);b.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",b.ERR_RUNNING="a build is already running",c.addFrame=function(c,d,e,f,g){if(this._data)throw b.ERR_RUNNING;d=d||c.bounds||c.nominalBounds;return!d&&c.getBounds&&(d=c.getBounds()),d?(e=e||1,this._frames.push({source:c,sourceRect:d,scale:e,funct:f,data:g,index:this._frames.length,height:d.height*e})-1):null},c.addAnimation=function(c,d,e,f){if(this._data)throw b.ERR_RUNNING;this._animations[c]={frames:d,next:e,speed:f}},c.addMovieClip=function(c,d,e,f,g,h){if(this._data)throw b.ERR_RUNNING;var i=c.frameBounds;d=d||c.bounds||c.nominalBounds;if(!d&&c.getBounds&&(d=c.getBounds()),d||i){var j,k=this._frames.length,l=c.timeline.duration;for(j=0;l>j;j++){var m=i&&i[j]?i[j]:d;this.addFrame(c,m,e,this._setupMovieClipFrame,{i:j,f:f,d:g})}m=c.timeline._labels;e=[];for(f in m)e.push({index:m[f],label:f});if(e.length)for(e.sort(function(b,c){return b.index-c.index}),j=0,g=e.length;g>j;j++){for(var i=e[j].label,d=k+e[j].index,m=k+(j==g-1?l:e[j+1].index),f=[],n=d;m>n;n++)f.push(n);(!h||(i=h(i,c,d,m)))&&this.addAnimation(i,f,!0)}}},c.build=function(){if(this._data)throw b.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},c.buildAsync=function(c){if(this._data)throw b.ERR_RUNNING;this.timeSlice=c,this._startBuild();var d=this;this._timerID=setTimeout(function(){d._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},c.stopAsync=function(){clearTimeout(this._timerID),this._data=null},c.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},c.toString=function(){return"[SpriteSheetBuilder]"},c._startBuild=function(){var c=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var d=[];this._data={images:[],frames:d,framerate:this.framerate,animations:this._animations};var e=this._frames.slice();if(e.sort(function(b,c){return b.height<=c.height?-1:1}),e[e.length-1].height+2*c>this.maxHeight)throw b.ERR_DIMENSIONS;for(var f=0,g=0,i=0;e.length;){var j=this._fillRow(e,f,i,d,c);if(j.w>g&&(g=j.w),f+=j.h,!j.h||!e.length){var k=h.createCanvas?h.createCanvas():document.createElement("canvas");k.width=this._getSize(g,this.maxWidth),k.height=this._getSize(f,this.maxHeight),this._data.images[i]=k,j.h||(g=f=0,i++)}}},c._setupMovieClipFrame=function(b,c){var d=b.actionsEnabled;b.actionsEnabled=!1,b.gotoAndStop(c.i),b.actionsEnabled=d,c.f&&c.f(b,c.d,c.i)},c._getSize=function(b,c){for(var d=4;Math.pow(2,++d)<b;);return Math.min(c,Math.pow(2,d))},c._fillRow=function(c,d,e,f,g){var i=this.maxWidth,j=this.maxHeight;d+=g;for(var j=j-d,k=g,l=0,m=c.length-1;m>=0;m--){var n=c[m],o=this._scale*n.scale,a=n.sourceRect,p=n.source,q=Math.floor(o*a.x-g),r=Math.floor(o*a.y-g),s=Math.ceil(o*a.height+2*g);a=Math.ceil(o*a.width+2*g);if(a>i)throw b.ERR_DIMENSIONS;s>j||k+a>i||(n.img=e,n.rect=new h.Rectangle(k,d,a,s),l=l||s,c.splice(m,1),f[n.index]=[k,d,a,s,e,Math.round(-q+o*p.regX-g),Math.round(-r+o*p.regY-g)],k+=a)}return{w:k,h:l}},c._endBuild=function(){this.spriteSheet=new h.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},c._run=function(){for(var b=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),c=(new Date).getTime()+b,d=!1;c>(new Date).getTime();)if(!this._drawNext()){d=!0;break}if(d)this._endBuild();else{var e=this;this._timerID=setTimeout(function(){e._run()},50-b)}c=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){d=new h.Event("progress");d.progress=c,this.dispatchEvent(d)}},c._drawNext=function(){var b=this._frames[this._index],c=b.scale*this._scale,d=b.rect,e=b.sourceRect,f=this._data.images[b.img];f=f.getContext("2d");return b.funct&&b.funct(b.source,b.data),f.save(),f.beginPath(),f.rect(d.x,d.y,d.width,d.height),f.clip(),f.translate(Math.ceil(d.x-e.x*c),Math.ceil(d.y-e.y*c)),f.scale(c,c),b.source.draw(f),f.restore(),++this._index<this._frames.length},h.SpriteSheetBuilder=h.promote(b,"EventDispatcher")})(),h=h||{},(function(){"use strict";function b(b){this.DisplayObject_constructor(),"string"==typeof b&&(b=document.getElementById(b)),this.mouseEnabled=!1;var c=b.style;c.position="absolute",c.transformOrigin=c.WebkitTransformOrigin=c.msTransformOrigin=c.MozTransformOrigin=c.OTransformOrigin="0% 0%",this.htmlElement=b,this._oldProps=null}var c=h.extend(b,h.DisplayObject);c.isVisible=function(){return null!=this.htmlElement},c.draw=function(){return!0},c.cache=function(){},c.uncache=function(){},c.updateCache=function(){},c.hitTest=function(){},c.localToGlobal=function(){},c.globalToLocal=function(){},c.localToLocal=function(){},c.clone=function(){throw"DOMElement cannot be cloned."},c.toString=function(){return"[DOMElement (name="+this.name+")]"},c._tick=function(b){var c=this.getStage();c&&c.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(b)},c._handleDrawEnd=function(){var b=this.htmlElement;if(b){b=b.style;var c=this.getConcatenatedDisplayProps(this._props),d=c.matrix,e=c.visible?"visible":"hidden";if(e!=b.visibility&&(b.visibility=e),c.visible){e=this._oldProps;var f=e&&e.matrix,g=1e4;if(!f||!f.equals(d)){f="matrix("+(d.a*g|0)/g+","+(d.b*g|0)/g+","+(d.c*g|0)/g+","+(d.d*g|0)/g+","+(d.tx+.5|0);b.transform=b.WebkitTransform=b.OTransform=b.msTransform=f+","+(d.ty+.5|0)+")",b.MozTransform=f+"px,"+(d.ty+.5|0)+"px)",e||(e=this._oldProps=new h.DisplayProps(!0,0/0)),e.matrix.copy(d)}e.alpha!=c.alpha&&(b.opacity=""+(c.alpha*g|0)/g,e.alpha=c.alpha)}}},h.DOMElement=h.promote(b,"DisplayObject")})(),h=h||{},(function(){"use strict";function b(){}var c=b.prototype;c.getBounds=function(b){return b},c.applyFilter=function(b,c,d,e,f,g,h,i){g=g||b,null==h&&(h=c),null==i&&(i=d);try{var j=b.getImageData(c,d,e,f)}catch(b){return!1}return this._applyFilter(j)?(g.putImageData(j,h,i),!0):!1},c.toString=function(){return"[Filter]"},c.clone=function(){return new b},c._applyFilter=function(){return!0},h.Filter=b})(),h=h||{},(function(){"use strict";function b(b,c,d){(isNaN(b)||0>b)&&(b=0),(isNaN(c)||0>c)&&(c=0),(isNaN(d)||1>d)&&(d=1),this.blurX=0|b,this.blurY=0|c,this.quality=0|d}var c=h.extend(b,h.Filter);b.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],b.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],c.getBounds=function(b){var c=0|this.blurX,d=0|this.blurY;if(0>=c&&0>=d)return b;var e=Math.pow(this.quality,.2);return(b||new h.Rectangle).pad(c*e+1,d*e+1,c*e+1,d*e+1)},c.clone=function(){return new b(this.blurX,this.blurY,this.quality)},c.toString=function(){return"[BlurFilter]"},c._applyFilter=function(c){var d=this.blurX>>1;if(isNaN(d)||0>d)return!1;var e=this.blurY>>1;if(isNaN(e)||0>e)return!1;if(0==d&&0==e)return!1;var f=this.quality;(isNaN(f)||1>f)&&(f=1),f|=0,f>3&&(f=3),1>f&&(f=1);var g=c.data,h,i,j,k,l,m,n,o,a,p,q,r,s,t=d+d+1|0,u=e+e+1|0,v=0|c.width;c=0|c.height;var w=v-1|0,x=c-1|0,y=d+1|0,z=e+1|0,A={r:0,b:0,g:0,a:0},B=A;for(i=1;t>i;i++)B=B.n={r:0,b:0,g:0,a:0};B.n=A;t={r:0,b:0,g:0,a:0};var C=t;for(i=1;u>i;i++)C=C.n={r:0,b:0,g:0,a:0};C.n=t;for(var u=null,D=0|b.MUL_TABLE[d],E=0|b.SHG_TABLE[d],F=0|b.MUL_TABLE[e],G=0|b.SHG_TABLE[e];f-->0;){l=k=0;var H=D,I=E;for(h=c;--h>-1;){for(m=y*(p=g[0|k]),n=y*(q=g[k+1|0]),o=y*(r=g[k+2|0]),a=y*(s=g[k+3|0]),B=A,i=y;--i>-1;)B.r=p,B.g=q,B.b=r,B.a=s,B=B.n;for(i=1;y>i;i++)j=k+((i>w?w:i)<<2)|0,m+=B.r=g[j],n+=B.g=g[j+1],o+=B.b=g[j+2],a+=B.a=g[j+3],B=B.n;for(u=A,B=0;v>B;B++)g[k++]=m*H>>>I,g[k++]=n*H>>>I,g[k++]=o*H>>>I,g[k++]=a*H>>>I,j=l+((j=B+d+1)<w?j:w)<<2,m-=u.r-(u.r=g[j]),n-=u.g-(u.g=g[j+1]),o-=u.b-(u.b=g[j+2]),a-=u.a-(u.a=g[j+3]),u=u.n;l+=v}for(H=F,I=G,B=0;v>B;B++){for(k=B<<2|0,m=z*(p=g[k])|0,n=z*(q=g[k+1|0])|0,o=z*(r=g[k+2|0])|0,a=z*(s=g[k+3|0])|0,C=t,i=0;z>i;i++)C.r=p,C.g=q,C.b=r,C.a=s,C=C.n;for(l=v,i=1;e>=i;i++)k=l+B<<2,m+=C.r=g[k],n+=C.g=g[k+1],o+=C.b=g[k+2],a+=C.a=g[k+3],C=C.n,x>i&&(l+=v);if(k=B,u=t,f>0)for(h=0;c>h;h++)j=k<<2,g[j+3]=s=a*H>>>I,s>0?(g[j]=m*H>>>I,g[j+1]=n*H>>>I,g[j+2]=o*H>>>I):g[j]=g[j+1]=g[j+2]=0,j=B+((j=h+z)<x?j:x)*v<<2,m-=u.r-(u.r=g[j]),n-=u.g-(u.g=g[j+1]),o-=u.b-(u.b=g[j+2]),a-=u.a-(u.a=g[j+3]),u=u.n,k+=v;else for(h=0;c>h;h++)j=k<<2,g[j+3]=s=a*H>>>I,s>0?(s=255/s,g[j]=(m*H>>>I)*s,g[j+1]=(n*H>>>I)*s,g[j+2]=(o*H>>>I)*s):g[j]=g[j+1]=g[j+2]=0,j=B+((j=h+z)<x?j:x)*v<<2,m-=u.r-(u.r=g[j]),n-=u.g-(u.g=g[j+1]),o-=u.b-(u.b=g[j+2]),a-=u.a-(u.a=g[j+3]),u=u.n,k+=v}}return!0},h.BlurFilter=h.promote(b,"Filter")})(),h=h||{},(function(){"use strict";function b(b){this.alphaMap=b,this._alphaMap=null,this._mapData=null}var c=h.extend(b,h.Filter);c.clone=function(){var c=new b(this.alphaMap);return c._alphaMap=this._alphaMap,c._mapData=this._mapData,c},c.toString=function(){return"[AlphaMapFilter]"},c._applyFilter=function(b){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var b=b.data,c=this._mapData,d=0,e=b.length;e>d;d+=4)b[d+3]=c[d]||0;return!0},c._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var b,c=this._alphaMap=this.alphaMap,d=c;c instanceof HTMLCanvasElement?b=d.getContext("2d"):(d=h.createCanvas?h.createCanvas():document.createElement("canvas"),d.width=c.width,d.height=c.height,b=d.getContext("2d"),b.drawImage(c,0,0));try{var e=b.getImageData(0,0,c.width,c.height)}catch(b){return!1}return this._mapData=e.data,!0},h.AlphaMapFilter=h.promote(b,"Filter")})(),h=h||{},(function(){"use strict";function b(b){this.mask=b}var c=h.extend(b,h.Filter);c.applyFilter=function(b,c,d,e,f,g,h,i){return this.mask?(g=g||b,null==h&&(h=c),null==i&&(i=d),g.save(),b!=g?!1:(g.globalCompositeOperation="destination-in",g.drawImage(this.mask,h,i),g.restore(),!0)):!0},c.clone=function(){return new b(this.mask)},c.toString=function(){return"[AlphaMaskFilter]"},h.AlphaMaskFilter=h.promote(b,"Filter")})(),h=h||{},(function(){"use strict";function b(b,c,d,e,f,g,h,i){this.redMultiplier=null!=b?b:1,this.greenMultiplier=null!=c?c:1,this.blueMultiplier=null!=d?d:1,this.alphaMultiplier=null!=e?e:1,this.redOffset=f||0,this.greenOffset=g||0,this.blueOffset=h||0,this.alphaOffset=i||0}var c=h.extend(b,h.Filter);c.toString=function(){return"[ColorFilter]"},c.clone=function(){return new b(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},c._applyFilter=function(b){for(var b=b.data,c=b.length,d=0;c>d;d+=4)b[d]=b[d]*this.redMultiplier+this.redOffset,b[d+1]=b[d+1]*this.greenMultiplier+this.greenOffset,b[d+2]=b[d+2]*this.blueMultiplier+this.blueOffset,b[d+3]=b[d+3]*this.alphaMultiplier+this.alphaOffset;return!0},h.ColorFilter=h.promote(b,"Filter")})(),h=h||{},(function(){"use strict";function b(b,c,d,e){this.setColor(b,c,d,e)}var c=b.prototype;b.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],b.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],b.LENGTH=b.IDENTITY_MATRIX.length,c.setColor=function(b,c,d,e){return this.reset().adjustColor(b,c,d,e)},c.reset=function(){return this.copy(b.IDENTITY_MATRIX)},c.adjustColor=function(b,c,d,e){return this.adjustHue(e),this.adjustContrast(c),this.adjustBrightness(b),this.adjustSaturation(d)},c.adjustBrightness=function(b){return 0==b||isNaN(b)?this:(b=this._cleanValue(b,255),this._multiplyMatrix([1,0,0,0,b,0,1,0,0,b,0,0,1,0,b,0,0,0,1,0,0,0,0,0,1]),this)},c.adjustContrast=function(c){if(0==c||isNaN(c))return this;c=this._cleanValue(c,100);var d;return 0>c?d=127+c/100*127:(d=c%1,d=0==d?b.DELTA_INDEX[c]:b.DELTA_INDEX[c<<0]*(1-d)+b.DELTA_INDEX[(c<<0)+1]*d,d=127*d+127),this._multiplyMatrix([d/127,0,0,0,.5*(127-d),0,d/127,0,0,.5*(127-d),0,0,d/127,0,.5*(127-d),0,0,0,1,0,0,0,0,0,1]),this},c.adjustSaturation=function(b){if(0==b||isNaN(b))return this;b=this._cleanValue(b,100);b=1+(b>0?3*b/100:b/100);var c=.3086,d=.6094,e=.082;return this._multiplyMatrix([c*(1-b)+b,d*(1-b),e*(1-b),0,0,c*(1-b),d*(1-b)+b,e*(1-b),0,0,c*(1-b),d*(1-b),e*(1-b)+b,0,0,0,0,0,1,0,0,0,0,0,1]),this},c.adjustHue=function(b){if(0==b||isNaN(b))return this;b=this._cleanValue(b,180)/180*Math.PI;var c=Math.cos(b);b=Math.sin(b);var d=.213,e=.715,f=.072;return this._multiplyMatrix([d+c*(1-d)+b*-d,e+c*-e+b*-e,f+c*-f+b*(1-f),0,0,d+c*-d+.143*b,e+c*(1-e)+.14*b,f+c*-f+b*-.283,0,0,d+c*-d+b*-(1-d),e+c*-e+b*e,f+c*(1-f)+b*f,0,0,0,0,0,1,0,0,0,0,0,1]),this},c.concat=function(c){return c=this._fixMatrix(c),c.length!=b.LENGTH?this:(this._multiplyMatrix(c),this)},c.clone=function(){return(new b).copy(this)},c.toArray=function(){for(var c=[],d=0,e=b.LENGTH;e>d;d++)c[d]=this[d];return c},c.copy=function(c){for(var d=b.LENGTH,e=0;d>e;e++)this[e]=c[e];return this},c.toString=function(){return"[ColorMatrix]"},c._multiplyMatrix=function(b){var c,d,e,f=[];for(c=0;5>c;c++){for(d=0;5>d;d++)f[d]=this[d+5*c];for(d=0;5>d;d++){var g=0;for(e=0;5>e;e++)g+=b[d+5*e]*f[e];this[d+5*c]=g}}},c._cleanValue=function(b,c){return Math.min(c,Math.max(-c,b))},c._fixMatrix=function(c){return c instanceof b&&(c=c.toArray()),c.length<b.LENGTH?c=c.slice(0,c.length).concat(b.IDENTITY_MATRIX.slice(c.length,b.LENGTH)):c.length>b.LENGTH&&(c=c.slice(0,b.LENGTH)),c},h.ColorMatrix=b})(),h=h||{},(function(){"use strict";function b(b){this.matrix=b}var c=h.extend(b,h.Filter);c.toString=function(){return"[ColorMatrixFilter]"},c.clone=function(){return new b(this.matrix)},c._applyFilter=function(b){for(var c,d,e,f,b=b.data,g=b.length,h=this.matrix,i=h[0],j=h[1],k=h[2],l=h[3],m=h[4],n=h[5],o=h[6],a=h[7],p=h[8],q=h[9],r=h[10],s=h[11],t=h[12],u=h[13],v=h[14],w=h[15],x=h[16],y=h[17],z=h[18],h=h[19],A=0;g>A;A+=4)c=b[A],d=b[A+1],e=b[A+2],f=b[A+3],b[A]=c*i+d*j+e*k+f*l+m,b[A+1]=c*n+d*o+e*a+f*p+q,b[A+2]=c*r+d*s+e*t+f*u+v,b[A+3]=c*w+d*x+e*y+f*z+h;return!0},h.ColorMatrixFilter=h.promote(b,"Filter")})(),h=h||{},(function(){"use strict";function b(){throw"Touch cannot be instantiated"}b.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},b.enable=function(c,d,e){return c&&c.canvas&&b.isSupported()?c.__touch?!0:(c.__touch={pointers:{},multitouch:!d,preventDefault:!e,count:0},"ontouchstart"in window?b._IOS_enable(c):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&b._IE_enable(c),!0):!1},b.disable=function(c){c&&("ontouchstart"in window?b._IOS_disable(c):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&b._IE_disable(c),delete c.__touch)},b._IOS_enable=function(c){var d=c.canvas,e=c.__touch.f=function(d){b._IOS_handleEvent(c,d)};d.addEventListener("touchstart",e,!1),d.addEventListener("touchmove",e,!1),d.addEventListener("touchend",e,!1),d.addEventListener("touchcancel",e,!1)},b._IOS_disable=function(b){var c=b.canvas;if(c){b=b.__touch.f;c.removeEventListener("touchstart",b,!1),c.removeEventListener("touchmove",b,!1),c.removeEventListener("touchend",b,!1),c.removeEventListener("touchcancel",b,!1)}},b._IOS_handleEvent=function(b,c){if(b){b.__touch.preventDefault&&c.preventDefault&&c.preventDefault();for(var d=c.changedTouches,e=c.type,f=0,g=d.length;g>f;f++){var h=d[f],i=h.identifier;h.target==b.canvas&&("touchstart"==e?this._handleStart(b,i,c,h.pageX,h.pageY):"touchmove"==e?this._handleMove(b,i,c,h.pageX,h.pageY):("touchend"==e||"touchcancel"==e)&&this._handleEnd(b,i,c))}}},b._IE_enable=function(c){var d=c.canvas,e=c.__touch.f=function(d){b._IE_handleEvent(c,d)};void 0===window.navigator.pointerEnabled?(d.addEventListener("MSPointerDown",e,!1),window.addEventListener("MSPointerMove",e,!1),window.addEventListener("MSPointerUp",e,!1),window.addEventListener("MSPointerCancel",e,!1),c.__touch.preventDefault&&(d.style.msTouchAction="none")):(d.addEventListener("pointerdown",e,!1),window.addEventListener("pointermove",e,!1),window.addEventListener("pointerup",e,!1),window.addEventListener("pointercancel",e,!1),c.__touch.preventDefault&&(d.style.touchAction="none")),c.__touch.activeIDs={}},b._IE_disable=function(b){var c=b.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",c,!1),window.removeEventListener("MSPointerUp",c,!1),window.removeEventListener("MSPointerCancel",c,!1),b.canvas&&b.canvas.removeEventListener("MSPointerDown",c,!1)):(window.removeEventListener("pointermove",c,!1),window.removeEventListener("pointerup",c,!1),window.removeEventListener("pointercancel",c,!1),b.canvas&&b.canvas.removeEventListener("pointerdown",c,!1))},b._IE_handleEvent=function(b,c){if(b){b.__touch.preventDefault&&c.preventDefault&&c.preventDefault();var d=c.type,e=c.pointerId,f=b.__touch.activeIDs;if("MSPointerDown"==d||"pointerdown"==d){if(c.srcElement!=b.canvas)return;f[e]=!0,this._handleStart(b,e,c,c.pageX,c.pageY)}else f[e]&&("MSPointerMove"==d||"pointermove"==d?this._handleMove(b,e,c,c.pageX,c.pageY):("MSPointerUp"==d||"MSPointerCancel"==d||"pointerup"==d||"pointercancel"==d)&&(delete f[e],this._handleEnd(b,e,c)))}},b._handleStart=function(b,c,d,e,f){var g=b.__touch;if(g.multitouch||!g.count){var h=g.pointers;h[c]||(h[c]=!0,g.count++,b._handlePointerDown(c,d,e,f))}},b._handleMove=function(b,c,d,e,f){b.__touch.pointers[c]&&b._handlePointerMove(c,d,e,f)},b._handleEnd=function(b,c,d){var e=b.__touch,f=e.pointers;f[c]&&(e.count--,b._handlePointerUp(c,d,!0),delete f[c])},h.Touch=b})(),h=h||{},(function(){"use strict";var b=h.EaselJS=h.EaselJS||{};b.version="0.8.2",b.buildDate="Thu, 26 Nov 2015 20:44:34 GMT"})();g.Easel=h}),null);
__d("WAWebAddContactToGroupFlow.react",["fbt","$InternalEnum","WANullthrows","WAWebApiContact","WAWebChatCollection","WAWebCmd","WAWebComposeBoxActions","WAWebConfirmPopup.react","WAWebContactGetters","WAWebEmojiText.react","WAWebFocusTracer","WAWebFrontendContactGetters","WAWebGroupsModal.react","WAWebModifyParticipantsGroupAction","WAWebNoop","WAWebWidFactory","fbs","react","useWAWebFlow"],(function(a,b,c,d,e,f,g,h){var i,j;e=j||d("react");var k=i||(i=c("react")),l=e.useRef,m=e.useState,n=b("$InternalEnum").Mirrored(["SelectGroup","Confirm"]);function a(a){var b=a.contact;a=d("useWAWebFlow").useFlow(n.SelectGroup);var e=a[0],f=a[1];a=m();var g=a[0],i=a[1];a=function(a){var e=a.groupMetadata;if(!d("WAWebContactGetters").getIsGroup(a)||d("WAWebContactGetters").getIsGroup(a)&&!(e==null?void 0:e.participants.iAmMember()))return!1;a=(e==null?void 0:e.isLidAddressingMode)===!0?d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(b.id)):b.id;if(a!=null&&(e==null?void 0:e.participants.get(a)))return h._(/*BTDS*/"__JHASH__E9XjA99xrft__JHASH__").toString();return!(e==null?void 0:e.participants.iAmAdmin())?c("fbs")._(/*BTDS*/"__JHASH__vHQqGAVBFML__JHASH__").toString():!0};var j=function(a){d("WAWebModifyParticipantsGroupAction").addParticipants(a,[b]).then(function(){d("WAWebCmd").Cmd.openChatFromUnread(a).then(function(b){b&&d("WAWebComposeBoxActions").ComposeBoxActions.focus(a)})})["catch"](c("WAWebNoop")),f.end()},o=l(null),p=function(){if(!o.current)return;var a=o.current;if(!a||a.contains(document.activeElement))return;c("WAWebFocusTracer").focus(a)},q=function(a){p(),i(a),f.push(n.Confirm)};if(f.step==null)return null;var r=null;switch(f.step){case n.SelectGroup:r=k.jsx(c("WAWebGroupsModal.react"),{chats:d("WAWebChatCollection").ChatCollection.filter(function(a){return d("WAWebContactGetters").getIsGroup(a)}),filter:a,onCancel:function(){return f.pop()},onGroup:q});break;case n.Confirm:r=k.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{cancelText:h._(/*BTDS*/"__JHASH__JomY4EcHzcJ__JHASH__"),okText:h._(/*BTDS*/"__JHASH__QtQHyeSf3uq__JHASH__"),onOK:function(){return j(c("WANullthrows")(g))},onCancel:function(){return f.pop()},children:k.jsx(d("WAWebEmojiText.react").EmojiText,{text:h._(/*BTDS*/"__JHASH__dh1fyYvujaR__JHASH__",[h._param("participant",d("WAWebFrontendContactGetters").getFormattedName(b)),h._param("subject",c("WANullthrows")(g).contact.name)])})});break}return k.jsx(e,{ref:o,flow:f,children:r})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebAttachMediaFlow.react",["WAWebApiPrepareCtwaContextSend","WAWebAttachMediaModel","WAWebAttachMenuGatingUtils","WAWebBizBotTosUtils","WAWebChatGetters","WAWebCmd","WAWebComposeBoxActions","WAWebDrawerManager","WAWebMediaEditor.react","WAWebPrepareMessageSendingAction","WAWebUA","WAWebUim","WAWebUimUie.react","WAWebWamEnumThreadType","asyncToGeneratorRuntime","once","react"],(function(a,b,c,d,e,f,g){var h,i;e=i||d("react");var j=h||(h=c("react")),k=e.useCallback,l=e.useEffect,m=e.useRef;function a(a){var e=a.chat,f=a.initCaption,g=a.mediaCollection,h=a.onCancel,i=a.onComplete,n=a.onDismiss,o=a.onSend;a=a.sendAsSticker;var p=m();l(function(){d("WAWebCmd").Cmd.closeContextMenu();d("WAWebCmd").Cmd.closeTooltip();d("WAWebDrawerManager").DrawerManager.closeDrawerRight();void d("WAWebPrepareMessageSendingAction").prepareChatForMessageSending(e);return function(){d("WAWebUA").UA.isGecko?self.setTimeout(function(){return d("WAWebComposeBoxActions").ComposeBoxActions.focus(e)},1):d("WAWebComposeBoxActions").ComposeBoxActions.focus(e)}},[]);var q=k(function(){e==null?void 0:e.setAttachMediaContents(null)},[e]),r=k(function(a){var b;a===void 0&&(a=!0);var c=[];(b=e.attachMediaContents)==null?void 0:b.forEach(function(a){a=(a=a.caption)==null?void 0:a.trim();a!=null&&a.length>0&&c.push(a)});a&&q();i==null?void 0:i(!1);h==null?void 0:h(c);g.mediaPickerStatsLogger.logCancel();n()},[e.attachMediaContents,q,g.mediaPickerStatsLogger,h,i,n]),s=function(a){var b;if(!((b=p.current)==null?void 0:b.handleRequestDismiss(a)))return;a===d("WAWebUim").DismissReason.UIM_INTERACTION&&r(!1)},t=c("once")(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b={});yield d("WAWebBizBotTosUtils").maybeShowBizBot1pTos(e);b=b;var c=b.initCaptionUsed,h=b.isViewOnce,j=b.isWamoSub;d("WAWebCmd").Cmd.once("ui_idle",function(){a.forEach(function(a,b){var c=a.media,g={};b===0&&(g.quotedMsg=e.composeQuotedMsg,e.composeQuotedMsg=null);g.type=c.type;g.isViewOnce=h;g.mentionedJidList=a.mentionedJidList;g.groupMentions=a.groupMentions;g.caption=c.caption;g.addEvenWhilePreparing=c.previewable&&c.state===d("WAWebAttachMediaModel").ATTACH_MEDIA_STATE.PROCESSING;g.isWamoSub=j;if(f==null?void 0:f.ctwaContextLinkData){b=f.ctwaContextLinkData;a=f.ctwaContext;g.ctwaContext=d("WAWebApiPrepareCtwaContextSend").prepareCtwaContextSend(b,a)}c.sendToChat(e,g)}),q()});i==null?void 0:i(!0,{initCaptionUsed:c});o==null?void 0:o();g.mediaPickerStatsLogger.logSend({isViewOnce:!!h});d("WAWebAttachMenuGatingUtils").areExpressionPanelsEnabledV2()&&d("WAWebCmd").Cmd.closeExpressionPanels();n()});return function(b,c){return a.apply(this,arguments)}}()),u=c("once")(function(a){a!=null&&d("WAWebCmd").Cmd.once("ui_idle",function(){d("WAWebComposeBoxActions").ComposeBoxActions.paste(e,a)}),n()}),v;d("WAWebChatGetters").getIsNewsletter(e)&&(v={surface:"channel-producer-media-editor",extras:{channelWid:e.id,threadType:d("WAWebWamEnumThreadType").THREAD_TYPE.CHANNEL}});return j.jsx(d("WAWebUimUie.react").UIE,{displayName:"AttachMediaFlow",escapable:!0,requestDismiss:s,children:j.jsx(d("WAWebMediaEditor.react").MediaEditor,{theme:d("WAWebMediaEditor.react").MediaTheme.ATTACH,ref:p,chat:e,onClose:r,initCaption:f,onSendMedia:t,mediaCollection:g,onDropText:u,sendAsSticker:a,tsNavigationData:v})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebVcardConfirmModal.react",["fbt","WAWebChatFlowTypes","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebEmojiText.react","WAWebFrontendChatGetters","WAWebFrontendVcardUtils","WAWebKeyboardHotKeys.react","WAWebModal.react","WAWebRound.react","WAWebSendIcon.react","WAWebVcardModalDetails.react","WAWebVcardParsingUtils","react","useWAWebChatValues"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function k(a){a=a.contact;a=d("WAWebVcardParsingUtils").parseVcard(a.vcard);return!a?null:j.jsx("div",{className:"x1n2onr6 xyorhqc x150wa6m x1bnvlk4",children:j.jsx(c("WAWebVcardModalDetails.react"),{parsedVcard:a,thumbnail:d("WAWebVcardParsingUtils").vcardThumbnail(a)})})}k.displayName=k.name+" [from "+f.id+"]";b=j.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.contactList,f=a.onSend,g=a.onBack;a=a.chat;var i=d("useWAWebChatValues").useChatValues(a.id,[d("WAWebFrontendChatGetters").getKind]);i=i[0];var l;if(i!=null)switch(i){case d("WAWebChatFlowTypes").ChatKindType.Chat:l=h._(/*BTDS*/"__JHASH__b19P9ZWJTdc__JHASH__",[h._plural(e.length,"count"),h._param("chat",a.title())]);break;case d("WAWebChatFlowTypes").ChatKindType.Group:l=h._(/*BTDS*/"__JHASH__ymsAh415LSe__JHASH__",[h._plural(e.length,"count"),h._param("chat",a.title())]);break;case d("WAWebChatFlowTypes").ChatKindType.Broadcast:l=h._(/*BTDS*/"__JHASH__T2YHOBspucK__JHASH__",[h._plural(e.length,"count"),h._param("chat",a.title())]);break;case d("WAWebChatFlowTypes").ChatKindType.Community:case d("WAWebChatFlowTypes").ChatKindType.Newsletter:break}i=l!=null?j.jsx(d("WAWebEmojiText.react").EmojiText,{text:l,direction:"auto",titlify:!0,ellipsify:!0}):null;return j.jsx(d("WAWebModal.react").Modal,{ref:b,type:d("WAWebModal.react").ModalTheme.Box,children:j.jsxs(c("WAWebDrawer.react"),{children:[j.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.POPUP,onBack:g,children:i}),j.jsx(c("WAWebDrawerBody.react"),{children:j.jsx(d("WAWebKeyboardHotKeys.react").HotKeys,{children:j.jsx("div",{className:"x889kno",children:e.map(function(a,b){return j.jsx(k,{contact:d("WAWebFrontendVcardUtils").vcardFromContactModel(a)},b.toString())})})})}),j.jsx("div",{className:"x1n2onr6 xa1v5g2 x1x0gksc x11doyns",children:j.jsx("div",{className:"x10l6tqk x1a87ojn x3h4tne",children:j.jsx(d("WAWebRound.react").Round,{large:!0,onClick:f,children:j.jsx(d("WAWebSendIcon.react").SendIcon,{directional:!0})})})})]})})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),226);
__d("WAWebAttachVcardsFlow.react",["fbt","$InternalEnum","WAWebBizBotTosUtils","WAWebLidContactsGatingUtils","WAWebSelectModal.react","WAWebSendContactsAction","WAWebServerPropsModel","WAWebVcardConfirmModal.react","asyncToGeneratorRuntime","react","useWAWebFlow"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react"),l=(i||(i=d("react"))).useRef,m=b("$InternalEnum").Mirrored(["Select","Confirm"]);function a(a){var e=d("useWAWebFlow").useFlow(m.Select),f=e[0],g=e[1],i=l([]);if(g.step==null)return null;var j;switch(g.step){case m.Select:e=function(a){g.push(m.Confirm),i.current=a};var n=function(){return i.current},o=d("WAWebServerPropsModel").ServerProps.maxParticipants;j=k.jsx(d("WAWebSelectModal.react").SelectModal,{title:h._(/*BTDS*/"__JHASH__0FKlgfRZkxG__JHASH__"),onCancel:function(){a.onCancel(),g.pop()},onConfirm:e,getInitialItems:n,listType:d("WAWebSelectModal.react").ListType.ContactSelectModal,maxItems:o,includeLidContacts:d("WAWebLidContactsGatingUtils").isLidVcardSharingEnabled(),allowBlockedContacts:!0});break;case m.Confirm:var p=function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var e;g.end();var f=a.chat;yield d("WAWebBizBotTosUtils").maybeShowBizBot1pTos(f);var h=f.composeQuotedMsg;f.composeQuotedMsg=null;e=((e=f.getComposeContents())==null?void 0:e.ctwaContext)||void 0;void c("WAWebSendContactsAction")(b,f,h,e);a.onContactsSent()});return function(a){return e.apply(this,arguments)}}();j=k.jsx(c("WAWebVcardConfirmModal.react"),{contactList:i.current,onSend:function(){return void p(i.current)},onBack:function(){g.pop()},chat:a.chat});break}return k.jsx(f,{flow:g,children:j})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebAvatarOverlay.react",["$InternalEnum","WAWebUIRefreshGatingUtils","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j,k=j||c("react"),l=(h||(h=d("react"))).useMemo,m=b("$InternalEnum").Mirrored(["DEFAULT","COMMUNITY"]),n={overlay:{position:"x10l6tqk",top:"x13vifvy",start:"x17qophe",zIndex:"xfo81ep",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"xh8yej3",height:"x5yr21d",fontSize:"x1nxh6w3",lineHeight:"x1u7k74",color:"x1j16vfr",textTransform:"xtvhhri",backgroundColor:"x146q241",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",$$css:!0},overlayRefreshed:{position:"x10l6tqk",top:"x13vifvy",zIndex:"x42zw1d",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"xh8yej3",height:"x5yr21d",backgroundColor:"x219wg1",$$css:!0},overlayInnerRefreshed:{display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",flexDirection:"xdt5ytf",rowGap:"x1r0jzty",boxSizing:"x9f619",width:"x29ncy0",height:"x17j7krd",$$css:!0},noBorderRadius:{borderTopStartRadius:"x168nmei",borderTopEndRadius:"x13lgxp2",borderBottomEndRadius:"x5pf9jr",borderBottomStartRadius:"xo71vjh",$$css:!0},icon:{color:"x7o08j2",$$css:!0},iconRefreshed:{color:"x1awj2ng",$$css:!0},text:{width:"x1exxlbk",textAlign:"x2b8uid",overflowWrap:"x1mzt3pk",$$css:!0},textRefreshed:{width:"xh8yej3",textAlign:"x2b8uid",overflowWrap:"x1mzt3pk",color:"x1awj2ng",fontSize:"x1nxh6w3",lineHeight:"x1d3mw78",$$css:!0}};e=k.forwardRef(a);function a(a,b){var e=a.icon,f=a.text;a=a.theme;var g=d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled(),h=l(function(){var a=k.jsxs(k.Fragment,{children:[k.jsx("div",{className:(i||(i=c("stylex")))(g?n.iconRefreshed:n.icon),children:e}),k.jsx("div",{"data-testid":void 0,className:i(g?n.textRefreshed:n.text,!g&&d("WAWebUISpacing").uiMargin.top10),children:f})]});g&&(a=k.jsx("div",{className:(i||(i=c("stylex")))(n.overlayInnerRefreshed,d("WAWebUISpacing").uiPadding.all8),children:a}));return a},[e,g,f]);return k.jsx("div",{ref:b,className:(i||(i=c("stylex")))([g?n.overlayRefreshed:[n.overlay,d("WAWebUISpacing").uiPadding.top15],a===m.COMMUNITY&&n.noBorderRadius]),children:h},"avatar-overlay")}a.displayName=a.name+" [from "+f.id+"]";g.AvatarOverlayTheme=m;g.AvatarOverlay=e}),98);
__d("WAWebDataSharingOptOutOrUpsell",["fbt","WASmaxInBizSettingsEnums","WAWebCTWADataSharingModel","WAWebCheckBox.react","WAWebCopyPasteSelectable.react","WAWebDataSharingUpsellModel","WAWebDrawerManager","WAWebFlex.react","WAWebModalManager","WAWebSMBDataSharingDrawer.react","WAWebSMBDataSharingSettingAction","WAWebUISpacing","WAWebWDSText.react","WAWebWamEnumSmbDataSharingConsentSettingEntryPoint","react","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g,h){var i,j;b=j||d("react");var k=i||(i=c("react")),l=b.useEffect,m=b.useState,n={themeOrderCreate:{backgroundColor:"x1pl83jw",$$css:!0},themeLabelsOptOut:{borderTopWidth:"x178xt8z",borderTopStyle:"x13fuv20",borderTopColor:"xog00wb",$$css:!0}},o=function(a){d("WAWebModalManager").ModalManager.close(),d("WAWebDrawerManager").DrawerManager.openDrawerLeft(k.jsx(c("WAWebSMBDataSharingDrawer.react"),{onClose:function(){return d("WAWebDrawerManager").DrawerManager.closeDrawerLeft()},entrypoint:a}))};function p(a){var b=a.children,c=a.entryPoint;return k.jsx(d("WAWebCopyPasteSelectable.react").SelectableLink,{className:"x1ypdohk",id:"data-sharing-learn-more-link",selectable:!0,onClick:function(){return o(c)},children:b})}p.displayName=p.name+" [from "+f.id+"]";function q(a){var b=a.checkboxValue,c=a.entryPoint,e=a.onCheckboxToggle;a=a.theme;a=a==="labels-opt-out"?h._(/*BTDS*/"__JHASH__1Xq15p5pQdJ__JHASH__",[h._implicitParam("=m1",k.jsx(p,{entryPoint:c,children:h._(/*BTDS*/"__JHASH__tmQ7MojBTej__JHASH__")}))]):h._(/*BTDS*/"__JHASH__-3HURnKmtVO__JHASH__",[h._implicitParam("=m1",k.jsx(p,{entryPoint:c,children:h._(/*BTDS*/"__JHASH__nM41f85EY-I__JHASH__")}))]);return k.jsxs(k.Fragment,{children:[k.jsx(d("WAWebCheckBox.react").CheckBox,{checked:b,onChange:e}),k.jsx(d("WAWebWDSText.react").WDSTextSmall,{color:"secondary",xstyle:d("WAWebUISpacing").uiMargin.start16,children:a})]})}q.displayName=q.name+" [from "+f.id+"]";function r(a){a=a.entryPoint;return k.jsx(d("WAWebWDSText.react").WDSTextSmall,{color:"secondary",children:h._(/*BTDS*/"__JHASH__pYuJ86ohGD3__JHASH__",[h._implicitParam("=m1",k.jsx(p,{entryPoint:a,children:h._(/*BTDS*/"__JHASH__UU6CPff_gqR__JHASH__")}))])})}r.displayName=r.name+" [from "+f.id+"]";function a(a){var b=a.checkboxValue,e=a.onCheckboxToggle;a=a.theme;var f=c("useWAWebUnmountSignal")(),g=m(null),h=g[0],i=g[1];l(function(){void d("WAWebSMBDataSharingSettingAction").getSMBDataSharingSettingAction().then(function(a){f.aborted||(i(a),d("WAWebCTWADataSharingModel").CTWADataSharingModel.subscribeForUpdates(i))});return function(){d("WAWebCTWADataSharingModel").CTWADataSharingModel.unsubscribeFromUpdates(i)}},[f.aborted]);if(h==null||h===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE.notset)return null;var j;a==="order-create"?j=[n.themeOrderCreate,d("WAWebUISpacing").uiPadding.start16,d("WAWebUISpacing").uiPadding.top16,d("WAWebUISpacing").uiPadding.bottom32]:a==="order-update"?j=[d("WAWebUISpacing").uiPadding.start28,d("WAWebUISpacing").uiPadding.top48,d("WAWebUISpacing").uiPadding.bottom16]:a==="labels-opt-out"&&(j=[n.themeLabelsOptOut,d("WAWebUISpacing").uiMargin.top24,d("WAWebUISpacing").uiPadding.top12,d("WAWebUISpacing").uiPadding.start30]);g=h===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"];h=h===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["false"]&&c("WAWebDataSharingUpsellModel").isUpsellEnabled();var o;a==="labels-opt-out"?o=d("WAWebWamEnumSmbDataSharingConsentSettingEntryPoint").SMB_DATA_SHARING_CONSENT_SETTING_ENTRY_POINT.ENTRY_POINT_LABELS_SCREEN:(a,o=d("WAWebWamEnumSmbDataSharingConsentSettingEntryPoint").SMB_DATA_SHARING_CONSENT_SETTING_ENTRY_POINT.ENTRY_POINT_ORDER_SCREEN);return k.jsxs(d("WAWebFlex.react").FlexRow,{align:"center",xstyle:j,children:[h?k.jsx(r,{entryPoint:o}):null,g?k.jsx(q,{theme:a,entryPoint:o,checkboxValue:b,onCheckboxToggle:e}):null]})}a.displayName=a.name+" [from "+f.id+"]";g.OptOutText=q;g.UpsellText=r;g.DataSharingOptOutOrUpsell=a}),226);
__d("WAWebCtwa3pdConversionWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({Ctwa3pdConversion:[5138,{ctwa3pdConversionMetadata:[1,a.TYPES.STRING],ctwa3pdConversionSubtype:[2,a.TYPES.STRING],ctwa3pdConversionType:[3,a.TYPES.STRING],ctwa3pdSchemaVersion:[4,a.TYPES.INTEGER],ctwa3pdSurfaceType:[5,a.TYPES.STRING],ctwaSignals:[7,a.TYPES.STRING],ctwaTrackingPayload:[6,a.TYPES.STRING]},[1,1,1],"regular"]},{Ctwa3pdConversion:[]});g.Ctwa3pdConversionWamEvent=b}),98);
__d("WAWebSmb3pdConversionSignalAction",["WASmaxInBizSettingsEnums","WAWebBizGatingUtils","WAWebCTWAConstants","WAWebCTWADataSharingModel","WAWebChatModel","WAWebCommonCTWADataSharing","WAWebCtwa3pdConversionWamEvent","WAWebFrontendMsgGetters","WAWebLabelCollection","WAWebMsgModel","WAWebOrderStatus"],(function(a,b,c,d,e,f,g){var h=function(a,b){if(b==="order_created"||a==null)return"processing";b;switch(a){case d("WAWebOrderStatus").OrderStatus.Shipped:return"shipped";case d("WAWebOrderStatus").OrderStatus.Complete:case d("WAWebOrderStatus").OrderStatus.Delivered:return"completed";case d("WAWebOrderStatus").OrderStatus.Canceled:return"canceled";case d("WAWebOrderStatus").OrderStatus.Processing:case d("WAWebOrderStatus").OrderStatus.Pending:case d("WAWebOrderStatus").OrderStatus.PartiallyShipped:case d("WAWebOrderStatus").OrderStatus.PreparingToShip:case d("WAWebOrderStatus").OrderStatus.PaymentRequested:return"processing"}},i=function(a){var b=a.chat,e=a.surface,f=a.type,g=a.subType,i=a.orderStatus;a=a.paidData;b=c("WAWebCommonCTWADataSharing").getCTWAEligibilityFromChat(b);if(b==null)return;if(d("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue()!==d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"])return;i=g==null?h((i=i)!=null?i:null,f):g;g={ctwa3pdSchemaVersion:2,ctwa3pdSurfaceType:e,ctwa3pdConversionType:f,ctwa3pdConversionSubtype:i,ctwa3pdConversionMetadata:JSON.stringify(a)};b.data!=null&&(g.ctwaTrackingPayload=b.data);new(d("WAWebCtwa3pdConversionWamEvent").Ctwa3pdConversionWamEvent)(g).commit()},j=function(a,b,c){a=d("WAWebLabelCollection").LabelCollection.get(a);if(a==null)return;a=a.predefinedId;if(a==null)return;if(!d("WAWebCTWAConstants").ALLOWED_PREDEFINED_LABEL_IDS_SET.has(a)&&!(a===d("WAWebCTWAConstants").NEW_CUSTOMER_LABEL_ID&&d("WAWebBizGatingUtils").is3pdSignalNewCustomerEnabled()||(a===d("WAWebCTWAConstants").FOLLOW_UP_LABEL_ID||a===d("WAWebCTWAConstants").LEAD_LABEL_ID)&&d("WAWebBizGatingUtils").is3pdLeadOptimisationLabelSignalsEnabled()))return;var e;a===d("WAWebCTWAConstants").FOLLOW_UP_LABEL_ID||a===d("WAWebCTWAConstants").LEAD_LABEL_ID?e="lead_created":a===d("WAWebCTWAConstants").ALLOWED_PREDEFINED_LABEL_IDS.NEW_ORDER||a===d("WAWebCTWAConstants").NEW_CUSTOMER_LABEL_ID?e="order_created":e="order_updated";var f,g={};switch(a){case d("WAWebCTWAConstants").NEW_CUSTOMER_LABEL_ID:f="new_customer";g={paid:!1};break;case d("WAWebCTWAConstants").ALLOWED_PREDEFINED_LABEL_IDS.ORDER_COMPLETE:f="order_complete";g={paid:!1};break;case d("WAWebCTWAConstants").ALLOWED_PREDEFINED_LABEL_IDS.NEW_ORDER:f="new_order";g={paid:!1};break;case d("WAWebCTWAConstants").ALLOWED_PREDEFINED_LABEL_IDS.PAID:f="paid";g={paid:!0};break;case d("WAWebCTWAConstants").ALLOWED_PREDEFINED_LABEL_IDS.PENDING_PAYMENT:f="pending_payment";g={paid:!1};break;case d("WAWebCTWAConstants").FOLLOW_UP_LABEL_ID:f="follow_up";break;case d("WAWebCTWAConstants").LEAD_LABEL_ID:f="lead";break}i({paidData:g,chat:b,surface:c,type:e,subType:f})};a=function(a){var b=a.chat,c=a.type,e=a.orderStatus,f=a.paidData;a=a.isPaidStateChanged;if(!d("WAWebBizGatingUtils").smbDataSharingConsentEnabled())return;b={surface:"order",chat:b,type:c,orderStatus:e,paidData:f};a===!0&&(b.subType="paid_change");i(b)};var k=function(a,b){var c="label_chat";a.forEach(function(a){b.forEach(function(b){j(b,a,c)})})},l=function(a,b){var c="label_message";a.forEach(function(a){var e=d("WAWebFrontendMsgGetters").getChat(a);b.forEach(function(a){j(a,e,c)})})};b=function(a,b){if(a.length===0||b.length===0)return;a=a.reduce(function(a,b){b instanceof d("WAWebChatModel").Chat?a.chats.push(b):b instanceof d("WAWebMsgModel").Msg&&a.messages.push(b);return a},{chats:[],messages:[]});var c=a.chats;a=a.messages;c.length>0&&d("WAWebBizGatingUtils").isSMBLabelsDataSharingEnabledForChats()&&k(c,b);a.length>0&&d("WAWebBizGatingUtils").isSMBLabelsDataSharingEnabledForMessages()&&l(a,b)};g.log3pdConversionSignalForOrders=a;g.log3pdConversionSignalForChatsOrMessages=b}),98);
__d("WAWebWamEnumCtwaLabelTarget",[],(function(a,b,c,d,e,f){a=Object.freeze({CHAT:0,MESSAGE:1});f.CTWA_LABEL_TARGET=a}),66);
__d("WAWebWamEnumCtwaLabelType",[],(function(a,b,c,d,e,f){a=Object.freeze({NEW_ORDER:0,PENDING_PAYMENT:1,PAID:2,ORDER_COMPLETE:3,NEW_CUSTOMER:4,DELIVERED:5,LEAD:6,FOLLOW_UP:7,APPOINTMENT:8});f.CTWA_LABEL_TYPE=a}),66);
__d("WAWebWamEnumCustomerAdsSharingSettingEnabled",[],(function(a,b,c,d,e,f){a=Object.freeze({UNSET:0,TRUE:1,FALSE:2});f.CUSTOMER_ADS_SHARING_SETTING_ENABLED=a}),66);
__d("WAWebCtwaLabelSignalWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumCtwaLabelTarget","WAWebWamEnumCtwaLabelType","WAWebWamEnumCustomerAdsSharingSettingEnabled"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({CtwaLabelSignal:[4662,{ctwaLabelSignalVersion:[1,a.TYPES.INTEGER],ctwaLabelTarget:[2,d("WAWebWamEnumCtwaLabelTarget").CTWA_LABEL_TARGET],ctwaLabelType:[3,d("WAWebWamEnumCtwaLabelType").CTWA_LABEL_TYPE],ctwaSignalMetadata:[9,a.TYPES.STRING],customerAdsSharingSettingEnabled:[10,d("WAWebWamEnumCustomerAdsSharingSettingEnabled").CUSTOMER_ADS_SHARING_SETTING_ENABLED],deepLinkConversionData:[4,a.TYPES.STRING],deepLinkConversionSource:[5,a.TYPES.STRING],eventSharingSettingEnabled:[6,a.TYPES.BOOLEAN],globalSharingSettingEnabled:[7,a.TYPES.BOOLEAN],threadIdHmac:[8,a.TYPES.STRING]},[1,1,1],"regular"]},{CtwaLabelSignal:[]});g.CtwaLabelSignalWamEvent=b}),98);
__d("WAWebSmbMarkAsXLabelAction",["WALogger","WASmaxInBizSettingsEnums","WAWebBizGatingUtils","WAWebCTWAConstants","WAWebCTWADataSharingModel","WAWebChatModel","WAWebCommonCTWADataSharing","WAWebCtwaLabelSignalWamEvent","WAWebFrontendMsgGetters","WAWebLabelCollection","WAWebMsgModel","WAWebWamEnumCtwaLabelTarget","WAWebWamEnumCtwaLabelType","WAWebWamEnumCustomerAdsSharingSettingEnabled"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ctwa][labels] logLabelAddedToMessageAction: chat is missing for a provided message"]);h=function(){return a};return a}var i=new Map([[(a=d("WAWebCTWAConstants")).ALLOWED_PREDEFINED_LABEL_IDS.NEW_ORDER,(b=d("WAWebWamEnumCtwaLabelType")).CTWA_LABEL_TYPE.NEW_ORDER],[a.ALLOWED_PREDEFINED_LABEL_IDS.PENDING_PAYMENT,b.CTWA_LABEL_TYPE.PENDING_PAYMENT],[a.ALLOWED_PREDEFINED_LABEL_IDS.PAID,b.CTWA_LABEL_TYPE.PAID],[a.ALLOWED_PREDEFINED_LABEL_IDS.ORDER_COMPLETE,b.CTWA_LABEL_TYPE.ORDER_COMPLETE]]),j={globalSharingSettingEnabled:!1},k=function(a){var b=d("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue();switch(b){case d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"]:return{globalSharingSettingEnabled:!0,eventSharingSettingEnabled:a};case d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["false"]:return j;case d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE.notset:default:return null}},l=function(a,b,e){var f=c("WAWebCommonCTWADataSharing").getCTWAEligibilityFromChat(a);if(f==null||!d("WAWebBizGatingUtils").isSMBLabelsDataSharingEnabledForChats())return;b.forEach(function(a){a=babelHelpers["extends"]({ctwaLabelSignalVersion:1,ctwaLabelTarget:d("WAWebWamEnumCtwaLabelTarget").CTWA_LABEL_TARGET.CHAT,ctwaLabelType:a,deepLinkConversionSource:f.source},k(e),{customerAdsSharingSettingEnabled:d("WAWebWamEnumCustomerAdsSharingSettingEnabled").CUSTOMER_ADS_SHARING_SETTING_ENABLED.UNSET});new(d("WAWebCtwaLabelSignalWamEvent").CtwaLabelSignalWamEvent)(a).commit()})},m=function(a,b,e){a=d("WAWebFrontendMsgGetters").getChat(a);if(!a){d("WALogger").ERROR(h());return}var f=c("WAWebCommonCTWADataSharing").getCTWAEligibilityFromChat(a);if(f==null||!d("WAWebBizGatingUtils").isSMBLabelsDataSharingEnabledForMessages())return;b.forEach(function(a){new(d("WAWebCtwaLabelSignalWamEvent").CtwaLabelSignalWamEvent)(babelHelpers["extends"]({ctwaLabelSignalVersion:1,ctwaLabelTarget:d("WAWebWamEnumCtwaLabelTarget").CTWA_LABEL_TARGET.MESSAGE,ctwaLabelType:a,deepLinkConversionSource:f.source},k(e),{customerAdsSharingSettingEnabled:d("WAWebWamEnumCustomerAdsSharingSettingEnabled").CUSTOMER_ADS_SHARING_SETTING_ENABLED.UNSET})).commit()})};e=function(a,b,c){var e=[];b.forEach(function(a){a=d("WAWebLabelCollection").LabelCollection.get(a);a=a==null?void 0:a.predefinedId;if(a==null)return;var b=i.get(a);b!=null&&e.push(b);a===d("WAWebCTWAConstants").NEW_CUSTOMER_LABEL_ID&&d("WAWebBizGatingUtils").is3pdSignalNewCustomerEnabled()&&e.push(d("WAWebWamEnumCtwaLabelType").CTWA_LABEL_TYPE.NEW_CUSTOMER);a===d("WAWebCTWAConstants").FOLLOW_UP_LABEL_ID&&d("WAWebBizGatingUtils").is3pdLeadOptimisationLabelSignalsEnabled()&&e.push(d("WAWebWamEnumCtwaLabelType").CTWA_LABEL_TYPE.FOLLOW_UP);a===d("WAWebCTWAConstants").LEAD_LABEL_ID&&d("WAWebBizGatingUtils").is3pdLeadOptimisationLabelSignalsEnabled()&&e.push(d("WAWebWamEnumCtwaLabelType").CTWA_LABEL_TYPE.LEAD)});if(e.length===0)return;if(a[0]instanceof d("WAWebMsgModel").Msg){m(a[0],e,c);return}a.forEach(function(a){a instanceof d("WAWebChatModel").Chat&&l(a,e,c)})};g.logLabelSignalForModels=e}),98);
__d("WAWebBizManageLabelModal.react",["fbt","WASmaxInBizSettingsEnums","WAWebBizGatingUtils","WAWebButton.react","WAWebCTWADataSharingModel","WAWebChatCollection","WAWebCommonCTWADataSharing","WAWebDataSharingOptOutOrUpsell","WAWebDataSharingUpsellModel","WAWebDrawerHeader.react","WAWebLabelCollection","WAWebLabelsMultiSelectLabelList.react","WAWebListsGatingUtils","WAWebListsLogging","WAWebListsUtil","WAWebModal.react","WAWebMultiSelection","WAWebSchemaLabel","WAWebSmb3pdConversionSignalAction","WAWebSmbMarkAsXLabelAction","WAWebStateUtils","WAWebWDSButton","WAWebWamEnumListAction","react","useWAWebForceUpdate"],(function(a,b,c,d,e,f,g,h){var i,j;b=j||d("react");var k=i||(i=c("react")),l=b.useEffect,m=b.useMemo,n=b.useState,o={NONE_SELECTED:0,ALL_SELECTED:1,PARTIALLY_SELECTED:2},p=function(){return d("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue()===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"]};e=k.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=n(p),f=e[0],g=e[1];l(function(){return function(){c("WAWebDataSharingUpsellModel").enableUpsell()}},[]);var i=a.modelsToUpdate,j=a.onLabelUpdateComplete,q=a.entryPoint,r=m(function(){return new(c("WAWebMultiSelection"))([],function(a){return a.id})},[]),s=m(function(){return new Set()},[]),t=d("useWAWebForceUpdate").useForceUpdateDONOTUSE(),u=m(function(){var a=function(){var a,b={},c=d("WAWebListsGatingUtils").isListsEnabled()?(a=d("WAWebLabelCollection").LabelCollection.findFirst(function(a){return a.type===d("WAWebSchemaLabel").ListType.FAVORITES}))==null?void 0:a.id:null;i.forEach(function(a){a=d("WAWebStateUtils").unproxy(a);a.labels&&a.labels.forEach(function(a){b[a]=b[a]?++b[a]:1});a.isFavorite===!0&&c!=null&&(b[c]=b[c]?++b[c]:1)});return b};a=a();var b={};Object.entries(a).forEach(function(a){var c=a[0];a=a[1];if(a===i.length)b[c]=o.ALL_SELECTED;else if(a>0){b[c]=o.PARTIALLY_SELECTED;return}else b[c]=o.NONE_SELECTED});return b},[]);e=function(a){if(a==null)return;u[a]===o.PARTIALLY_SELECTED?s.add("{labelId}_changed"):s.has(a)?s["delete"](a):(u[a]==null&&d("WAWebBizGatingUtils").labelsEditingEnabled()&&(u[a]=o.ALL_SELECTED),s.add(a));t()};var v=function(){void d("WAWebListsUtil").logLabelOperationEventsForModels(i);var a=r.list,b=r.selected,c=[],e=[],g=new Map();a.forEach(function(a,f){b[f]&&c.push(a.id);e.push(babelHelpers["extends"]({id:a.id,type:b[f]?"add":"remove"},a.type!=null&&{listType:a.type}));if(q!=null&&d("WAWebListsGatingUtils").isListsEnabled()){f=d("WAWebLabelCollection").LabelCollection.get(a.id);f!=null&&g.set(a.id,d("WAWebListsUtil").getAllChatsInList(f))}});d("WAWebLabelCollection").LabelCollection.addOrRemoveLabels(e,i);if(q!=null&&d("WAWebListsGatingUtils").isListsEnabled()){var h=i.map(function(a){return d("WAWebChatCollection").ChatCollection.get(a.id)}).filter(Boolean);e.forEach(function(a){var b=g.get(a.id);if(b==null)return;var c,e;a.type==="add"?c=h:a.type==="remove"&&(e=h);d("WAWebListsLogging").logListUpdate({listId:Number(a.id),listAction:d("WAWebWamEnumListAction").LIST_ACTION.UPDATE_MEMBERS,entryPoint:q,chatsBeforeUpdate:b,addedChats:c,removedChats:e})})}c.length>0&&(d("WAWebSmbMarkAsXLabelAction").logLabelSignalForModels(i,c,f),f&&d("WAWebSmb3pdConversionSignalAction").log3pdConversionSignalForChatsOrMessages(i,c));j()};v=k.jsx(c("WAWebButton.react"),{testid:void 0,type:"primary",disabled:s.size===0,onClick:v,children:h._(/*BTDS*/"__JHASH__K-FdwULPt2J__JHASH__")},1);var w=k.jsx(c("WAWebButton.react"),{testid:void 0,type:"secondary",onClick:a.onCancel,children:h._(/*BTDS*/"__JHASH__JomY4EcHzcJ__JHASH__")},0);w=k.jsxs(d("WAWebWDSButton").ButtonGroup,{direction:"horizontal",children:[w,v]});v=k.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:d("WAWebListsGatingUtils").isListsEnabled()?h._(/*BTDS*/"__JHASH__DIPleSe9pjO__JHASH__"):h._(/*BTDS*/"__JHASH__CqaGYmJHqZB__JHASH__"),type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.POPUP,onCancel:a.onCancel});var x=c("WAWebCommonCTWADataSharing").shouldDisplayDataSharingLabelOptOutOrUpsell(i)?k.jsx(d("WAWebDataSharingOptOutOrUpsell").DataSharingOptOutOrUpsell,{checkboxValue:f,onCheckboxToggle:function(){return g(!f)},theme:"labels-opt-out"}):null;return k.jsxs(d("WAWebModal.react").Modal,{ref:b,type:d("WAWebModal.react").ModalTheme.LabelList,actions:w,title:v,children:[k.jsx(c("WAWebLabelsMultiSelectLabelList.react"),{onNewLabelAdded:a.onNewLabelAdded,shouldScrollIntoViewAndSelect:a.shouldScrollIntoViewAndSelect,initialLabelState:u,selectedLabels:r,renderContext:"label-selection",onMultiSelect:e,entryPoint:q}),x]})}a.displayName=a.name+" [from "+f.id+"]";b=e;g["default"]=b}),226);
__d("WAWebBizManageLabelFlow.react",["WAWebBizManageLabelModal.react","WAWebChatModel","WAWebWamEnumLabelOperations","WAWebWamEnumLabelTargets","WAWebWamLabelEventReporter","react","useLazyRef"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useEffect,l=b.useRef;function a(a){var b=a.entryPoint,e=a.modelsToUpdate,f=a.onClose,g=a.onLabelUpdateComplete,h=c("useLazyRef")(function(){return new Set()}),i=l();k(function(){var a=e.length;i.current=a===1?e[0]instanceof d("WAWebChatModel").Chat?d("WAWebWamEnumLabelTargets").LABEL_TARGETS.LABEL_CHAT_DIALOG:d("WAWebWamEnumLabelTargets").LABEL_TARGETS.LABEL_MESSAGE_DIALOG:d("WAWebWamEnumLabelTargets").LABEL_TARGETS.LABEL_COMBINED_DIALOG;d("WAWebWamLabelEventReporter").logLabelOperationEvent(d("WAWebWamEnumLabelOperations").LABEL_OPERATIONS.VIEW,a,i.current)},[]);a=function(a){if(h.current.has(a)){h.current["delete"](a);return{shouldScrollIntoView:!0,shouldSelect:!0}}return{shouldScrollIntoView:!1,shouldSelect:!1}};var m=function(a){h.current.add(a)},n=function(){g==null?void 0:g(),f==null?void 0:f()},o=function(){i.current&&d("WAWebWamLabelEventReporter").logLabelOperationEvent(d("WAWebWamEnumLabelOperations").LABEL_OPERATIONS.CLICK_NEGATIVE,e.length,i.current),f==null?void 0:f()};return j.jsx(c("WAWebBizManageLabelModal.react"),{shouldScrollIntoViewAndSelect:a,onLabelUpdateComplete:n,onCancel:o,onNewLabelAdded:m,modelsToUpdate:e,entryPoint:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebBizProductMessageSendQpl",["WAQplTypes","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule"],(function(a,b,c,d,e,f,g){function a(a,b,c){var e=d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_MESSAGE_SEND;d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(e,{annotations:{string:{EntryPoint:a}}});b!==void 0&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(e,{"int":{ProductCount:b}});c!==void 0&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(e,{"int":{ContactCount:c}})}function b(a){var b=d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_MESSAGE_SEND;a.then(function(){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(b,d("WAQplTypes").QuickLogActionType.SUCCESS)})["catch"](function(){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(b,d("WAQplTypes").QuickLogActionType.FAIL)})}g.qplStartProductSendMessage=a;g.qplEndProductMessageSend=b}),98);
__d("WAWebProductCatalogMessage",["fbt","WANullthrows","WAWebAttachMediaCollection","WAWebAttachMediaModel","WAWebMsgType","WAWebProductCatalogLogQplEvents","WAWebProductSelectors","WAWebToast.react","WAWebToastManager","WAWebWamEnumMediaPickerOriginType","asyncToGeneratorRuntime","err","isStringNullOrEmpty","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){b=c("WANullthrows")(new(c("WAWebAttachMediaCollection"))({chatParticipantCount:b}));d("WAWebProductCatalogLogQplEvents").qplPointProductMessageSend("image_upload_start");yield b.processAttachments([{file:a}],d("WAWebWamEnumMediaPickerOriginType").MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY,e);d("WAWebProductCatalogLogQplEvents").qplPointProductMessageSend("image_upload_end");if(!b.canSend())return;a=b.getPreviewableMedias();if(a.length!==1)return;e=a[0];c("isStringNullOrEmpty")(e.caption)&&(e.caption=void 0);return e});return l.apply(this,arguments)}function m(a){return babelHelpers["extends"]({businessOwnerJid:a.catalogWid.toString({legacy:!0}),productId:a.id.toString(),url:a.url,productImageCount:a.getProductImageCollectionCount(),title:a.name,description:a.description},a.priceAmount1000===0?{priceAmount1000:null,currencyCode:null}:{currencyCode:a.currency,priceAmount1000:a.priceAmount1000},{salePriceAmount1000:d("WAWebProductSelectors").isSalePriceActive(a)?a.salePriceAmount1000:null})}function a(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=b.getHeadImageFile();if(!f){d("WAWebToastManager").ToastManager.open(j.jsx(d("WAWebToast.react").Toast,{msg:h._(/*BTDS*/"__JHASH__-5lwPqXH6V4__JHASH__")}));throw c("err")("Tried to send product message. Media file is not available.")}var g=a.getParticipantCount();f=(yield k(f,g,a));if(!f){d("WAWebToastManager").ToastManager.open(j.jsx(d("WAWebToast.react").Toast,{msg:h._(/*BTDS*/"__JHASH__-5lwPqXH6V4__JHASH__")}));throw c("err")("Tried to send product message. Media data is not available.")}g={quotedMsg:e,caption:f.caption,addEvenWhilePreparing:f.previewable&&f.state===d("WAWebAttachMediaModel").ATTACH_MEDIA_STATE.PROCESSING,useBasePropsType:!0};f.sendToChat(a,babelHelpers["extends"]({},g,{type:d("WAWebMsgType").MSG_TYPE.PRODUCT,productMsgOptions:m(b)}))});return n.apply(this,arguments)}g.createProductMsgSnapshot=m;g.sendProductMessage=a}),226);
__d("WAWebBizSendProductModal.react",["fbt","Promise","WAWebBizProductMessageSendQpl","WAWebBlockContactAction","WAWebChatGetters","WAWebCmd","WAWebDrawerManager","WAWebFrontendConstants","WAWebModalManager","WAWebProductCatalogMessage","WAWebSelectModal.react","WAWebServerPropConstants","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g,h){var i,j,k,l=k||c("react"),m=(j||(j=d("react"))).useEffect;function a(a){m(function(){d("WAWebCmd").Cmd.closeContextMenu(),d("WAWebCmd").Cmd.closeTooltip()},[]);var c=function(c){var e=a.product;return new(i||(i=b("Promise")))(function(a,b){d("WAWebCmd").Cmd.once("ui_idle",function(){d("WAWebProductCatalogMessage").sendProductMessage(c,e).then(function(){return a()})["catch"](function(a){return b(a)})})})},e=function(e){d("WAWebBizProductMessageSendQpl").qplStartProductSendMessage("Forward",void 0,e.length);var f=e.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WAWebChatGetters").getIsUser(a)&&a.contact.isContactBlocked&&(yield d("WAWebBlockContactAction").unblockContact(a.contact));return c(a)});return function(b){return a.apply(this,arguments)}}());d("WAWebBizProductMessageSendQpl").qplEndProductMessageSend((i||(i=b("Promise"))).all(f));d("WAWebModalManager").ModalManager.close();e.length===1&&(d("WAWebCmd").Cmd.openChatFromUnread(e[0]),window.innerWidth<=d("WAWebFrontendConstants").LAYOUT_2COLUMNS_MAX_WIDTH&&d("WAWebDrawerManager").DrawerManager.closeDrawerRight());a.onSend==null?void 0:a.onSend()},f=function(){d("WAWebModalManager").ModalManager.close()};return l.jsx(d("WAWebSelectModal.react").SelectModal,{onConfirm:e,maxItems:d("WAWebServerPropConstants").MULTICAST_LIMIT_GLOBAL,title:h._(/*BTDS*/"__JHASH__Pz11_y6jv6u__JHASH__"),listType:d("WAWebSelectModal.react").ListType.ChatSelectModal,onCancel:f})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebCaptureDrawer.react",["fbt","WAFilteredCatch","WALogger","WANullthrows","WAShiftTimer","WAWebAttachMediaCollection","WAWebBizBotTosUtils","WAWebCameraIcon.react","WAWebCanvasUtils","WAWebDataUrlToBlob","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebFileUtils","WAWebGuidePopup.react","WAWebMediaCapture","WAWebMediaEditor.react","WAWebMediaOpaqueData","WAWebMiscErrors","WAWebModalManager","WAWebNoop","WAWebObjectFit.react","WAWebReturnIcon.react","WAWebRound.react","WAWebSpinner.react","WAWebUnstyledButton.react","WAWebVelocityTransitionGroup","WAWebVideo.react","WAWebWamEnumMediaPickerOriginType","WAWebWamMediaPickerStatsLogger","asyncToGeneratorRuntime","react","stylex","useLazyRef","useWAWebStableCallback","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g,h){var i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["captureDrawer:render Unhandled video capture state ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["CaptureDrawer:onCapture can not get 2d context"]);o=function(){return a};return a}e=k||d("react");var p=i||(i=c("react")),q=e.useEffect,r=e.useImperativeHandle,s=e.useRef,t=e.useState,u={video:{width:"xh8yej3",height:"x5yr21d",opacity:"x1hc1fzr",transitionProperty:"x19991ni",transitionDuration:"x1d8287x",transitionTimingFunction:"x1j7uda5",transform:"xpk2tj9",transformOrigin:"x1bndym7",$$css:!0},videoInactive:{opacity:"xg01cxk",$$css:!0},retakeBtn:{display:"x78zum5",alignItems:"x6s0dn4",cursor:"x1ypdohk",$$css:!0},videoContainer:{zIndex:"xhtitgo",width:"xh8yej3",height:"x5yr21d",$$css:!0}},v="CAPTURE_MEDIA",w={ANIMATING:"ANIMATING",LOADING:"LOADING",RECORDING:"RECORDING",SENDING:"SENDING"},x=function(a){if(a.current==null)return;window.URL.revokeObjectURL(a.current);a.current=null};e=p.forwardRef(a);function a(a,e){var f=babelHelpers["extends"]({},a),g=f.chat,i=f.disposeStream,k=f.onCaptured,y=f.onBack,z=f.onSend;a=h._(/*BTDS*/"__JHASH__oIv2srgU-uj__JHASH__");var A=s(null),B=s(null),C=s(null),D=s(null),E=t(void 0),F=E[0],G=E[1];E=t(void 0);var H=E[0],I=E[1];E=t(w.ANIMATING);var J=E[0],K=E[1];E=t(void 0);var L=E[0],M=E[1],N=c("useWAWebStableCallback")(function(a,b){if(!a){J===w.ANIMATING&&K(w.LOADING);return}B.current==null?void 0:B.current();B.current=b;K(w.LOADING);M(a);d("WAWebMediaCapture").isSrcObjectInVideoElement()||(a?(x(C),C.current=window.URL.createObjectURL(a)):x(C))}),O=c("useLazyRef")(function(){return new(d("WAShiftTimer").ShiftTimer)(function(a){var b=a.stream;a=a.disposeStream;N(b,a)})}),P=c("useLazyRef")(function(){return new(d("WAShiftTimer").ShiftTimer)(function(a){var b=a.stream;a=a.disposeStream;b&&a&&(B.current==null?void 0:B.current());d("WAWebMediaCapture").isSrcObjectInVideoElement()||x(C)})}),Q=function(){g&&g.setAttachMediaContents(null)},R=c("useWAWebUnmountSignal")();q(function(){O.current.onOrBefore(300,{stream:f.stream,disposeStream:f.disposeStream});return function(){O.current.cancel(),x(C),i==null?void 0:i(),A.current&&A.current.logCancel(),Q()}},[]);var S=function(a,b){O.current.forceRunNow({stream:a,disposeStream:b})};r(e,function(){return{loadNewStreamTimerUpdate:S,loadNewStream:N}});E=function(){var a;a=(a=D.current)==null?void 0:a.underlyingVideo();if(!a)return;var b=document.createElement("canvas");b.height=a.videoHeight;b.width=a.videoWidth;var e=b.getContext("2d");if(!e){d("WALogger").WARN(o());return}e.translate(b.width,0);e.scale(-1,1);e.drawImage(a,0,0,a.videoWidth,a.videoHeight);if(k)void d("WAWebCanvasUtils").canvasToBlob(b).then(function(a){if(R.aborted)return;k(a)});else{P.current.onOrBefore(500,{stream:L,disposeStream:i});e=new(d("WAWebWamMediaPickerStatsLogger").MediaPickerStatsLogger)();e.logAdd(v,"image",d("WAWebWamEnumMediaPickerOriginType").MEDIA_PICKER_ORIGIN_TYPE.MENU_CAMERA_CAPTURE);e.chatRecipients=(g==null?void 0:g.groupMetadata)?g.groupMetadata.participants.length:1;A.current=e;a=b.toDataURL("image/jpeg");e=d("WAWebDataUrlToBlob").dataURLtoBlob(a);if(g){g.attachMediaContents||g.setAttachMediaContents(new(c("WAWebAttachMediaCollection"))({chatParticipantCount:g.getParticipantCount()}));b=c("WANullthrows")(g.attachMediaContents);b.processAttachments([{file:d("WAWebFileUtils").createFile([e],"",{type:"image/jpeg"})}],void 0,g)}G(a);K(w.SENDING);M(void 0)}};e=function(a){K(w.RECORDING),I({width:a.videoWidth,height:a.videoHeight})};var T=function(){K(w.LOADING);Q();var a=d("WAWebMediaCapture").start("camera"),b=a.asyncStream;a=a.disposeStream;B.current=a;b.then(function(a){a&&(d("WAWebMediaCapture").isSrcObjectInVideoElement()||(C.current=window.URL.createObjectURL(a)),M(a))})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebMiscErrors").GetUserMedia.NotAllowedError,function(){y(),d("WAWebModalManager").ModalManager.open(p.jsx(d("WAWebGuidePopup.react").GuidePopup,{messaging:d("WAWebGuidePopup.react").Messaging.CAMERA_FAIL,type:d("WAWebGuidePopup.react").GuidePopupType.GUIDE_UNBLOCK}))}))["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebMiscErrors").GetUserMedia.GetUserMediaError,function(){y(),d("WAWebModalManager").ModalManager.open(p.jsx(d("WAWebGuidePopup.react").GuidePopup,{messaging:d("WAWebGuidePopup.react").Messaging.CAMERA_MISSING,type:d("WAWebGuidePopup.react").GuidePopupType.GUIDE_NONE}))}))},U=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){g&&(yield d("WAWebBizBotTosUtils").maybeShowBizBot1pTos(g));var e=(b==null?void 0:b.isViewOnce)===!0;b=(b==null?void 0:b.isWamoSub)===!0;if(!z)d("WALogger").ERROR(n()).sendLogs("capture-drawer-no-onSend");else if(a.length===0)d("WALogger").ERROR(m()).sendLogs("capture-drawer-no-img");else{a=c("WANullthrows")(a[0]);var f=a.media,h=a.mentionedJidList;a=a.groupMentions;var i=f.file;if(i instanceof Blob){z({getImg:c("WAWebMediaOpaqueData").createFromData(i,i.type),caption:(i=f.caption)!=null?i:void 0,isViewOnce:!!e,mentionedJidList:h,groupMentions:a,isWamoSub:b});(f=A.current)==null?void 0:f.logSend({isViewOnce:!!e})}Q()}});return function(b,c){return a.apply(this,arguments)}}(),V,W,X,Y,Z=f.theme==="capture-cover"?"cover":"contain";switch(J){case w.ANIMATING:case w.LOADING:Y=p.jsx(d("WAWebSpinner.react").Spinner,{stroke:4,size:50});if(J===w.ANIMATING)break;case w.RECORDING:var $=(j||(j=c("stylex")))(u.video,L&&J===w.LOADING&&u.videoInactive);e=L?p.jsx(c("WAWebVideo.react"),{autoPlay:!0,ref:D,onPlay:e,src:C.current!=null?C.current:void 0,srcObject:C.current!=null?void 0:L}):null;X=L?p.jsx("div",{className:"xh8yej3 x5yr21d",children:p.jsx(c("WAWebObjectFit.react"),{type:Z,size:H,children:p.jsx("div",{className:$,"data-animage-capture-webcam":!0,children:e})})},"webcam"):null;V=J===w.RECORDING?p.jsx("div",{className:"x10l6tqk x2rgi xtzzx4i xd8oflk xg01cxk",children:p.jsx(d("WAWebRound.react").Round,{large:!0,label:a,onClick:E,children:p.jsx(d("WAWebCameraIcon.react").CameraIcon,{})})},"btn-capture"):null;break;case w.SENDING:X=p.jsx(c("WAWebObjectFit.react"),{type:Z,size:H,children:p.jsx("img",{alt:"",className:"x10l6tqk xh8yej3 x5yr21d xqcmdr3 xxkxylk","data-animate-capture-snapshot":!0,src:F})});if(g){$=c("WANullthrows")(g.attachMediaContents);X=p.jsx(d("WAWebMediaEditor.react").MediaEditor,{theme:d("WAWebMediaEditor.react").MediaTheme.CAPTURE,chat:g,initCaption:null,mediaCollection:$,onDropText:c("WAWebNoop"),onSendMedia:U})}W=p.jsxs(c("WAWebUnstyledButton.react"),{xstyle:u.retakeBtn,onClick:T,children:[p.jsx("div",{className:"x2lah0s x1w0mnb x7o08j2",children:p.jsx(d("WAWebReturnIcon.react").ReturnIcon,{"aria-hidden":!0})}),h._(/*BTDS*/"__JHASH__gzo29kra-Qa__JHASH__")]});break;default:d("WALogger").LOG(l(),J)}e=p.jsx("div",{className:"x1n2onr6 xhtitgo x9f619 x78zum5 x6s0dn4 xl56j7k x5sx7kw xexx8yu xc73u3c x10b6aqq x5ib6vp x1m8r95a",children:p.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"pop_delay",children:V})});return p.jsxs(c("WAWebDrawer.react"),{theme:f.theme,tsNavigationData:{surface:"camera"},children:[p.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:a,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.OFFSET,focusBackOrCancel:!0,onCancel:f.onBack,children:W}),p.jsxs(c("WAWebDrawerBody.react"),{overflow:"hidden",children:[p.jsxs("div",{className:"x1n2onr6 x78zum5 x1iyjqo2 x6s0dn4 xl56j7k xh8yej3",children:[Y,p.jsx("div",{className:"x10l6tqk x13vifvy x17qophe x78zum5 xdt5ytf x6s0dn4 xh8yej3 x5yr21d",children:p.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"capture",xstyle:u.videoContainer,children:X})})]}),e]})]},"attach-capture-modal")}a.displayName=a.name+" [from "+f.id+"]";a=e;g["default"]=a}),226);
__d("WAWebCaptureMediaDrawer.react",["WAWebCaptureDrawer.react","WAWebMedia","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.chat,e=a.disposeStream,f=a.onCancel,g=a.onCaptureSent,h=a.onClose;a=a.stream;var j=function(a){var c,e=a.getImg,f=a.caption,i=a.isViewOnce,j=a.mentionedJidList;a=a.isWamoSub;var k=b,l=k.composeQuotedMsg;k.composeQuotedMsg=null;c=((c=k.getComposeContents())==null?void 0:c.ctwaContext)||void 0;d("WAWebMedia").prepRawMedia(e,{}).sendToChat(k,{caption:f,mentionedJidList:j,quotedMsg:l,ctwaContext:c,isViewOnce:i,isWamoSub:a});g();h()};return i.jsx(c("WAWebCaptureDrawer.react"),{onBack:function(){h(),f()},chat:b,caption:!0,theme:"capture-contain",onSend:j,stream:a,disposeStream:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCartDeleteIcon.react",["fbt","WAWebDeleteIcon.react","WAWebSvgButton.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k={deleteIcon:{color:"xfect85",":hover_color":"x1fumy",$$css:!0}};function a(a){a=a.onClick;return j.jsx(c("WAWebSvgButton.react"),{"aria-label":h._(/*BTDS*/"__JHASH__8fFKZkKIBXi__JHASH__"),Icon:d("WAWebDeleteIcon.react").DeleteIcon,title:h._(/*BTDS*/"__JHASH__8fFKZkKIBXi__JHASH__"),xstyle:k.deleteIcon,onClick:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebChatAgentMsgInfoCell.react",["WAWebChatCell.react","WAWebClock","WAWebDetailImage.react","WAWebEmojiText.react","WAWebMsgGetters","react","useWAWebMsgValues"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.agentName,e=a.msg;a=a.theme;e=d("useWAWebMsgValues").useMsgValues(e.id,[d("WAWebMsgGetters").getFrom,d("WAWebMsgGetters").getT]);var f=e[0];e=e[1];e=d("WAWebClock").Clock.relativeDateAndTimeStr(e);var g=d("WAWebDetailImage.react").getSize(d("WAWebDetailImage.react").DetailImageSize.Small);return i.jsx(c("WAWebChatCell.react"),{contextEnabled:function(){return!1},image:i.jsx("div",{className:"x1n2onr6",style:{height:g,width:g},children:i.jsx(d("WAWebDetailImage.react").DefaultIcon,{id:f})}),primary:i.jsx(d("WAWebEmojiText.react").EmojiText,{direction:"auto",text:b,titlify:!0,ellipsify:!0}),secondary:i.jsx("span",{title:e,children:e}),className:"x1sqbtui x1bnvlk4",theme:a,idle:!0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebChatContactMsgInfoCell.react",["WAWebCellFrame.react","WAWebClock","WAWebEmojiText.react","WAWebFlex.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.icon,e=a.t;a=a.title;e=e!=null?d("WAWebClock").Clock.relativeDateAndTimeStr(e):"-";b=i.jsxs(d("WAWebFlex.react").FlexRow,{align:"center",className:"x6ikm8r x10wlt62 xlyipyv xeaf4i8",testid:void 0,children:[b,i.jsx(d("WAWebEmojiText.react").EmojiText,{direction:"auto",text:a,titlify:!0,ellipsify:!0})]});return i.jsx(c("WAWebCellFrame.react"),{primary:b,secondary:e,theme:"plain",idle:!0,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebChatKeptByMsgInfoCell.react",["WAWebChatCell.react","WAWebClock","WAWebContactGetters","WAWebDetailImage.react","WAWebEmojiText.react","WAWebFrontendContactGetters","react","useWAWebContactValues"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.contact,e=a.kicTimestampMs;a=a.theme;b=d("useWAWebContactValues").useContactValues(b.id,[d("WAWebContactGetters").getId,d("WAWebContactGetters").getName,d("WAWebFrontendContactGetters").getFormattedName,d("WAWebContactGetters").getNotifyName]);var f=b[0],g=b[1],h=b[2];b=b[3];f=i.jsx(d("WAWebDetailImage.react").DetailImage,{id:f});var j;e!=null&&(j=d("WAWebClock").Clock.relativeDateAndTimeStr(e/1e3));e=i.jsx("span",{title:j,children:j});var k;!g&&b&&(k=i.jsx(d("WAWebEmojiText.react").EmojiText,{className:"xxayilr",direction:"auto",text:b}));return i.jsx(c("WAWebChatCell.react"),{contextEnabled:function(){return!1},image:f,primary:i.jsx(d("WAWebEmojiText.react").EmojiText,{direction:"auto",text:h,titlify:!0,ellipsify:!0}),secondary:e,secondaryDetail:k,style:"x1sqbtui x1bnvlk4",theme:a,idle:!0,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCommunityAdminPromotionNotificationFlow.react",["$InternalEnum","WALogger","WAWebChatCollection","WAWebChatCommunityUtils","WAWebCommunityAdminPromotionNotificationPopup.react","WAWebCommunityAdminSelfDemotePopup.react","WAWebCommunityLogEvents","WAWebCommunityPromoteDemotePopups.react","WAWebModalManager","WAWebModifyParticipantsGroupAction","WAWebNux","WAWebWamEnumCadminDemoteOriginType","WAWebWamEnumCadminDemoteResultType","react","useWAWebFlow","useWAWebNux"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error sending demote community participants iq"]);i=function(){return a};return a}var j=h||c("react"),k=b("$InternalEnum").Mirrored(["PromotionNotification","Demote"]);function a(a){var b=a.communityMetadata;a=d("WAWebNux").getCommunityAdminPromotionNuxKey(b.id.toString());a=c("useWAWebNux")(a);var e=a[2];a=d("useWAWebFlow").useFlow(k.PromotionNotification);var f=a[0],g=a[1];if(g.step==null)return null;var h;switch(g.step){case k.PromotionNotification:a=function(){g.push(k.Demote)};var l=function(){e(),g.end()};h=j.jsx(c("WAWebCommunityAdminPromotionNotificationPopup.react"),{onDemote:a,onContinue:l});break;case k.Demote:var m=d("WAWebChatCommunityUtils").isCommunitySuperAdmin(d("WAWebChatCollection").ChatCollection.get(b.id)),n=function(a){d("WAWebCommunityLogEvents").logCadminDemoteEvent(d("WAWebWamEnumCadminDemoteOriginType").CADMIN_DEMOTE_ORIGIN_TYPE.PROMOTION_NOTIFICATION,a,b.participants.getAdmins().length===1||m)},o=function(a){a===void 0&&(a=!1),n(a?d("WAWebWamEnumCadminDemoteResultType").CADMIN_DEMOTE_RESULT_TYPE.RETRY_CANCEL:d("WAWebWamEnumCadminDemoteResultType").CADMIN_DEMOTE_RESULT_TYPE.CANCEL),d("WAWebModalManager").ModalManager.close()};a=function a(c){c===void 0&&(c=!1);e();var f=b.participants.getMeParticipant(),h=d("WAWebChatCollection").ChatCollection.get(b.id);f&&h&&(f.contact.pendingAction++,d("WAWebModifyParticipantsGroupAction").demoteCommunityParticipants(h,[f]).then(function(){n(c?d("WAWebWamEnumCadminDemoteResultType").CADMIN_DEMOTE_RESULT_TYPE.RETRY_SUCCESS:d("WAWebWamEnumCadminDemoteResultType").CADMIN_DEMOTE_RESULT_TYPE.SUCCESS)})["catch"](function(b){d("WALogger").WARN(i()).verbose().devConsole(b).sendLogs("community-admin-self-demote-failed"),n(c?d("WAWebWamEnumCadminDemoteResultType").CADMIN_DEMOTE_RESULT_TYPE.RETRY_FAILURE:d("WAWebWamEnumCadminDemoteResultType").CADMIN_DEMOTE_RESULT_TYPE.FAILURE),d("WAWebModalManager").ModalManager.open(j.jsx(d("WAWebCommunityPromoteDemotePopups.react").CommunityAdminDemoteErrorPopup,{onParticipantDemote:function(){return a(!0)},onCancel:function(){return o(!0)},isMe:!0}))})["finally"](function(){f.contact.pendingAction--}));c?d("WAWebModalManager").ModalManager.close():g.end()};l=function(){n(d("WAWebWamEnumCadminDemoteResultType").CADMIN_DEMOTE_RESULT_TYPE.FAILURE),g.pop()};h=j.jsx(c("WAWebCommunityAdminSelfDemotePopup.react"),{onDemote:a,onCancel:o,onFailure:l,isCommunitySuperAdmin:m,parentGroupChat:d("WAWebChatCollection").ChatCollection.get(b.id)});break}return j.jsx(f,{flow:g,children:h})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCommunityExistingGroupConfirmationPopup.react",["fbt","WAWebConfirmPopup.react","WAWebEmojiText.react","WAWebFbtCommon","WAWebModalManager","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.communityName,e=a.groupCount,f=a.onContinue;a=b!=null?h._(/*BTDS*/"__JHASH__15SrpYV2OTc__JHASH__",[h._plural(e),h._param("community-name",j.jsx(d("WAWebEmojiText.react").EmojiText,{text:b}))]):h._(/*BTDS*/"__JHASH__kdAMm48oMlX__JHASH__",[h._plural(e)]);b=function(){d("WAWebModalManager").ModalManager.close()};e=function(){f(),d("WAWebModalManager").ModalManager.close()};return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:e,onCancel:b,okText:c("WAWebFbtCommon")("Continue"),children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebCommunityExistingGroupsConfirmationDrawer.react",["fbt","WAWebChat.react","WAWebChatCollection","WAWebCommunityAddGroupConfirmationPopup.react","WAWebCommunityExistingGroupConfirmationPopup.react","WAWebDetailImage.react","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDrawerSection.react","WAWebFlex.react","WAWebFlexItem.react","WAWebModalManager","WAWebSettingsIcon.react","WAWebToastbar.react","WAWebUISpacing","WAWebWDSButton","WAWebWDSText.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k={header:{maxWidth:"x55n99s",textAlign:"x2b8uid",lineHeight:"x1evy7pa",$$css:!0},section:{maxWidth:"x13qrzjo",$$css:!0},disclaimerText:{textAlign:"x2b8uid",lineHeight:"x16h55sf",$$css:!0},toastbar:{position:"xixxii4",$$css:!0},row:{width:"xh8yej3",justifyContent:"x1qughib",$$css:!0},column:{width:"xh8yej3",$$css:!0}};function l(a){a=a.onClick;return j.jsx(d("WAWebToastbar.react").WAWebToastbar,{dismissible:!1,wrapperXstyle:k.toastbar,children:j.jsx(d("WAWebWDSButton").WDSButtonPrimary,{onClick:a,testid:void 0,children:h._(/*BTDS*/"__JHASH__mD_BUzTdnrB__JHASH__")})})}l.displayName=l.name+" [from "+f.id+"]";function m(a){var b=a.isCommunityAdmin;a=a.selectedGroups;var e=null;b?e=a.length===1?h._(/*BTDS*/"__JHASH__oi22ZeJ_QOv__JHASH__"):h._(/*BTDS*/"__JHASH__jXayA_3eUKp__JHASH__"):e=a.length===1?h._(/*BTDS*/"__JHASH__qLFaNN8h5s9__JHASH__"):h._(/*BTDS*/"__JHASH__0ngjnh0_QhU__JHASH__");return j.jsx(c("WAWebFlexItem.react"),{align:"center",xstyle:[k.section,d("WAWebUISpacing").uiMargin.top8,d("WAWebUISpacing").uiPadding.bottom30,d("WAWebUISpacing").uiPadding.top10],children:j.jsxs(d("WAWebWDSText.react").WDSTextSmall,{color:"secondary",xstyle:k.disclaimerText,children:[e," "]})})}m.displayName=m.name+" [from "+f.id+"]";b=j.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.communityName,f=a.isCommunityAdmin,g=a.isParentGroupClosed,i=a.onBack,n=a.onGroupPermissions,o=a.onSubmit,p=a.parentGroupId,q=a.selectedGroups;a=function(){return j.jsx(d("WAWebFlex.react").FlexColumn,{align:"start",xstyle:[d("WAWebUISpacing").uiMargin.bottom16,k.column],children:q.map(function(a){return j.jsxs(d("WAWebFlex.react").FlexRow,{xstyle:k.row,align:"center",children:[j.jsx(c("WAWebFlexItem.react"),{grow:0,children:j.jsx(d("WAWebChat.react").ChatOrContact,{theme:"plain",chat:d("WAWebChatCollection").ChatCollection.assertGet(a.id),mode:d("WAWebChat.react").Mode.INFO,noContext:!0,doNotBoldUnread:!0})}),j.jsx(d("WAWebWDSButton").WDSButtonPlainWhite,{icon:d("WAWebSettingsIcon.react").SettingsIcon,onClick:function(){return n(a.id)},ariaLabel:h._(/*BTDS*/"__JHASH__UCQkJmM5XcH__JHASH__")})]},a.id.toString())})})};var r=function(){void o(q)},s=function(){!f?d("WAWebModalManager").ModalManager.open(j.jsx(c("WAWebCommunityAddGroupConfirmationPopup.react"),{selectedGroups:q,onOK:function(){d("WAWebModalManager").ModalManager.close(),r()},onCancel:function(){return d("WAWebModalManager").ModalManager.close()}})):g?r():d("WAWebModalManager").ModalManager.open(j.jsx(c("WAWebCommunityExistingGroupConfirmationPopup.react"),{onContinue:r,communityName:e,groupCount:q.length}))},t=h._(/*BTDS*/"__JHASH__xseqONP2v0z__JHASH__",[h._plural(q.length,"group-count"),h._param("community-name",e)]);return j.jsxs(c("WAWebDrawer.react"),{children:[j.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL,onBack:i}),j.jsx(c("WAWebDrawerBody.react"),{ref:b,children:j.jsx(c("WAWebDrawerSection.react"),{animation:!1,theme:"full-height",children:j.jsxs(d("WAWebFlex.react").FlexColumn,{xstyle:[(i=d("WAWebUISpacing")).uiMargin.horiz40,i.uiMargin.bottom40],children:[j.jsx(c("WAWebFlexItem.react"),{align:"center",xstyle:i.uiMargin.top30,children:j.jsx(d("WAWebDetailImage.react").DetailImage,{id:p,size:104,quality:d("WAWebDetailImage.react").DetailImageQuality.High,shape:d("WAWebDetailImage.react").DetailImageShape.Squircle})}),j.jsx(d("WAWebWDSText.react").WDSTextLarge,{xstyle:[i.uiMargin.top20,i.uiMargin.horizAuto,i.uiMargin.bottom0,k.header],children:t}),j.jsx(m,{isCommunityAdmin:f,selectedGroups:q}),a()]})})}),j.jsx(l,{onClick:s})]})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),226);
__d("WAWebCommunityExistingGroupsDrawer.react",["fbt","WAAbortError","WALogger","WANullthrows","WAPromiseRaceAbort","WAWebArrowForwardIcon.react","WAWebChatCollection","WAWebChatModel","WAWebChatParticipantList.react","WAWebCommunityGatingUtils","WAWebCommunitySubgroupsLimitReachedPopup.react","WAWebConfirmPopup.react","WAWebContactCollection","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebEmojiText.react","WAWebFbtCommon","WAWebFlatListContainer.react","WAWebFlatListController","WAWebFocusIndicator","WAWebGroupMetadataCollection","WAWebGroupType","WAWebKeyboardHotKeys.react","WAWebL10N","WAWebModalManager","WAWebMultiSelectChatList.react","WAWebMultiSelection","WAWebNameGroupModal.react","WAWebNoop","WAWebRichTextField.react","WAWebRound.react","WAWebServerPropsModel","WAWebSetSubjectGroupAction","WAWebSingleSelection","WAWebSpinner.react","WAWebText_DONOTUSE.react","WAWebUISpacing","WAWebUnstyledButton.react","WAWebVelocityTransitionGroup","asyncToGeneratorRuntime","lodash","react","stylex","useLazyRef","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g,h){var i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["name_group_modal:onSetSubject failed"]);l=function(){return a};return a}e=k||d("react");var m=i||(i=c("react")),n=e.useEffect,o=e.useRef,p=e.useState,q={drawerSection:{zIndex:"xhtitgo",display:"x78zum5",justifyContent:"x1l1ennw",paddingBottom:"x1gan7if",marginTop:"xjv05ge",textAlign:"x2b8uid",$$css:!0},paragraph:{paddingTop:"x1p5oq8j",paddingEnd:"xxbr6pl",paddingBottom:"xwxc41k",paddingStart:"xbbxn1n",fontSize:"x1f6kntn",lineHeight:"x37zpob",textAlign:"x2b8uid",color:"x16cd2qt",backgroundColor:"x150wa6m",borderBottomWidth:"xso031l",borderBottomStyle:"x1q0q8m5",borderBottomColor:"xcsjwe9",overflowWrap:"x1mzt3pk",$$css:!0},createNewGroupText:{color:"x1eqckd8",$$css:!0}};e=m.forwardRef(a);function a(a,e){a=babelHelpers["extends"]({},a);var f=a.onBack,g=a.onContinue,i=a.onCreateNewGroup,k=a.addedExistingGroups,r=a.groupsSuggestedByMeToCommunity,s=a.currentSubgroupCount,t=a.isCommunityAdmin,u=a.isCommunityCreation,v=a.isParentGroupClosed,w=a.flowSelectedGroups,x=a.setFlowSelectedGroups,y=u===!0?d("WAWebCommunityGatingUtils").getParentGroupLinkLimitCommunityCreation():d("WAWebCommunityGatingUtils").getParentGroupLinkLimit(),z=y-s,A=Array.from((a=k)!=null?a:[]);s=p("");a=s[0];var B=s[1],C=c("useLazyRef")(function(){return new(c("WAWebMultiSelection"))([],function(a){return a.id.toString()})}),D=c("useLazyRef")(function(){return new(c("WAWebSingleSelection"))([],function(a){return a.id.toString()})});s=o(null);var E=p(w),F=E[0],G=E[1];E=p([]);var H=E[0],I=E[1];E=p(!0);var J=E[0],K=E[1];E=o(new(c("WAWebFlatListController"))());var L=o(null);n(function(){var a;(a=L.current)==null?void 0:a.triggerFocus()});var M=function(){K(!0);var a=d("WAWebContactCollection").ContactCollection.getGroupContacts();a=a.filter(function(a){var b=d("WAWebChatCollection").ChatCollection.get(a.id.toString());b=b==null?void 0:(b=b.groupMetadata)==null?void 0:b.participants;return b!=null&&b.iAmAdmin()&&!(k==null?void 0:k.has(a.id))});a=a.filter(function(a){a=c("WAWebGroupMetadataCollection").get(a.id.toString());return(a==null?void 0:a.groupType)===d("WAWebGroupType").GroupType.DEFAULT||(a==null?void 0:a.groupType)===d("WAWebGroupType").GroupType.LINKED_SUBGROUP});I(a);K(!1)};n(function(){M(),w.forEach(function(a){C.current.setVal(a,!0)})},[]);var N=function(){var a;c("WAWebFocusIndicator").shouldIndicateFocus();(a=L.current)==null?void 0:a.triggerFocus()},O=function(){x(F),g()},P=function(){var a;B("");(a=L.current)==null?void 0:a.clearTextInput()},Q=function(a){C.current.setVal(a,!1),G(C.current.getSelected()),P()},R=function(a,b){Q(b)},S=function(a){a==null?void 0:a.preventDefault(),D.current.setFirst(!0)},T=function(a){D.current.unset();(a=L.current)==null?void 0:a.triggerFocus()},U=c("useWAWebUnmountSignal")(),V=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=a;yield c("WAPromiseRaceAbort")(d("WAWebSetSubjectGroupAction").setGroupSubject(b,a),U)["catch"](d("WAAbortError").catchAbort(c("WAWebNoop")))["catch"](function(a){d("WALogger").WARN(l()).devConsole(a)});d("WAWebModalManager").ModalManager.close();G(C.current.getSelected());P()});return function(b,c){return a.apply(this,arguments)}}(),W=function(){d("WAWebModalManager").ModalManager.open(m.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){return d("WAWebModalManager").ModalManager.close()},okText:c("WAWebFbtCommon")("OK"),children:h._(/*BTDS*/"__JHASH__TRqQJIz5tfr__JHASH__")}))},X=function(a,b){if(F.length>=z&&b)d("WAWebModalManager").ModalManager.open(m.jsx(c("WAWebCommunitySubgroupsLimitReachedPopup.react"),{maxSubgroups:y,isCommunityCreation:u}));else{b=c("WAWebGroupMetadataCollection").get(a.id);var e=(b==null?void 0:b.isUnnamed)===!0;if(e){e=c("WANullthrows")(d("WAWebChatCollection").ChatCollection.get(a.id.toString()));var f=c("WANullthrows")(C.current.list.find(function(b){return b.id.toString()===a.id.toString()})),g=h._(/*BTDS*/"__JHASH__RYurgcrM-Ga__JHASH__");d("WAWebModalManager").ModalManager.open(m.jsx(c("WAWebNameGroupModal.react"),{chat:e,subtext:g,onCancel:function(){Q(f),d("WAWebModalManager").ModalManager.close()},onOK:V,editable:b==null?void 0:b.canSetSubject(),editRestrictionInfo:(b==null?void 0:b.restrict)?W:void 0}))}else G(C.current.getSelected()),P()}},Y=function(){var a=c("lodash").differenceWith(H,A,function(a,b){return a.id.equals(b)});return a},Z;F.length>0&&(Z=m.jsx(d("WAWebRound.react").Round,{className:"x1r0gsg0 xkrivgy xat24cr x1gryazu",testid:void 0,label:h._(/*BTDS*/"__JHASH__FbbRPselTxy__JHASH__"),onClick:O,children:m.jsx(d("WAWebArrowForwardIcon.react").ArrowForwardIcon,{directional:!0})}));O=function(a){var b=c("WAWebGroupMetadataCollection").get(a.id.toString());b=(b==null?void 0:b.groupType)===d("WAWebGroupType").GroupType.LINKED_SUBGROUP;var e=Boolean(r==null?void 0:r.some(function(b){return b.equals(a.id)}));return b||e};var $=function(a,b){if(!b||!(a instanceof d("WAWebChatModel").Chat))return;b=c("WAWebGroupMetadataCollection").get(a.id.toString());b=(b==null?void 0:b.groupType)===d("WAWebGroupType").GroupType.LINKED_SUBGROUP;if(b){b=(b=a.groupMetadata)==null?void 0:(b=b.getParentGroupChat())==null?void 0:b.formattedTitle;return h._(/*BTDS*/"__JHASH__TkAYfl948fX__JHASH__",[h._param("community-name",m.jsx(d("WAWebEmojiText.react").EmojiText,{text:b}))])}else if(Boolean(r==null?void 0:r.some(function(b){return b.equals(a.id)})))return h._(/*BTDS*/"__JHASH__JzMN274gz_1__JHASH__")},aa=Y();Y=m.jsx(c("WAWebMultiSelectChatList.react"),{ref:s,active:D.current,selections:C.current,flatListController:E.current,onLeaveList:N,searchText:a,maxChats:z,onSelectionChanged:X,chatFilter:function(a){return aa.some(function(b){return b.id.equals(a.id)})},excludeBroadcast:!0,excludeContacts:!0,isCommunityExistingGroupsDrawer:!0,isDisabled:O,customItemSecondaryText:$});H.length>0?!t?s=h._(/*BTDS*/"__JHASH__ehGsQNtOkd9__JHASH__"):v?s=h._(/*BTDS*/"__JHASH__8ztYXgjINzG__JHASH__"):s=h._(/*BTDS*/"__JHASH__1Q_cmGMvFRr__JHASH__"):s=m.jsxs(m.Fragment,{children:[h._(/*BTDS*/"__JHASH__3noVCKm6Oz3__JHASH__")," ",m.jsx(c("WAWebUnstyledButton.react"),{xstyle:q.createNewGroupText,onClick:i,children:h._(/*BTDS*/"__JHASH__rNMa5amjd6Y__JHASH__")})]});X=h._(/*BTDS*/"__JHASH__5dieFWhOI_t__JHASH__");t=(O=h._param("groupcount",F.length,[0]),$=h._param("subgroups-left-to-max",z,[0]),h._(/*BTDS*/"__JHASH__VFxFPqJGZVO__JHASH__",[O,$,h._implicitParam("=m1",m.jsx("span",{dir:c("WAWebL10N").LR("ltr","rtl"),children:h._(/*BTDS*/"__JHASH__RIgZ08rd6Yl__JHASH__",[O,$,h._implicitParam("=m2",m.jsx("span",{dir:c("WAWebL10N").LR("ltr","rtl"),children:h._(/*BTDS*/"__JHASH__3Jegr8Q478A__JHASH__",[O,$])}))])}))]));return m.jsxs(c("WAWebDrawer.react"),{ref:e,children:[m.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:t,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL,onBack:f}),m.jsxs(c("WAWebDrawerBody.react"),{children:[m.jsx(d("WAWebText_DONOTUSE.react").TextParagraph,{xstyle:q.paragraph,children:s}),J?m.jsx("div",babelHelpers["extends"]({className:"x150wa6m x78zum5 xl56j7k x4i7bpe x4uap5 x1sgudl8 xkhd6sd"},{children:m.jsx(d("WAWebSpinner.react").Spinner,{})})):m.jsxs(m.Fragment,{children:[m.jsxs("div",babelHelpers["extends"]({className:"x1gz9zih xsag5q8 x1b9tyad x10wh9bi x1wdrske x8viiok x18hxmgj x150wa6m"},{children:[F.length>0&&m.jsx("div",babelHelpers["extends"]({"data-list-scroll-container":!0},(j||(j=c("stylex"))).props(d("WAWebUISpacing").uiPadding.top25),{children:m.jsx(c("WAWebChatParticipantList.react"),{theme:"list-names",contacts:F,onDelete:R,onFocusSearch:N})})),m.jsx(d("WAWebKeyboardHotKeys.react").HotKeys,{handlers:{down:S},onFocus:T,children:m.jsx(d("WAWebRichTextField.react").RichTextField,{testid:void 0,title:X,ref:L,value:a,showRemaining:!0,onChange:function(a){a=a.text;return B(a)},placeholder:X,maxLength:d("WAWebServerPropsModel").ServerProps.maxSubject,focusOnMount:!0})})]})),m.jsx(c("WAWebFlatListContainer.react"),{className:"x1n2onr6 x1iyjqo2 xs83m0k x18xmwgd x6ikm8r x1odjw0f x150wa6m",flatListControllers:[E.current],children:Y})]}),m.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"btn",xstyle:q.drawerSection,children:Z})]})]})}a.displayName=a.name+" [from "+f.id+"]";a=e;g["default"]=a}),226);
__d("WAWebCommunityGeneralChatFailedParticipantsModal.react",["fbt","WAWebConfirmPopup.react","WAWebContactCollection","WAWebFbtCommon","WAWebModalManager","WAWebWidFactory","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function k(a){var b;a=a.reduce(function(a,b){var c=d("WAWebContactCollection").ContactCollection.get(b);c!=null&&c.shortName?a.push(c.shortName):c!=null&&c.name?a.push(c.name):a.push(d("WAWebWidFactory").createWid(b).user);return a},[]);a.length===1?b=h._(/*BTDS*/"__JHASH__RHrqbslj_d___JHASH__",[h._param("participant_name_0",a[0])]):a.length===2?b=h._(/*BTDS*/"__JHASH__2yWSpjItYBr__JHASH__",[h._param("participant_name_0",a[0]),h._param("participant_name_1",a[1])]):a.length===3?b=h._(/*BTDS*/"__JHASH__mTWdq-rcWPJ__JHASH__",[h._param("participant_name_0",a[0]),h._param("participant_name_1",a[1]),h._param("participant_name_2",a[2])]):b=h._(/*BTDS*/"__JHASH__aXi3Y5yhx68__JHASH__",[h._param("participant_name_0",a[0]),h._param("participant_name_1",a[1]),h._param("participant_name_2",a[2]),h._param("leftover_participant_count",a.length-3)]);return b}function a(a){a=a.failedParticipantJids;a=k(a);return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{okText:c("WAWebFbtCommon")("OK"),onOK:function(){return d("WAWebModalManager").ModalManager.close()},children:a})}a.displayName=a.name+" [from "+f.id+"]";g.GeneralChatFailedParticipantsModal=a}),226);
__d("WAWebCommunitySubgroupComparator",[],(function(a,b,c,d,e,f){function a(a,b){if(a.announcementGroup===!0)return-1;return b.announcementGroup===!0?1:a.name.toLowerCase().localeCompare(b.name.toLowerCase())}f.SubgroupComparator=a}),66);
__d("WAWebCommunityHomeGroupsManager.react",["fbt","WANullthrows","WAWebAnnouncementSpeakerIcon.react","WAWebCellFrame.react","WAWebChatCollection","WAWebCommunityCells.react","WAWebCommunityGatingUtils","WAWebCommunityGetParticipantInfoText","WAWebCommunityRemoveSubgroup","WAWebCommunitySubgroupComparator","WAWebCommunitySubgroupsLimitReachedPopup.react","WAWebDetailImage.react","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDrawerSection.react","WAWebEmojiText.react","WAWebExternalLink.react","WAWebFaqUrl","WAWebFbtCommon","WAWebGroupMetadataCollection","WAWebGroupType","WAWebL10N","WAWebModalManager","WAWebNavigableFlatList.react","WAWebRoundShape.react","WAWebSingleSelection","WAWebSpinner.react","WAWebSquircleIcon.react","WAWebUISpacing","WAWebUnjoinedSubgroupMetadataCollection","WAWebUnstyledButton.react","WAWebVelocityTransitionGroup","WAWebWDSText.react","react","useLazyRef","useWAWebFocusOnMount","useWAWebModelValues"],(function(a,b,c,d,e,f,g,h){var i,j;b=j||d("react");var k=i||(i=c("react")),l=b.useMemo,m=b.useState,n=d("WAWebCommunityCells.react").RemoveButtonFactory(),o={icon:{height:"x112a4uq",width:"x15jighw",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},announcementIcon:{backgroundColor:"x13vkxft",$$css:!0},announcementSpeaker:{color:"x1o6zcso",$$css:!0},communitySettingsButton:{color:"x1n68mz9",$$css:!0},communitySettingsSection:{backgroundColor:"x15g3fpr",$$css:!0}},p=k.jsx(c("WAWebSquircleIcon.react"),{xstyle:[o.icon,o.announcementIcon],transparent:!0,children:k.jsx(d("WAWebAnnouncementSpeakerIcon.react").AnnouncementSpeakerIcon,{directional:!0,height:40,width:40,iconXstyle:o.announcementSpeaker})}),q=function(a){var b,e=d("WAWebChatCollection").ChatCollection.get(a.toString());e?(b=c("WANullthrows")(e.groupMetadata),e=e.title()):(b=c("WAWebUnjoinedSubgroupMetadataCollection").assertGet(a.toString()),e=b.subject);return[b,e]};function r(a){var b=a.data,e=b.itemKey,f=b.parentId,g=b.name,i=b.icon,j=b.secondary,l=b.showRemove,o=b.subgroupWid;b=m(!1);var p=b[0],q=b[1];b=d("WAWebChatCollection").ChatCollection.get(e);e=d("useWAWebModelValues").useOptionalModelValues(b,["formattedTitle"]);var r=(e=e==null?void 0:e.formattedTitle)!=null?e:g;(b==null?void 0:(e=b.groupMetadata)==null?void 0:e.groupType)===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP&&(r=h._(/*BTDS*/"__JHASH__x2ZQLkFbyM5__JHASH__").toString());g=function(){d("WAWebCommunityRemoveSubgroup").handleRemoveSubgroup({parentId:f,removedSubgroupWid:o,removedSubgroupTitle:r,setLoading:q})};return k.jsx(c("WAWebCellFrame.react"),{primary:k.jsx(d("WAWebEmojiText.react").EmojiText,{text:r,ellipsify:!0}),image:i,secondary:j,detail:l&&(p?k.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"fade",children:k.jsx(d("WAWebSpinner.react").Spinner,{size:18,stroke:6,color:"highlight"})}):k.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"fade",children:k.jsx(n,{onClick:g,active:a.active,subgroup:o,groupName:r})}))})}r.displayName=r.name+" [from "+f.id+"]";e=k.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e,f,e,f,g=a.joinedSubgroups,i=a.unjoinedSubgroups,j=a.currentSubgroupCount,m=a.onNewGroupFlow,n=a.onExistingGroupFlow,s=a.onCommunitySettingsClick,t=a.onBack,u=a.parentId,v=d("WAWebCommunityGatingUtils").getParentGroupLinkLimit(),w=c("useLazyRef")(function(){return new(c("WAWebSingleSelection"))([],function(a){return a.itemKey})});a=c("useWAWebFocusOnMount")();var x=d("useWAWebModelValues").useOptionalModelValues(c("WAWebGroupMetadataCollection").get(u),["allowNonAdminSubGroupCreation","participants"]),y=function(){d("WAWebModalManager").ModalManager.open(k.jsx(c("WAWebCommunitySubgroupsLimitReachedPopup.react"),{maxSubgroups:v}))},z=function(){j>=v?y():n()},A=function(){j>=v?y():m()},B=l(function(){return[].concat(g,i).map(function(a){var b=q(a),e=b[0];b=b[1];if(e.defaultSubgroup===!0)return{itemKey:a.toString(),subgroupWid:a,parentId:u,name:b,icon:p,secondary:null,announcementGroup:!0,showRemove:!1};var f=k.jsx(d("WAWebDetailImage.react").DetailImage,{size:40,shape:d("WAWebDetailImage.react").DetailImageShape.Circle,id:a,hiddenSubgroupIcon:"chat-list"}),g;!e.participants.iAmMember()?g=h._(/*BTDS*/"__JHASH__4CntH5CxPUe__JHASH__"):e.participants!=null?g=d("WAWebCommunityGetParticipantInfoText").getParticipantInfoText(e.participants):g=h._(/*BTDS*/"__JHASH__mOyFeOrHiA___JHASH__",[h._param("subject",b)]);return{name:b,subgroupWid:a,parentId:u,itemKey:a.toString(),icon:k.jsx(c("WAWebRoundShape.react"),{xstyle:o.icon,transparent:!0,children:f}),secondary:g,announcementGroup:!1,showRemove:(e=x==null?void 0:x.participants.iAmAdmin())!=null?e:!1}}).sort(d("WAWebCommunitySubgroupComparator").SubgroupComparator)},[g,i,u,x==null?void 0:x.participants]),C=l(function(){return B.map(function(a){var b=a.showRemove;a=a.subgroupWid;if(b)return{itemKey:"remove-button-"+a.toString()}}).filter(Boolean)},[B]);w.current.init(C);C=(C=x==null?void 0:x.participants.iAmAdmin())!=null?C:!1;var D=c("WAWebL10N").getNormalizedLocale();D=D==="ar"||D==="fa"?"rtl":"ltr";D=C?(e=h._param("groupcount",j,[0]),f=h._param("maxsubgroups",v,[0]),h._(/*BTDS*/"__JHASH__q7K06w8FEdW__JHASH__",[e,f,h._implicitParam("=m1",k.jsx("span",{dir:D,children:h._(/*BTDS*/"__JHASH__BYch2DVTzTr__JHASH__",[e,f,h._implicitParam("=m2",k.jsx("span",{dir:D,children:h._(/*BTDS*/"__JHASH__F5CIHz4Q_c3__JHASH__",[e,f])}))])}))])):(e=h._param("groupcount",j,[0]),f=h._param("maxsubgroups",v,[0]),h._(/*BTDS*/"__JHASH__Dhv9ZKXCDXc__JHASH__",[e,f,h._implicitParam("=m1",k.jsx("span",{dir:D,children:h._(/*BTDS*/"__JHASH__MLeJ1cTZ7Uc__JHASH__",[e,f,h._implicitParam("=m2",k.jsx("span",{dir:D,children:h._(/*BTDS*/"__JHASH__X21PnJqHSi-__JHASH__",[e,f])}))])}))]));e=(x==null?void 0:x.allowNonAdminSubGroupCreation)===!0;f=k.jsx(d("WAWebExternalLink.react").ExternalLink,{href:d("WAWebFaqUrl").getMemberAddedGroupsUrl(),children:c("WAWebFbtCommon")("Learn more")});C?C=e?h._(/*BTDS*/"__JHASH__feDtcqhLjlf__JHASH__",[h._implicitParam("=m2",k.jsx(c("WAWebUnstyledButton.react"),{onClick:s,xstyle:o.communitySettingsButton,children:h._(/*BTDS*/"__JHASH__p2cEmMjgdxE__JHASH__")}))]):h._(/*BTDS*/"__JHASH__hE_dwaBZNdL__JHASH__",[h._implicitParam("=m2",k.jsx(c("WAWebUnstyledButton.react"),{onClick:s,xstyle:o.communitySettingsButton,children:h._(/*BTDS*/"__JHASH__cDv6z425hcJ__JHASH__")}))]):C=e?h._(/*BTDS*/"__JHASH__kcfz_unpYTO__JHASH__",[h._param("learn-more",f)]):h._(/*BTDS*/"__JHASH__D84G_FsDXAw__JHASH__",[h._param("learn-more",f)]);s=d("WAWebCommunityGatingUtils").memberAddedGroupsM1Enabled()?k.jsx(c("WAWebDrawerSection.react"),{xstyle:[o.communitySettingsSection,d("WAWebUISpacing").uiMargin.all30,d("WAWebUISpacing").uiMargin.top0],shadow:!1,children:k.jsx(d("WAWebWDSText.react").WDSTextMuted,{children:C})}):null;return k.jsx("div",{role:"complementary",ref:a,tabIndex:"-1","aria-label":h._(/*BTDS*/"__JHASH__RWcgaXSdSge__JHASH__"),children:k.jsxs(c("WAWebDrawer.react"),{ref:b,testid:void 0,children:[k.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:D,titleStr:D,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL,onBack:t}),k.jsxs(c("WAWebDrawerBody.react"),{children:[k.jsxs(c("WAWebDrawerSection.react"),{children:[k.jsx(d("WAWebCommunityCells.react").CreateNewGroupCell,{onClick:A}),k.jsx(d("WAWebCommunityCells.react").AddExistingGroupsCell,{onClick:z})]}),s,k.jsx(c("WAWebDrawerSection.react"),{title:h._(/*BTDS*/"__JHASH__60ca9S2FyDW__JHASH__"),testid:void 0,children:k.jsx(d("WAWebNavigableFlatList.react").NavigableFlatList,{selection:w.current,ariaLabel:h._(/*BTDS*/"__JHASH__o-RcHp0pI8f__JHASH__"),listData:B,onRenderItem:function(a){return k.jsx(r,{data:a,active:w.current})},rotateList:!0})})]})]})})}a.displayName=a.name+" [from "+f.id+"]";g.CommunityHomeGroupsManager=e}),226);
__d("WAWebContactMsgInfoDrawer.react",["fbt","WAQplTypes","WAWebAgentCollection","WAWebBizAgentAction","WAWebBizGatingUtils","WAWebChatContactMsgInfoCell.react","WAWebChatPreferenceCollection","WAWebDisplayType","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDrawerSection.react","WAWebEphemeralFbtKic","WAWebFrontendMsgGetters","WAWebKeepInChatIcon.react","WAWebLabelsInfoDrawerLabelWell.react","WAWebMessagePosition","WAWebMicIcon.react","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgInfoCollection","WAWebMsgPreview.react","WAWebMsgType","WAWebMultiDeviceIcon.react","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebSpinner.react","WAWebStatusDblcheckIcon.react","WAWebStatusPttIcon.react","WAWebStatusVideoIcon.react","WAWebToast.react","WAWebToastManager","WAWebUIRefreshGatingUtils","WAWebUiActionWamEvent","WAWebUseIsFeatureEnabled","WAWebViewOnceViewedIcon.react","WAWebWamEnumUiActionType","WAWebWamGroupMetadataMetricUtils_WORKER_INCOMPATIBLE","WAWebWamPrivateStatsUtils","WAWebWrapper.react","react","useLazyRef","useWAWebForceUpdate","useWAWebListener","useWAWebMsgValues","useWAWebUIM","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g,h){var i,j;b=j||d("react");var k=i||(i=c("react")),l=b.useEffect,m=b.useRef,n=b.useState,o={svg:{width:"x1xp8n7a",height:"xmix8c7",$$css:!0},statusBlue:{color:"xy5zui7",$$css:!0},ack:{color:"x1q15gih",$$css:!0}};e=k.forwardRef(a);function a(a,b){var e;a=babelHelpers["extends"]({},a);var f=a.msg;e=d("useWAWebMsgValues").useMsgValues(a.msg.id,[(e=d("WAWebMsgGetters")).getId,e.getStar,e.getType,e.getIsGif,e.getIsViewOnce,e.getLabels,e.getNumTimesForwarded,e.getIsFrequentlyForwarded,e.getAgendId,e.getT,e.getIsMdHistoryMsg,e.getKicSender,e.getKicTimestampMs,e.getIsKept,e.getLatestEditMsgKey]);var g=e[0];e[1];var i=e[2];e[3];var j=e[4],p=e[5];e[6];e[7];var q=e[8],r=e[9],s=e[10],t=e[11],u=e[12],v=e[13];e=e[14];var w=d("WAWebFrontendMsgGetters").getChat(f),x=c("useWAWebUIM")(),y=c("useWAWebUnmountSignal")(),z=m(null),A=m(null),B=w==null?void 0:w.id,C=c("useLazyRef")(function(){return new(d("WAWebUiActionWamEvent").UiActionWamEvent)({uiActionType:d("WAWebWamEnumUiActionType").UI_ACTION_TYPE.MSG_INFO_OPEN,uiActionPreloaded:!0,isLid:B.isLid()})}),D=n(void 0),E=D[0],F=D[1];D=n(!1);var G=D[0],H=D[1];D=d("useWAWebForceUpdate").useForceUpdateDONOTUSE();d("useWAWebListener").useListener(E==null?void 0:E.played,["add","remove"],D);d("useWAWebListener").useListener(E==null?void 0:E.read,["add","remove"],D);d("useWAWebListener").useListener(E==null?void 0:E.delivery,["add","remove"],D);d("useWAWebListener").useListener(f,"revoked",function(){x==null?void 0:x.requestDismiss()});d("useWAWebListener").useListener(d("WAWebMsgCollection").MsgCollection,"remove",function(a){a.id.equals(g)&&(x==null?void 0:x.requestDismiss())});d("useWAWebListener").useListener(f,"change:latestEditMsgKey",function(){return x==null?void 0:x.requestDismiss()});var I=c("WAWebUseIsFeatureEnabled")("MD_EXTENSION");l(function(){var a;d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_MESSAGE_INFO_VIEW,{annotations:{bool:{is_premium_subscriber:I}}});d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_MESSAGE_INFO_VIEW,"datasource_start");d("WAWebMsgInfoCollection").MsgInfoCollection.find(g).then(function(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_MESSAGE_INFO_VIEW,"datasource_end");if(y.aborted){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_MESSAGE_INFO_VIEW,d("WAQplTypes").QuickLogActionType.CANCEL);return}F(a);d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_MESSAGE_INFO_VIEW,d("WAQplTypes").QuickLogActionType.SUCCESS)})["catch"](function(){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_MESSAGE_INFO_VIEW,d("WAQplTypes").QuickLogActionType.FAIL),H(!0),d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebToast.react").Toast,{msg:h._(/*BTDS*/"__JHASH__7Oc8AbKOOJ2__JHASH__"),id:d("WAWebToast.react").genId("msg_info_failed")}))});a=(a=z.current)==null?void 0:a.getContainer();i===d("WAWebMsgType").MSG_TYPE.IMAGE&&a&&(a.scrollTop=a.scrollHeight)},[e]);l(function(){var a=C.current;a&&(Object.assign(a,d("WAWebWamGroupMetadataMetricUtils_WORKER_INCOMPATIBLE").getGroupCountMetricsFromChatWid(w==null?void 0:w.id)),a.markUiActionT(),a.commit(),C.current=void 0);d("WAWebWamPrivateStatsUtils").logUiActionShadowPrivateStatsTestEvents();d("WAWebBizAgentAction").logMessageInfo(q)},[]);D=function(a,b){b===void 0&&(b=!1);return a===g&&(b?!0:(a=A.current)==null?void 0:a.getMsgComponentRef())};e=function(){x==null?void 0:x.requestDismiss()};var J,K;if(E){var L=[];if(v&&t!=null&&u!=null){v=u/1e3;u=d("WAWebEphemeralFbtKic").getKeptByString(t);t=k.jsx("span",{className:"x1rg5ohu x1xp8n7a x1emribx xq22nx5 x2b8uid xmziwt1",children:k.jsx(d("WAWebKeepInChatIcon.react").KeepInChatIcon,{iconXstyle:o.svg})});L.push(k.jsx(c("WAWebChatContactMsgInfoCell.react"),{title:u,t:v,icon:t},"keep-in-chat"))}if(!s){u=d("WAWebMsgGetters").getIsAckPlayable(f);if(u||j){K=u?h._(/*BTDS*/"__JHASH__Qa0i-ERxDlE__JHASH__"):h._(/*BTDS*/"__JHASH__SN5hR4eRqbJ__JHASH__");v=E.played.head();t=v==null?void 0:v.t;s=k.jsx(d("WAWebViewOnceViewedIcon.react").ViewOnceViewedIcon,{xstyle:o.statusBlue,iconXstyle:o.svg});u&&!j&&(f.type===d("WAWebMsgType").MSG_TYPE.PTT?s=d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?k.jsx(d("WAWebMicIcon.react").MicIcon,{xstyle:o.statusBlue,iconXstyle:o.svg}):k.jsx(d("WAWebStatusPttIcon.react").StatusPttIcon,{xstyle:o.statusBlue,iconXstyle:o.svg}):f.type===d("WAWebMsgType").MSG_TYPE.PTV&&(s=k.jsx(d("WAWebStatusVideoIcon.react").StatusVideoIcon,{xstyle:o.statusBlue,iconXstyle:o.svg})));v=k.jsx("span",{className:"x1rg5ohu x1xp8n7a x1emribx xq22nx5 x2b8uid xmziwt1",children:s});L.push(k.jsx(c("WAWebChatContactMsgInfoCell.react"),{title:u&&!j?h._(/*BTDS*/"__JHASH__itnUQY2nXDN__JHASH__"):h._(/*BTDS*/"__JHASH__BfYDsML-wCA__JHASH__"),t:t,icon:v},"played"))}s=E.read.head();u=s==null?void 0:s.t;j=k.jsx("span",{className:"x1rg5ohu x1xp8n7a x1emribx xq22nx5 x2b8uid xmziwt1",children:k.jsx(d("WAWebStatusDblcheckIcon.react").StatusDblcheckIcon,{xstyle:o.ack,iconXstyle:o.svg})});K=(t=K)!=null?t:h._(/*BTDS*/"__JHASH__y_zHyTRLHKF__JHASH__");L.push(k.jsx(c("WAWebChatContactMsgInfoCell.react"),{title:K,t:u,icon:j},"read"));v=E.delivery.head();s=v==null?void 0:v.t;t=k.jsx("span",{className:"x1rg5ohu x1xp8n7a x1emribx xq22nx5 x2b8uid xmziwt1",children:k.jsx(d("WAWebStatusDblcheckIcon.react").StatusDblcheckIcon,{iconXstyle:o.svg})});L.push(k.jsx(c("WAWebChatContactMsgInfoCell.react"),{title:h._(/*BTDS*/"__JHASH__9NgBBEkLENG__JHASH__"),t:s,icon:t},"delivery"))}if(I&&d("WAWebBizGatingUtils").isMultiDeviceMessageAttributionEnabled()&&q!=null){v=(j=(u=d("WAWebAgentCollection").AgentCollection.get(q))==null?void 0:u.name)!=null?j:"";s=r;L.push(k.jsx(c("WAWebChatContactMsgInfoCell.react"),{title:v,t:s,icon:k.jsx("span",{className:"x1rg5ohu x1xp8n7a x1emribx xq22nx5 x2b8uid xmziwt1",children:k.jsx(d("WAWebMultiDeviceIcon.react").MultiDeviceIcon,{iconXstyle:o.svg})})},"agent"))}J=k.jsx(c("WAWebDrawerSection.react"),{theme:"padding",children:L})}var M;!E&&!G&&(M=k.jsx("div",{className:"x78zum5 x6s0dn4 xl56j7k xvv2zd5",children:k.jsx(d("WAWebSpinner.react").Spinner,{size:50,stroke:4})},"spinner"));t=null;p&&p.length>0&&d("WAWebBizGatingUtils").canDisplayLabel()&&(t=k.jsx(c("WAWebDrawerSection.react"),{theme:"padding",children:k.jsx(c("WAWebLabelsInfoDrawerLabelWell.react"),{labels:p})}));return k.jsxs(c("WAWebDrawer.react"),{ref:b,theme:"striped",children:[k.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:h._(/*BTDS*/"__JHASH__6ZxqC6H3okB__JHASH__"),type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,focusBackOrCancel:!0,onCancel:e}),k.jsx(c("WAWebMsgPreview.react"),{ref:z,chatPreference:c("WAWebChatPreferenceCollection").assertGet("defaultPreference"),children:k.jsx(d("WAWebWrapper.react").Wrapper,{msg:f,ref:A,displayType:d("WAWebDisplayType").DISPLAY_TYPE.MSG_INFO,isMsgVisible:D,position:d("WAWebMessagePosition").MsgPosition.END,onProductClick:a.onProductClick})}),k.jsxs(c("WAWebDrawerBody.react"),{children:[t,k.jsxs("div",{className:"x2lah0s x889kno x1w3bhph",children:[M,J]})]})]},"message-info-modal")}a.displayName=a.name+" [from "+f.id+"]";b=e;g["default"]=b}),226);
__d("WAWebContactMsgInfoFlow.react",["$InternalEnum","WANullthrows","WAWebContactMsgInfoDrawer.react","WAWebFrontendMsgGetters","WAWebProductDetailsFlowLoadable","react","useWAWebFlow"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react"),k=(h||(h=d("react"))).useState,l=b("$InternalEnum").Mirrored(["MessageInfo","ProductDetails"]);function a(a){a=a.msg;var b=d("useWAWebFlow").useFlow(l.MessageInfo,{transitions:d("useWAWebFlow").FlowTransitions.DrawerRight}),e=b[0],f=b[1];b=k();var g=b[0],h=b[1];if(f.step==null)return null;var i;switch(f.step){case l.MessageInfo:b=function(a){h(a),f.push(l.ProductDetails)};i=j.jsx(c("WAWebContactMsgInfoDrawer.react"),{msg:a,onProductClick:b});break;case l.ProductDetails:i=j.jsx(d("WAWebProductDetailsFlowLoadable").ProductDetailsFlowLoadable,{refreshCarousel:!0,chat:d("WAWebFrontendMsgGetters").getChat(a),product:c("WANullthrows")(g),onEnd:function(){return f.pop()}});break}return j.jsx(e,{flow:f,children:i})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebContextualBanner.react",["WAWebActionLinkButterbar.react","WAWebBotLightBulbIcon.react","WAWebExperimentIcon.react","WAWebFbtCommon","WAWebFlex.react","WAWebSvgButton.react","WAWebUISpacing","WAWebXIcon.react","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k=30,l={action:{cursor:"x1ypdohk",$$css:!0},icon:{minWidth:"x17s4nb9",$$css:!0},bannerWrapper:{flex:"x1okw0bk",overflowX:"x6ikm8r",overflowY:"x10wlt62",transformOrigin:"x1dp6rp6",backgroundColor:"x13x2ugz",$$css:!0},banner:{minHeight:"x1wjjzik",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopColor:"xk1nh2v",borderEndColor:"x1l3ee1n",borderBottomColor:"xsbzixq",borderStartColor:"x8z2lm9",backgroundColor:"xjp690a",borderTopStartRadius:"x1a2cdl4",borderTopEndRadius:"xnhgr82",borderBottomEndRadius:"x1qt0ttw",borderBottomStartRadius:"xgk8upj",$$css:!0},dismiss:{color:"x197um1m",minWidth:"xnei2rj",$$css:!0},text:{fontSize:"x1f6kntn",lineHeight:"x17fgdl5",color:"xzwifym",$$css:!0}};function m(a){a=a.name;switch(a){case"experiment":return j.jsx(d("WAWebExperimentIcon.react").ExperimentIcon,{width:k});default:return j.jsx(d("WAWebBotLightBulbIcon.react").BotLightBulbIcon,{width:k})}}m.displayName=m.name+" [from "+f.id+"]";b=j.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.onClick,f=a.onDismiss,g=a.canShow;a=a.config;var h=a.actionText,k=a.dismissable,n=a.iconName,o=a.showIcon;a=a.title;var p=function(){e()},q=function(){f()};q=j.jsx(c("WAWebSvgButton.react"),{"aria-label":c("WAWebFbtCommon")("Close"),Icon:d("WAWebXIcon.react").XIcon,onClick:q});n=o?j.jsx(m,{name:n}):null;a=a!=null?j.jsx("div",{className:"x6prxxf xdod15v xzwifym",children:a}):null;h=h!=null?j.jsx("div",{className:(i||(i=c("stylex")))(l.text,d("WAWebUISpacing").uiMargin.top5),children:j.jsx(c("WAWebActionLinkButterbar.react"),{children:h})}):null;return!g?null:j.jsx("div",{ref:b,className:(i||(i=c("stylex")))(l.bannerWrapper,d("WAWebUISpacing").uiPadding.horiz25,d("WAWebUISpacing").uiPadding.vert10),children:j.jsxs(d("WAWebFlex.react").FlexRow,{xstyle:[l.banner,d("WAWebUISpacing").uiPadding.all12],children:[j.jsx(d("WAWebFlex.react").FlexItem,{grow:0,xstyle:[l.action,o&&l.icon,d("WAWebUISpacing").uiPadding.end10],children:n&&j.jsx("div",{onClick:p,"aria-hidden":!0,children:n})}),j.jsx(d("WAWebFlex.react").FlexItem,{grow:1,xstyle:[l.action,d("WAWebUISpacing").uiMargin.end10],children:j.jsxs("div",{onClick:p,tabIndex:0,role:"button",children:[a,e&&h]})}),k&&j.jsx(d("WAWebFlex.react").FlexItem,{grow:0,xstyle:l.dismiss,children:q})]})})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("useVisibility",["intersectionObserverEntryIsIntersecting","react","useIntersectionObserver"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useState,k={top:0,right:0,bottom:0,left:0};function a(a){a=a===void 0?{}:a;var b=a.onHidden,d=a.onVisible,e=a.onVisibilityChange,f=a.root;f=f===void 0?null:f;var g=a.rootMargin;g=g===void 0?k:g;a=a.threshold;a=a===void 0?0:a;var h=j(!1),l=h[0],m=h[1];h=i(function(a){a=c("intersectionObserverEntryIsIntersecting")(a);a?d==null?void 0:d():b==null?void 0:b();e==null?void 0:e(a);m(a)},[b,d,e]);h=c("useIntersectionObserver")(h,{root:f,rootMargin:g,threshold:a});return[h,l]}g["default"]=a}),98);
__d("WAWebUserPrefsContextualBanner",["$InternalEnum","WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum")({VIEWED:0,DISMISSED:1,CLICKED:2,SYNCED:9});function a(a){var b=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.BANNER_STATES);if(b==null||typeof b!=="object")return null;b=b[String(a)];a=typeof b==="object"?b==null?void 0:b.state:null;return typeof a==="number"?h.cast(a):null}function i(a,b){var e=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").KEYS.BANNER_STATES);if(e==null||typeof e!=="object"){var f;c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.BANNER_STATES,(f={},f[String(a)]={state:b},f))}c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").KEYS.BANNER_STATES,babelHelpers["extends"]({},e,(f={},f[String(a)]={state:b},f)))}function e(a){i(a,null)}g.BannerState=h;g.getBannerState=a;g.setBannerState=i;g.clearBannerState=e}),98);
__d("useWAWebContextualBanner",["WALogger","WATimeUtils","WAWebBannerEventWamEvent","WAWebContextualBannerConfig","WAWebNuxSync","WAWebUserPrefsContextualBanner","WAWebUserPrefsNuxPreferences","WAWebWamEnumBannerOperations","react"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[banner] invalid end time for "," in config: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[banner] invalid start time for "," in config: ",""]);j=function(){return a};return a}b=h||d("react");var k=b.useCallback,l=b.useMemo;function m(a){var b=a.id,c=a.startT;a=a.endT;var e=d("WATimeUtils").convertISO8601DateFormatToUnixTime(c),f=d("WATimeUtils").convertISO8601DateFormatToUnixTime(a);if(e!=null&&!d("WATimeUtils").isInFuture(e)&&f!=null&&d("WATimeUtils").isInFuture(f))return!0;e==null&&d("WALogger").ERROR(j(),b,c);f==null&&d("WALogger").ERROR(i(),b,a);return!1}function n(a){var b=d("WAWebUserPrefsContextualBanner").getBannerState(a);if(b===d("WAWebUserPrefsContextualBanner").BannerState.SYNCED||b===d("WAWebUserPrefsContextualBanner").BannerState.CLICKED||b===d("WAWebUserPrefsContextualBanner").BannerState.DISMISSED)return!0;b=d("WAWebUserPrefsNuxPreferences").getNuxSyncList();b=b.includes(String(a));if(b){d("WAWebUserPrefsContextualBanner").setBannerState(a,d("WAWebUserPrefsContextualBanner").BannerState.SYNCED);return!0}return!1}var o=function(a){var b=!0;(a==null?void 0:a.condition)!=null&&(b=a.condition());return a!=null&&m(a)&&!n(a.id)&&b};function p(a){switch(a){case d("WAWebUserPrefsContextualBanner").BannerState.CLICKED:return d("WAWebWamEnumBannerOperations").BANNER_OPERATIONS.CLICK;case d("WAWebUserPrefsContextualBanner").BannerState.DISMISSED:return d("WAWebWamEnumBannerOperations").BANNER_OPERATIONS.DISMISS;case d("WAWebUserPrefsContextualBanner").BannerState.VIEWED:return d("WAWebWamEnumBannerOperations").BANNER_OPERATIONS.SHOWN;case d("WAWebUserPrefsContextualBanner").BannerState.SYNCED:return null}}function q(a,b){if(!a)return;b=p(b);if(a.metricField&&b){a={bannerType:a.metricField,bannerOperation:b};new(d("WAWebBannerEventWamEvent").BannerEventWamEvent)(a).commit()}}function a(a){var b=l(function(){return new Map(a.map(function(a){return[String(a),d("WAWebContextualBannerConfig").getContextualBannerConfig(a)]}))},[a]),e=k(function(a){return o(b.get(String(a)))},[b]),f=k(function(a){var c=b.get(String(a));c&&(d("WAWebUserPrefsContextualBanner").setBannerState(a,d("WAWebUserPrefsContextualBanner").BannerState.VIEWED),q(c,d("WAWebUserPrefsContextualBanner").BannerState.VIEWED))},[b]),g=k(function(a){var e=b.get(String(a));(e==null?void 0:e.syncEnabled)===!0&&void c("WAWebNuxSync").acknowledgeNux(a);d("WAWebUserPrefsContextualBanner").setBannerState(a,d("WAWebUserPrefsContextualBanner").BannerState.CLICKED);q(e,d("WAWebUserPrefsContextualBanner").BannerState.CLICKED)},[b]),h=k(function(a){var e=b.get(String(a));(e==null?void 0:e.syncEnabled)===!0&&void c("WAWebNuxSync").acknowledgeNux(a);d("WAWebUserPrefsContextualBanner").setBannerState(a,d("WAWebUserPrefsContextualBanner").BannerState.DISMISSED);q(e,d("WAWebUserPrefsContextualBanner").BannerState.DISMISSED)},[b]),i=k(function(a){var e;((e=b.get(String(a)))==null?void 0:e.syncEnabled)===!0&&void c("WAWebNuxSync").unAcknowledgeNux(a);d("WAWebUserPrefsContextualBanner").clearBannerState(a)},[b]);return[e,f,g,h,i]}g["default"]=a}),98);
__d("WAWebContextualBannerWrapper.react",["WAWebContextualBanner.react","WAWebContextualBannerConfig","WAWebVelocityTransitionGroup","react","useVisibility","useWAWebCallbackOnce","useWAWebContextualBanner"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useCallback,l=b.useState;function a(a){var b=a.bannerListOrderedByPriority;a=c("useWAWebContextualBanner")(b.map(function(a){return a.id}));var e=a[0],f=a[1],g=a[2],h=a[3],i=a[4],m=k(function(){return b.find(function(a){a=a.id;return e(a)})},[b,e]);a=l(m);var n=a[0],o=a[1],p=c("useWAWebCallbackOnce")(f,[n]);a=c("useVisibility")({onVisible:function(){n&&p(n.id)}});f=a[0];var q=k(function(){o(m())},[m]);if(n==null)return;a=j.jsx(c("WAWebContextualBanner.react"),{ref:f,canShow:e(n.id),config:d("WAWebContextualBannerConfig").getContextualBannerConfig(n.id),onClick:function(){g(n.id),n.onClick==null?void 0:n.onClick(),q()},onDismiss:function(){h(n.id),q()},onReset:function(){i(n.id)}});return j.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"butterbar",children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebWamEnumOrderSignalType",[],(function(a,b,c,d,e,f){a=Object.freeze({CREATED:0,UPDATED:1});f.ORDER_SIGNAL_TYPE=a}),66);
__d("WAWebWamEnumOrderStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({PROCESSING:0,SHIPPED:1,COMPLETED:2,CANCELLED:3,PENDING:4,PARTIALLY_SHIPPED:5,PAID_CHANGE:6});f.ORDER_STATUS=a}),66);
__d("WAWebCtwaOrderSignalWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumCustomerAdsSharingSettingEnabled","WAWebWamEnumOrderSignalType","WAWebWamEnumOrderStatus"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({CtwaOrderSignal:[4264,{ctwaOrderSignalVersion:[1,a.TYPES.INTEGER],ctwaSignalMetadata:[10,a.TYPES.STRING],customerAdsSharingSettingEnabled:[11,d("WAWebWamEnumCustomerAdsSharingSettingEnabled").CUSTOMER_ADS_SHARING_SETTING_ENABLED],deepLinkConversionData:[2,a.TYPES.STRING],deepLinkConversionSource:[3,a.TYPES.STRING],eventSharingSettingEnabled:[4,a.TYPES.BOOLEAN],globalSharingSettingEnabled:[5,a.TYPES.BOOLEAN],orderPaid:[8,a.TYPES.BOOLEAN],orderSignalType:[6,d("WAWebWamEnumOrderSignalType").ORDER_SIGNAL_TYPE],orderStatus:[7,d("WAWebWamEnumOrderStatus").ORDER_STATUS],threadIdHmac:[9,a.TYPES.STRING]},[1,1,1],"regular"]},{CtwaOrderSignal:[]});g.CtwaOrderSignalWamEvent=b}),98);
__d("WAWebEditedMedia",["WAWebFileUtils","WAWebURLUtils","lodash"],(function(a,b,c,d,e,f,g){a=function a(b,e,f,g){var h=this;this.updateEditData=function(a){h.saveEdits(),h.editData=c("lodash").merge({},h.editData,a)};this.updateEditItems=function(a,b){h.saveEdits();var c=[];h.editData.items&&h.editData.items.forEach(function(a){a!==b&&c.push(a)});c.push(a);h.editData.items=c};this.saveEdits=function(){var b=new a(h.media,h.originalImage,h.editData,h.previous);h.previous=b};this.revertEdit=function(){h.previous&&(h.editData=h.previous.editData,h.previous=h.previous.previous)};this.saveEditsFromCanvas=function(a){a=a.toDataURL();h.editedImage||(h.editedImage=new Image());h.editedImage.src=a};this.exportEditedMedia=function(){if(h.hasEdits()&&h.editedImage){var a=h.editedImage.src;return c("WAWebURLUtils").dataURLtoFile(a)}else if(h.media instanceof File)return h.media;return d("WAWebFileUtils").createFile([h.media],"",{type:h.media.type})};this.hasEdits=function(){return!!h.previous&&h.editedImage};this.cleanUp=function(){window.URL.revokeObjectURL(h.originalImage.src)};this.media=b;e?this.originalImage=e:(this.originalImage=new Image(),this.originalImage.src=window.URL.createObjectURL(b));this.previous=g;this.editData={height:0,width:0,offsetX:0,offsetY:0,rotation:0,scale:1,items:[],baseItem:null};c("lodash").merge(this.editData,f)};g["default"]=a}),98);
__d("WAWebStaticCanvas.react",["react"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react");e=(h||(h=d("react"))).memo;c=j.forwardRef(a);function a(a,b){a=a.className;return j.jsx("canvas",{className:a,ref:b})}a.displayName=a.name+" [from "+f.id+"]";function b(a,b){return a.className===b.className}d=e(c,b);g["default"]=d}),98);
__d("WAWebMediaEditCanvas.react",["WAWeb-easeljs","WAWebObjectFit.react","WAWebStaticCanvas.react","isNonZeroNumber","react","useWAWebForceUpdate","useWAWebOnUnmount"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useEffect,l=b.useImperativeHandle,m=b.useRef,n=b.useState;e=j.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.mediaEditController,f=a.editedMedia,g=a.mediaPickerStatsLogger,h=a.activeMediaId,i=m(null),o=m(null),p=m(null),q=m(null),r=n({height:1,width:1}),s=r[0],t=r[1];r=n(null);var u=r[0],v=r[1],w=d("useWAWebForceUpdate").useForceUpdateDONOTUSE(),x=function(a){var b;u?b=u:(b=new(d("WAWeb-easeljs").Easel.Stage)(a),b.enableMouseOver());e.stage=b;return b},y=function(a,b){if(!i.current)return;var c=i.current;b&&g&&h!=null&&g.logChange(h,b);b=f.editData;var e=x(c);a&&(c.width=b.width,c.height=b.height);e.removeAllChildren();b.baseItem!=null&&e.addChild(b.baseItem);b.items&&e.addChild.apply(e,b.items);a=f.originalImage.naturalWidth;var j=f.originalImage.naturalHeight;e.regX=a/2;e.regY=j/2;e.rotation=b.rotation;d("isNonZeroNumber").isNonZeroNumber(b.width)&&d("isNonZeroNumber").isNonZeroNumber(b.height)&&(e.x=b.width/2+b.scale*b.offsetX,e.y=b.height/2+b.scale*b.offsetY);e.scaleX=b.scale;e.scaleY=b.scale;e.update();t({width:c.width,height:c.height});v(e)},z=function(){var a=f.editData;f.editedImage=null;var b=f.originalImage;!a.width&&!a.height&&(a.width=b.naturalWidth,a.height=b.naturalHeight);if(!a.baseItem){b=new(d("WAWeb-easeljs").Easel.Bitmap)(b);a.baseItem=b}y(!0)},A=function(){var a=f.originalImage;!a.complete?a.onload=z:z()},B=function(){y(!0);var a=i.current;a&&f.saveEditsFromCanvas(a)},C=function(a){if(!a)return;a.children.forEach(function(a){a.removeAllEventListeners()});a.removeAllEventListeners();a.removeAllChildren();a.enableMouseOver(0);a.clear()};k(function(){A(),w,q.current=new(d("WAWeb-easeljs").Easel.Stage)(p.current),q.current.autoClear=!1,q.current.enableMouseOver(),o.current&&(e.mediaContainer=o.current),e.cropOverlay=q.current},[]);c("useWAWebOnUnmount")(function(){var a=f.originalImage;a.complete||(a.onload=void 0);B();C(u);C(q.current)});var D=function(a,b){t({width:a,height:b})};l(b,function(){return{saveCanvas:B,drawCanvas:y,updateCanvasSize:D}});r=j.jsx("canvas",{ref:p,className:"x10l6tqk xzkaem6 x1s85apg x1qrby5j x3igimt"});b=j.jsx("div",{className:a.className,ref:o,children:j.jsxs(c("WAWebObjectFit.react"),{type:a.fitType||"scaleDown",size:s,children:[r,j.jsx(c("WAWebStaticCanvas.react"),{ref:i,className:"xhtitgo xh8yej3 x5yr21d"})]})});return b}a.displayName=a.name+" [from "+f.id+"]";b=e;g["default"]=b}),98);
__d("WAWebMediaEditControllerGetters",["WAWebGetters","WAWebGettersCaches"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({createCache:d("WAWebGettersCaches").createMediaEditControllerCache});b=a.field;c=a.computed;e=b("stage");f=b("cropOverlay");d=b("mediaContainer");a=c(function(a){var b=a[0],c=a[1];a=a[2];return!!b&&!!c&&!!a},[e,f,d]);g.getIsInitialized=a}),98);
__d("WAWebMediaEditControllerModel",["WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.stage=d("WAWebBaseModel").prop(),c.cropOverlay=d("WAWebBaseModel").prop(),c.mediaContainer=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.clearStage=function(a){if(!a)return;a.children.forEach(function(a){a.removeAllEventListeners()});a.removeAllEventListeners();a.removeAllChildren();a.clear()};return b}(d("WAWebBaseModel").BaseModel);b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebProfileCropConstants",[],(function(a,b,c,d,e,f){a=192;b=640;c=96;f.PROF_PIC_MIN_SIDE=a;f.PROF_PIC_MAX_SIDE=b;f.PROF_PIC_THUMB_SIDE=c}),66);
__d("WAWebProfileCropTool.react",["fbt","$InternalEnum","WAWeb-easeljs","WAWebImageUtils","WAWebKeyboardHotKeys.react","WAWebMinusIcon.react","WAWebPlusIcon.react","WAWebProfileCropConstants","WAWebUnstyledButton.react","asyncToGeneratorRuntime","err","isStringNullOrEmpty","react","useWAWebListener"],(function(a,b,c,d,e,f,g,h){var i,j;e=j||d("react");var k=i||(i=c("react")),l=e.useEffect,m=e.useImperativeHandle,n=e.useRef,o={scalerButton:{color:"xt16idv",cursor:"x1ypdohk",$$css:!0}},p="rgba(0, 0, 0, 0.5)",q=1.1,r=1.02,s=361,t=500,u=9/16,v=2+u,w="M90 0C0 0 0 0 0 90s0 90 90 90 90 0 90-90 0-90-90-90Z",x=b("$InternalEnum").Mirrored(["CIRCLE","RECT","SQUIRCLE"]);e=k.forwardRef(a);function a(a,e){var f=babelHelpers["extends"]({},a),g=f.editedMedia,i=f.cropOverlay,j=f.drawCanvas,y=n(0),z=function(a,b){var c=g.editData,d=y.current*v,e=(a-c.width/2)*c.scale;a=(a+c.width/2)*c.scale;var f=(b+c.height/2)*c.scale;b=(b-c.height/2)*c.scale;var h=d/2;d=d/2*u;return{overlapLeft:Math.min(0,-h-e)/c.scale,overlapRight:Math.min(0,a-h)/c.scale,overlapTop:Math.min(0,-d-b)/c.scale,overlapBottom:Math.min(0,f-d)/c.scale,x:e<-h&&a>h,y:b<-d&&f>d}},A=function(a,b){var c=g.editData,d=y.current,e=(a-c.width/2)*c.scale;a=(a+c.width/2)*c.scale;var f=(b+c.height/2)*c.scale;b=(b-c.height/2)*c.scale;return{x:e<-d&&a>d,y:b<-d&&f>d}},B=function(a,b){var c=g.editData;a=c.offsetX+a/c.scale;b=c.offsetY+b/c.scale;var d=f.cropShape===x.RECT?z(a,b):A(a,b);d.x&&(c.offsetX=a);d.y&&(c.offsetY=b);j()},C=function(a,b){var c=a.stageX-b.x,d=a.stageY-b.y;B(c,d);b.x=a.stageX;b.y=a.stageY;return},D=function(a){var b=y.current,c=g.editData;b=b*v;b=Math.max(a,b/c.width);a=Math.max(a,b);c.scale=a;b=z(c.offsetX,c.offsetY);return{scale:c.scale,offsetX:c.offsetX+b.overlapLeft-b.overlapRight,offsetY:c.offsetY+b.overlapTop-b.overlapBottom}},E=function(a){var b=y.current,c=g.editData,d=Math.max(2*b/c.width,2*b/c.height);d=Math.max(a,d);if(c.width*a<b||c.height*a<b)return!1;a=-b/d+c.width/2;var e=b/d-c.width/2,f=-b/d+c.height/2;b=b/d-c.height/2;return{scale:d,offsetX:Math.min(Math.max(c.offsetX,e),a),offsetY:Math.min(Math.max(c.offsetY,b),f)}},F=function(a){return f.cropShape===x.RECT?D(a):E(a)},G=function(a){a===void 0&&(a=q);var b=g.editData;a=a!==0?a:q;a=F(b.scale*a);a&&(b.scale=a.scale,b.offsetX=a.offsetX,b.offsetY=a.offsetY,j())},H=function(a){a===void 0&&(a=q);var b=g.editData;a=a!==0?a:q;a=F(b.scale/a);a&&(b.scale=a.scale,b.offsetX=a.offsetX,b.offsetY=a.offsetY,j())};d("useWAWebListener").useListener(i.canvas,"mousewheel",function(a){a.deltaY>0?G(r):H(r)});l(function(){g.saveEdits();var a=g.editData,b=i.canvas;a.baseItem?a=a.baseItem.getBounds():a={width:0,height:0};b.style.display="block";b.width=a.width;b.height=a.height;var c=new(d("WAWeb-easeljs").Easel.Shape)();c.graphics.beginFill("rgba(0, 0, 0, 0.1)");c.graphics.drawRect(0,0,a.width,a.height);c.regX=a.width/2;c.regY=a.height/2;c.x=a.width/2;c.y=a.height/2;c.on("mousedown",function(a){a={x:a.stageX,y:a.stageY};var b=c.on("pressmove",C,null,!1,a);c.on("pressup",function(){c.off("pressmove",b)},null,!0)});c.cursor="move";a=b.getContext("2d");var e=b.width;b=b.height;var h=e/b>t/s?b/s:e/t;y.current=Math.min(s,t)/2*.9*h;var j=y.current,k;a.fillStyle=p;a.fillRect(0,0,e,b);a.globalCompositeOperation="destination-out";a.beginPath();if(f.cropShape===x.CIRCLE)a.arc(e/2,b/2,j,0,2*Math.PI,!0);else if(f.cropShape===x.RECT){var l=j*v,m=j*v*u;a.fillRect(e/2-l/2,b/2-m/2,l,m)}else if(f.cropShape===x.SQUIRCLE){k=new Path2D(w);a.translate(e/2-j,b/2-j);l=h*2*.9;a.scale(l,l)}a.fillStyle="#ffffff";k?a.fill(k):a.fill();i.addChild(c);i.update()},[]);var I=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a,b=g.editData;a=(a=g.editedImage)==null?void 0:a.src;var e=y.current;if(c("isStringNullOrEmpty")(a))throw c("err")("empty image");var f=e*2,h=f;f>d("WAWebProfileCropConstants").PROF_PIC_MAX_SIDE?h=d("WAWebProfileCropConstants").PROF_PIC_MAX_SIDE:f<d("WAWebProfileCropConstants").PROF_PIC_MIN_SIDE&&(h=d("WAWebProfileCropConstants").PROF_PIC_MIN_SIDE);f=e*v;e=e*v*u;a=(yield d("WAWebImageUtils").crop(a,b.width/2-f/2,b.height/2-e/2,f,e,h,h*u,d("WAWebImageUtils").DATA_URL|d("WAWebImageUtils").CANVAS));b=a;f=a.images.dataUrl;return{thumb:b.images.dataUrl,full:f}});return function(){return a.apply(this,arguments)}}(),J=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a,b=g.editData;a=(a=g.editedImage)==null?void 0:a.src;var e=y.current;if(c("isStringNullOrEmpty")(a))throw c("err")("empty image");e=e*2;var f=e;e>d("WAWebProfileCropConstants").PROF_PIC_MAX_SIDE?f=d("WAWebProfileCropConstants").PROF_PIC_MAX_SIDE:e<d("WAWebProfileCropConstants").PROF_PIC_MIN_SIDE&&(f=d("WAWebProfileCropConstants").PROF_PIC_MIN_SIDE);a=(yield d("WAWebImageUtils").crop(a,(b.width-e)/2,(b.height-e)/2,e,e,f,f,d("WAWebImageUtils").DATA_URL|d("WAWebImageUtils").CANVAS));b=(yield d("WAWebImageUtils").crop(a.images.canvas,0,0,d("WAWebProfileCropConstants").PROF_PIC_THUMB_SIDE,d("WAWebProfileCropConstants").PROF_PIC_THUMB_SIDE));e=a.images.dataUrl;return{thumb:b.images.dataUrl,full:e}});return function(){return a.apply(this,arguments)}}(),K=function(){return f.cropShape===x.RECT?I():J()};m(e,function(){return{crop:K}});var L=n(null);a=function(a){if(!L.current)return;a=a?a.target:document.activeElement;if(a!==L.current)return};e={pageup:function(){return G()},pagedown:function(){return H()},down:function(){return B(0,-10)},up:function(){return B(0,10)},left:function(){return B(10,0)},right:function(){return B(-10,0)}};return k.jsxs("div",{className:"x10l6tqk xeo10n6 xoegz02 xgd8bvy x14ju556 x150wa6m x7s94mv xlqs5a9 x1v92rno x1zj97q x1ctnl55",children:[k.jsx(d("WAWebKeyboardHotKeys.react").HotKeys,{handlers:e,onFocus:a,ref:L,"aria-label":h._(/*BTDS*/"__JHASH__Nbqos_9YjzD__JHASH__"),tabIndex:0}),k.jsx(c("WAWebUnstyledButton.react"),{xstyle:o.scalerButton,onClick:function(){return G()},"aria-label":h._(/*BTDS*/"__JHASH__SQc8zEZS_oj__JHASH__"),testid:void 0,children:k.jsx(d("WAWebPlusIcon.react").PlusIcon,{})}),k.jsx(c("WAWebUnstyledButton.react"),{xstyle:o.scalerButton,onClick:function(){return H()},"aria-label":h._(/*BTDS*/"__JHASH__LrMHYfVC0Hm__JHASH__"),testid:void 0,children:k.jsx(d("WAWebMinusIcon.react").MinusIcon,{})})]})}a.displayName=a.name+" [from "+f.id+"]";a=e;g.CropShapeType=x;g.WrappedProfileCropTool=a}),226);
__d("useWAWebMediaEditControllerValues",["useWAWebCollectionValues"],(function(a,b,c,d,e,f,g){function a(a,b){return d("useWAWebCollectionValues").useModelGetterValues(a,b)}g.useMediaEditControllerValues=a}),98);
__d("WAWebEditImageDrawer.react",["fbt","WAHex","WAWebCheckmarkLargeIcon.react","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebEditedMedia","WAWebExternalLink.react","WAWebMediaEditCanvas.react","WAWebMediaEditControllerGetters","WAWebMediaEditControllerModel","WAWebObjectFit.react","WAWebProfileCropTool.react","WAWebReturnIcon.react","WAWebRound.react","WAWebTosUrl","WAWebUISpacing","WAWebURLUtils","WAWebUnstyledButton.react","WAWebVelocityTransitionGroup","react","stylex","useLazyRef","useWAWebMediaEditControllerValues"],(function(a,b,c,d,e,f,g,h){var i,j,k;b=k||d("react");var l=i||(i=c("react")),m=b.useRef,n=b.useState,o=361,p=500,q={NONE:"none",RETAKE:"retake",RESTART:"restart"},r={retake:{display:"x78zum5",alignItems:"x6s0dn4",color:"x1heor9g",cursor:"x1ypdohk",$$css:!0},retakeIcon:{flex:"x1okw0bk",color:"x7o08j2",$$css:!0},attribution:{display:"x78zum5",flexDirection:"xdt5ytf",alignItems:"x6s0dn4",maxHeight:"x1wb0a4p",overflowX:"x6ikm8r",overflowY:"x10wlt62",fontSize:"x1nxh6w3",lineHeight:"x17fgdl5",textAlign:"x2b8uid",$$css:!0},footer:{position:"x1n2onr6",zIndex:"xzkaem6",boxSizing:"x9f619",display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",minHeight:"x5sx7kw",$$css:!0}};e=l.forwardRef(a);function a(a,b){var e=babelHelpers["extends"]({},a);a=e.attributionUrl;var f=e.onRetake,g=e.retryText,i=e.onFinished,k=e.cropShape,s=m(),t=m(null),u=c("useLazyRef")(function(){return new(c("WAWebMediaEditControllerModel"))({id:d("WAHex").randomHex(8)})}),v=d("useWAWebMediaEditControllerValues").useMediaEditControllerValues(u.current,[d("WAWebMediaEditControllerGetters").getIsInitialized]);v=v[0];var w=n(!1),x=w[0],y=w[1];w=n({width:p,height:o});var z=w[0],A=w[1];w=n(function(){return new(c("WAWebEditedMedia"))(e.img)});var B=w[0],C=function(){var a;(a=s.current)==null?void 0:a.saveCanvas()};w=function(){var a;C();(a=t.current)==null?void 0:a.crop().then(function(a){var b=a.thumb;a=a.full;i(b,a);B.cleanUp()})};var D=function(a){if(a==null||!(a instanceof HTMLElement))return;z&&(z.width!==a.clientWidth||z.height!==a.clientHeight)&&A({width:a.clientWidth,height:a.clientHeight});x||y(!0)},E=function(a,b){var c;(c=s.current)==null?void 0:c.drawCanvas(a,b)};w=x?l.jsx("div",{className:"x10l6tqk x13vifvy x1q509o1 xehw8m1 xhtitgo xzbmw64",children:l.jsx(d("WAWebRound.react").Round,{large:!0,onClick:w,label:h._(/*BTDS*/"__JHASH__dLplmpLrlRz__JHASH__"),children:l.jsx(d("WAWebCheckmarkLargeIcon.react").CheckmarkLargeIcon,{})})},"btn-send"):null;var F;v&&(F=l.jsx(d("WAWebProfileCropTool.react").WrappedProfileCropTool,{editedMedia:B,stage:u.current.stage,cropOverlay:u.current.cropOverlay,mediaContainer:u.current.mediaContainer,drawCanvas:E,ref:t,cropShape:k||d("WAWebProfileCropTool.react").CropShapeType.CIRCLE}));v=l.jsx(c("WAWebMediaEditCanvas.react"),{className:"x78zum5 x6s0dn4 xl56j7k xiy17q3 xztyhrg x1tbiz1a x10l6tqk x13vifvy xds687c x1ey2m1c x17qophe",editedMedia:B,mediaEditController:u.current,fitType:"cover",ref:s});var G;if(f){var H;switch(g){case q.NONE:H=null;break;case q.RETAKE:H=h._(/*BTDS*/"__JHASH__gzo29kra-Qa__JHASH__");break;case q.RESTART:default:H=h._(/*BTDS*/"__JHASH__eHzEa7bXd6B__JHASH__")}G=l.jsxs(c("WAWebUnstyledButton.react"),{xstyle:r.retake,onClick:f,title:H!=null?H.toString():"",children:[l.jsx("div",{className:(j||(j=c("stylex")))(r.retakeIcon,d("WAWebUISpacing").uiMargin.end4),children:l.jsx(d("WAWebReturnIcon.react").ReturnIcon,{})}),H]})}E=a?l.jsxs("div",{className:(j||(j=c("stylex")))(r.attribution,d("WAWebUISpacing").uiMargin.top6),children:[l.jsx(d("WAWebExternalLink.react").ExternalLink,{className:"x1okw0bk x1jkqq1h x6ikm8r x10wlt62 xlyipyv xuxw1ft",href:a,children:c("WAWebURLUtils").hostname(a)}),l.jsxs("span",{children:[h._(/*BTDS*/"__JHASH__ovJpHh9wQJM__JHASH__"),l.jsx(d("WAWebExternalLink.react").ExternalLink,{href:d("WAWebTosUrl").getTosUrl(),children:h._(/*BTDS*/"__JHASH__4s3CMFOZwtI__JHASH__")})]})]}):null;u=k===d("WAWebProfileCropTool.react").CropShapeType.RECT?l.jsx("div",{className:"x98rzlu x1yc453h",children:h._(/*BTDS*/"__JHASH__tXW5QPfMfBd__JHASH__")}):void 0;g=l.jsxs("div",{className:(j||(j=c("stylex")))(r.footer,d("WAWebUISpacing").uiPadding.top0,d("WAWebUISpacing").uiPadding.bottom6,d("WAWebUISpacing").uiPadding.horiz20),children:[l.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"btn",children:w}),E,u]});a=(f=e.imageSize)!=null?f:{width:p,height:o};return l.jsxs(c("WAWebDrawer.react"),{ref:b,theme:"edit",children:[l.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:h._(/*BTDS*/"__JHASH__wQS216Fkk_h__JHASH__"),type:"offset",onCancel:e.onCancel,focusBackOrCancel:!0,children:G}),l.jsxs(c("WAWebDrawerBody.react"),{overflow:"hidden",children:[l.jsxs("div",{className:"x1n2onr6 x78zum5 x98rzlu x6s0dn4 xl56j7k xh8yej3",children:[F,l.jsx("div",{className:"x10l6tqk x13vifvy x17qophe x78zum5 xdt5ytf xuk3077 xl56j7k xh8yej3 x5yr21d x1m8r95a",children:l.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"capture",children:l.jsx(c("WAWebObjectFit.react"),{type:"cover",size:a,onObjectLoad:D,children:v})})})]}),g]})]},"attach-edit-modal")}a.displayName=a.name+" [from "+f.id+"]";g.RETRY_OPTIONS=q;g.EditImageDrawer=e}),226);
__d("WAWebEditCaptureFlow.react",["fbt","$InternalEnum","WAFilteredCatch","WANullthrows","WAWebCaptureDrawer.react","WAWebEditImageDrawer.react","WAWebGuidePopup.react","WAWebMediaCapture","WAWebMiscErrors","WAWebModal.react","WAWebModalManager","react","useWAWebFlow"],(function(a,b,c,d,e,f,g,h){var i,j;e=j||d("react");var k=i||(i=c("react")),l=e.useEffect,m=e.useRef,n=e.useState,o=b("$InternalEnum").Mirrored(["Capture","Guide","EditImage"]);function a(a){var b=n(null),e=b[0],f=b[1],g=m(null),i=m();b=d("useWAWebFlow").useFlow(o.Capture);var j=b[0],p=b[1],q=function(){i.current==null?void 0:i.current();var a=d("WAWebMediaCapture").start("camera",function(){return p.push(o.Guide,"modal")},5e3),b=a.asyncStream,c=a.disposeStream;i.current=c;b.then(function(a){g.current||p.pop("modal"),a&&g.current&&g.current.loadNewStream(a,c)})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebMiscErrors").GetUserMedia.NotAllowedError,function(){p.end(),d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebGuidePopup.react").GuidePopup,{messaging:d("WAWebGuidePopup.react").Messaging.CAMERA_FAIL,type:d("WAWebGuidePopup.react").GuidePopupType.GUIDE_UNBLOCK}))}))["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebMiscErrors").GetUserMedia.GetUserMediaError,function(){p.end(),d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebGuidePopup.react").GuidePopup,{messaging:d("WAWebGuidePopup.react").Messaging.CAMERA_MISSING,type:d("WAWebGuidePopup.react").GuidePopupType.GUIDE_NONE}))}))};l(function(){q();return function(){i.current==null?void 0:i.current()}},[]);if(p.step==null)return null;var r;switch(p.step){case o.Capture:b=function(a){f(a),p.push(o.EditImage,"flow-transition-box-size-drawer-push")};r=k.jsx(d("WAWebModal.react").Modal,{type:a.modalTheme||d("WAWebModal.react").ModalTheme.Box,ariaLabel:h._(/*BTDS*/"__JHASH__oIv2srgU-uj__JHASH__"),testid:void 0,children:k.jsx(c("WAWebCaptureDrawer.react"),{ref:g,stream:void 0,disposeStream:void 0,caption:!1,theme:"capture-cover",onBack:function(){return p.end()},onSend:null,onCaptured:b,chat:void 0})});break;case o.Guide:r=k.jsx(d("WAWebGuidePopup.react").GuidePopup,{messaging:d("WAWebGuidePopup.react").Messaging.CAMERA,type:d("WAWebGuidePopup.react").GuidePopupType.GUIDE_ALLOW,onConfirm:function(){return p.pop("modal")}});break;case o.EditImage:b=function(){p.pop("flow-transition-box-size-drawer-pop"),q()};var s=function(b,c){a.onFinished(b,c),p.end()};r=k.jsx(d("WAWebModal.react").Modal,{type:a.modalTheme||d("WAWebModal.react").ModalTheme.Box,children:k.jsx(d("WAWebEditImageDrawer.react").EditImageDrawer,{onRetake:b,retryText:d("WAWebEditImageDrawer.react").RETRY_OPTIONS.RETAKE,onFinished:s,onCancel:function(){return p.end()},img:c("WANullthrows")(e),cropShape:a.editCropShape})})}return k.jsx(j,{flow:p,children:r})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebGroupMsgInfoSections",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["DELIVERED_FOOTER","DELIVERED_HEADER","FORWARD_COUNT","PLAYED_FOOTER","PLAYED_HEADER","READ_FOOTER","READ_HEADER","SEEN_FOOTER","SEEN_HEADER","VIEWED_FOOTER","VIEWED_HEADER","AGENT_HEADER","KEEP_IN_CHAT_HEADER"]);f.Sections=a}),66);
__d("useWAWebMsgInfoValues",["WAWebMsgInfoCollection","useWAWebCollectionValues"],(function(a,b,c,d,e,f,g){function a(a,b){return d("useWAWebCollectionValues").useCollectionValues(d("WAWebMsgInfoCollection").MsgInfoCollection,a,b)}g.useMsgInfoValues=a}),98);
__d("WAWebGroupMsgInfoSectionFooter.react",["fbt","WALogger","WAWebGroupMsgInfoSections","WAWebMsgInfoGetters","WAWebWDSText.react","react","useWAWebMsgInfoValues"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid SECTION for group message info section footer"]);j=function(){return a};return a}var k=i||c("react");function a(a){var b=a.msgInfo;a=a.section;b=d("useWAWebMsgInfoValues").useMsgInfoValues(b.id,[d("WAWebMsgInfoGetters").getPlayedRemaining,d("WAWebMsgInfoGetters").getReadRemaining,d("WAWebMsgInfoGetters").getDeliveryRemaining]);var c=b[0],e=b[1];b=b[2];var f,g;switch(a){case d("WAWebGroupMsgInfoSections").Sections.PLAYED_FOOTER:case d("WAWebGroupMsgInfoSections").Sections.VIEWED_FOOTER:f=c;g=c;break;case d("WAWebGroupMsgInfoSections").Sections.READ_FOOTER:case d("WAWebGroupMsgInfoSections").Sections.SEEN_FOOTER:f=e;g=e;break;case d("WAWebGroupMsgInfoSections").Sections.DELIVERED_FOOTER:f=b;g=b;break;default:d("WALogger").ERROR(j());return null}if(f==null||f===0)return null;a=h._(/*BTDS*/"__JHASH__CbgEK68DWQW__JHASH__",[h._plural(g,"count")]);return k.jsx("div",{"data-testid":void 0,className:"x1yrsyyn x6x52a7 x1g2khh7 xxpdul3 x150wa6m x1bnvlk4",children:k.jsx(d("WAWebWDSText.react").WDSTextMuted,{as:"span",children:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebGroupMsgInfoDrawer.react",["fbt","WALogger","WANullthrows","WAWebAgentCollection","WAWebBizAgentAction","WAWebBizGatingUtils","WAWebChatAgentMsgInfoCell.react","WAWebChatGroupMsgInfoCell.react","WAWebChatKeptByMsgInfoCell.react","WAWebChatPreferenceCollection","WAWebContactCollection","WAWebDisplayType","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDrawerSection.react","WAWebElevatedPushNamesFlag","WAWebFlatList.react","WAWebFlatListController","WAWebFrontendMsgGetters","WAWebGroupMetadataCollection","WAWebGroupMsgInfoSectionFooter.react","WAWebGroupMsgInfoSections","WAWebKeepInChatIcon.react","WAWebL10N","WAWebLabelsInfoDrawerLabelWell.react","WAWebMessagePosition","WAWebMicIcon.react","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgInfoCollection","WAWebMsgPreview.react","WAWebMsgType","WAWebMultiDeviceIcon.react","WAWebRow.react","WAWebSpinner.react","WAWebStatusDblcheckIcon.react","WAWebStatusPttIcon.react","WAWebStatusVideoIcon.react","WAWebToast.react","WAWebToastManager","WAWebUIRefreshGatingUtils","WAWebUISpacing","WAWebUiActionWamEvent","WAWebUseIsFeatureEnabled","WAWebUserPrefsMeUser","WAWebViewOnceViewedIcon.react","WAWebWDSText.react","WAWebWamAddressingModeUtils","WAWebWamEnumUiActionType","WAWebWamGroupMetricUtils","WAWebWamPrivateStatsUtils","WAWebWrapper.react","react","stylex","useLazyRef","useWAWebForceUpdate","useWAWebListener","useWAWebMsgValues","useWAWebUIM","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g,h){var i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid SECTION for group message info section header"]);l=function(){return a};return a}b=k||d("react");var m=i||(i=c("react")),n=b.useEffect,o=b.useRef,p=b.useState,q={svg:{width:"x1xp8n7a",height:"xmix8c7",$$css:!0},statusBlue:{color:"xy5zui7",$$css:!0},ack:{color:"x1q15gih",$$css:!0},titleRefreshed:{display:"x78zum5",$$css:!0}},r=50,s=50,t=d("WAWebFlatList.react").DEFAULT_ITEM_HEIGHT+10,u=d("WAWebFlatList.react").FlatListFactory();function v(a){var b=a.chat,d=a.elevatedPushNamesEnabled;a=a.participant;return m.jsx(c("WAWebChatGroupMsgInfoCell.react"),{msgInfoParticipant:a,chat:b,contact:a.contact,elevatedPushNamesEnabled:d,theme:"drawer-list"})}v.displayName=v.name+" [from "+f.id+"]";function w(a){var b=a.agentName;a=a.msg;return m.jsx(c("WAWebChatAgentMsgInfoCell.react"),{msg:a,agentName:b,theme:"drawer-list"})}w.displayName=w.name+" [from "+f.id+"]";function x(a){return d("WAWebContactCollection").ContactCollection.assertGet(a)}function y(a){a=a.msg;var b=d("WAWebMsgGetters").getKicSender(a);if(b!=null){b=x(b);return m.jsx(c("WAWebChatKeptByMsgInfoCell.react"),{kicTimestampMs:a.kicTimestampMs,contact:b,theme:"drawer-list"})}return}y.displayName=y.name+" [from "+f.id+"]";function z(a){var b=a.msg;a=a.section;var e,f;switch(a){case d("WAWebGroupMsgInfoSections").Sections.PLAYED_HEADER:b.type===d("WAWebMsgType").MSG_TYPE.PTV?f=m.jsx(d("WAWebStatusVideoIcon.react").StatusVideoIcon,{xstyle:q.statusBlue,iconXstyle:q.svg}):d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?f=m.jsx(d("WAWebMicIcon.react").MicIcon,{xstyle:q.statusBlue,iconXstyle:q.svg}):f=m.jsx(d("WAWebStatusPttIcon.react").StatusPttIcon,{xstyle:q.statusBlue,iconXstyle:q.svg});e=h._(/*BTDS*/"__JHASH__AP0qxXOIn-5__JHASH__");break;case d("WAWebGroupMsgInfoSections").Sections.READ_HEADER:f=m.jsx(d("WAWebStatusDblcheckIcon.react").StatusDblcheckIcon,{xstyle:q.ack,iconXstyle:q.svg});e=h._(/*BTDS*/"__JHASH__xJiKcZN6tI2__JHASH__");break;case d("WAWebGroupMsgInfoSections").Sections.SEEN_HEADER:f=m.jsx(d("WAWebStatusDblcheckIcon.react").StatusDblcheckIcon,{xstyle:q.ack,iconXstyle:q.svg});e=b.isViewOnce?h._(/*BTDS*/"__JHASH__oOoKvSHPyyX__JHASH__"):h._(/*BTDS*/"__JHASH__ycel2ZWWS7x__JHASH__");break;case d("WAWebGroupMsgInfoSections").Sections.DELIVERED_HEADER:f=m.jsx(d("WAWebStatusDblcheckIcon.react").StatusDblcheckIcon,{iconXstyle:q.svg});e=h._(/*BTDS*/"__JHASH__P9P0UHc43lP__JHASH__");break;case d("WAWebGroupMsgInfoSections").Sections.VIEWED_HEADER:f=m.jsx(d("WAWebViewOnceViewedIcon.react").ViewOnceViewedIcon,{xstyle:q.statusBlue,iconXstyle:q.svg});e=h._(/*BTDS*/"__JHASH__SZQ1d0VCh5d__JHASH__");break;case d("WAWebGroupMsgInfoSections").Sections.AGENT_HEADER:f=m.jsx(d("WAWebMultiDeviceIcon.react").MultiDeviceIcon,{iconXstyle:q.svg});e=h._(/*BTDS*/"__JHASH__X4PWOvced5F__JHASH__");break;case d("WAWebGroupMsgInfoSections").Sections.KEEP_IN_CHAT_HEADER:f=m.jsx(d("WAWebKeepInChatIcon.react").KeepInChatIcon,{iconXstyle:q.svg});e=h._(/*BTDS*/"__JHASH__x50cpi-6y_F__JHASH__");break;default:d("WALogger").ERROR(l());return null}if(d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled())return m.jsxs("div",babelHelpers["extends"]({"data-testid":void 0,dir:c("WAWebL10N").LR()},(j||(j=c("stylex"))).props(q.titleRefreshed,d("WAWebUISpacing").uiPadding.all20,d("WAWebUISpacing").uiPadding.top0),{children:[f,m.jsx(d("WAWebWDSText.react").WDSTextMutedRefreshed,{as:"span",xstyle:d("WAWebUISpacing").uiPadding.horiz10,textWrap:"ellipsis",children:e})]}));f=m.jsx("div",{className:"x1rg5ohu x1xp8n7a x1qx5ct2 xq22nx5 x2b8uid x16dsc37",children:f});return m.jsx("div",{"data-testid":void 0,className:"xyinxu5 x6x52a7 x1l90r2v xxpdul3 x150wa6m",children:m.jsx(c("WAWebRow.react"),{side:f,ellipsify:!0,children:m.jsx(d("WAWebWDSText.react").WDSTextSectionTitle,{as:"span",children:e})})})}z.displayName=z.name+" [from "+f.id+"]";function A(a){var b=a.data,e=a.msg;a=a.msgInfo;if(b.kind==="contact-row")return m.jsx(v,{participant:b.participant,chat:d("WAWebFrontendMsgGetters").getChat(e),elevatedPushNamesEnabled:d("WAWebElevatedPushNamesFlag").elevatedPushNamesM2Enabled(d("WAWebFrontendMsgGetters").getChat(e))});if(b.kind==="agent-row")return m.jsx(w,{msg:e,agentName:b.agentName});if(b.kind==="kept-by-row")return m.jsx(y,{msg:e});switch(b.type){case d("WAWebGroupMsgInfoSections").Sections.PLAYED_HEADER:case d("WAWebGroupMsgInfoSections").Sections.READ_HEADER:case d("WAWebGroupMsgInfoSections").Sections.SEEN_HEADER:case d("WAWebGroupMsgInfoSections").Sections.DELIVERED_HEADER:case d("WAWebGroupMsgInfoSections").Sections.VIEWED_HEADER:case d("WAWebGroupMsgInfoSections").Sections.AGENT_HEADER:case d("WAWebGroupMsgInfoSections").Sections.KEEP_IN_CHAT_HEADER:return m.jsx(z,{msg:e,section:b.type});default:return m.jsx(c("WAWebGroupMsgInfoSectionFooter.react"),{section:b.type,msgInfo:c("WANullthrows")(a)})}}A.displayName=A.name+" [from "+f.id+"]";e=m.forwardRef(a);function a(a,b){var e;a=babelHelpers["extends"]({},a);var f=a.msg;e=d("useWAWebMsgValues").useMsgValues(a.msg.id,[(e=d("WAWebMsgGetters")).getId,e.getStar,e.getType,e.getIsGif,e.getIsViewOnce,e.getLabels,e.getNumTimesForwarded,e.getIsFrequentlyForwarded,e.getAgendId,e.getKicSender,e.getKicTimestampMs,e.getIsKept,e.getLatestEditMsgKey]);var g=e[0];e[1];var i=e[2];e[3];var j=e[4],k=e[5];e[6];e[7];var l=e[8],q=e[9];e[10];var v=e[11];e[12];var w=d("WAWebFrontendMsgGetters").getChat(f),x=c("useWAWebUnmountSignal")(),y=c("useWAWebUIM")(),z=c("useLazyRef")(function(){return new(d("WAWebUiActionWamEvent").UiActionWamEvent)({uiActionType:d("WAWebWamEnumUiActionType").UI_ACTION_TYPE.MSG_INFO_OPEN,uiActionPreloaded:!0})});e=c("useLazyRef")(function(){return new(c("WAWebFlatListController"))()});var B=o(null),C=o(null),D=p(void 0),E=D[0],F=D[1];D=p(!1);var G=D[0],H=D[1];n(function(){var a;d("WAWebMsgInfoCollection").MsgInfoCollection.find(g).then(function(a){if(x.aborted)return;F(a)})["catch"](function(){H(!0),d("WAWebToastManager").ToastManager.open(m.jsx(d("WAWebToast.react").Toast,{msg:h._(/*BTDS*/"__JHASH__7Oc8AbKOOJ2__JHASH__"),id:d("WAWebToast.react").genId("msg_info_failed")}))});a=(a=B.current)==null?void 0:a.getContainer();i===d("WAWebMsgType").MSG_TYPE.IMAGE&&a&&(a.scrollTop=a.scrollHeight)},[]);n(function(){var a=z.current;if(a){var b=c("WAWebGroupMetadataCollection").get(w.id),e=b==null?void 0:b.cachedDeviceSizeBucket;e!=null&&(a.sizeBucket=e);b!=null&&Object.assign(a,d("WAWebWamGroupMetricUtils").getGroupCountMetricsFromGroupMetadata(b),d("WAWebWamAddressingModeUtils").getAddressingModeMetricsFromGroupMetadata(b));a.markUiActionT();a.commit();z.current=void 0}d("WAWebWamPrivateStatsUtils").logUiActionShadowPrivateStatsTestEvents();d("WAWebBizAgentAction").logMessageInfo(l)},[]);var I=c("WAWebUseIsFeatureEnabled")("MD_EXTENSION");D=function(a,b){b===void 0&&(b=!1);return a===g&&(b?!0:(a=C.current)==null?void 0:a.getMsgComponentRef())};var J=function(){y==null?void 0:y.requestDismiss()},K=function(){var a=[];E&&v&&q!=null&&(a.push({kind:"section",type:d("WAWebGroupMsgInfoSections").Sections.KEEP_IN_CHAT_HEADER,itemKey:d("WAWebGroupMsgInfoSections").Sections.KEEP_IN_CHAT_HEADER,height:s}),a.push({kind:"kept-by-row",itemKey:"kept-by-"+q.user,height:t}));if(I&&d("WAWebBizGatingUtils").isMultiDeviceMessageAttributionEnabled()&&l!=null){var b;b=(b=(b=d("WAWebAgentCollection").AgentCollection.get(l))==null?void 0:b.name)!=null?b:"";a.push({kind:"section",type:d("WAWebGroupMsgInfoSections").Sections.AGENT_HEADER,itemKey:d("WAWebGroupMsgInfoSections").Sections.AGENT_HEADER,height:s});a.push({kind:"agent-row",agentName:b,itemKey:"agent-"+b.toString(),height:t})}b=d("WAWebMsgGetters").getIsAckPlayable(f);var c=b||j;if(E&&c){var e=b&&!j?d("WAWebGroupMsgInfoSections").Sections.PLAYED_HEADER:d("WAWebGroupMsgInfoSections").Sections.VIEWED_HEADER;a.push({kind:"section",type:e,itemKey:e,height:s});a.push.apply(a,E.played.map(function(a){return{participant:a,kind:"contact-row",itemKey:a.id.toString(),height:d("WAWebFlatList.react").DEFAULT_ITEM_HEIGHT}}));E.playedRemaining>0&&(e=b&&!j?d("WAWebGroupMsgInfoSections").Sections.PLAYED_FOOTER:d("WAWebGroupMsgInfoSections").Sections.VIEWED_FOOTER,a.push({kind:"section",type:e,itemKey:e,height:r}))}E&&(E.read.length>0||E.playedRemaining>0)&&(a.push({kind:"section",type:c?d("WAWebGroupMsgInfoSections").Sections.SEEN_HEADER:d("WAWebGroupMsgInfoSections").Sections.READ_HEADER,itemKey:d("WAWebGroupMsgInfoSections").Sections.READ_HEADER,height:s}),a.push.apply(a,E.read.map(function(a){var b;return((b=f.invokedBotWid)==null?void 0:b.isBot())&&d("WAWebUserPrefsMeUser").isMeAccount(a.id)?null:{participant:a,kind:"contact-row",itemKey:a.id.toString(),height:d("WAWebFlatList.react").DEFAULT_ITEM_HEIGHT}}).filter(Boolean)),E.readRemaining>0&&a.push({kind:"section",type:d("WAWebGroupMsgInfoSections").Sections.READ_FOOTER,itemKey:c?d("WAWebGroupMsgInfoSections").Sections.SEEN_FOOTER:d("WAWebGroupMsgInfoSections").Sections.READ_FOOTER,height:r}));E&&(E.delivery.length>0||E.deliveryRemaining>0)&&(a.push({kind:"section",type:d("WAWebGroupMsgInfoSections").Sections.DELIVERED_HEADER,itemKey:d("WAWebGroupMsgInfoSections").Sections.DELIVERED_HEADER,height:s}),a.push.apply(a,E.delivery.map(function(a){var b;return((b=f.invokedBotWid)==null?void 0:b.isBot())&&d("WAWebUserPrefsMeUser").isMeAccount(a.id)?null:{participant:a,kind:"contact-row",itemKey:a.id.toString(),height:d("WAWebFlatList.react").DEFAULT_ITEM_HEIGHT}}).filter(Boolean)),E.deliveryRemaining>0&&a.push({kind:"section",type:d("WAWebGroupMsgInfoSections").Sections.DELIVERED_FOOTER,itemKey:d("WAWebGroupMsgInfoSections").Sections.DELIVERED_FOOTER,height:r}));return a},L=d("useWAWebForceUpdate").useForceUpdateDONOTUSE();d("useWAWebListener").useListener(E==null?void 0:E.played,["add","remove"],L);d("useWAWebListener").useListener(E==null?void 0:E.read,["add","remove"],L);d("useWAWebListener").useListener(E==null?void 0:E.delivery,["add","remove"],L);d("useWAWebListener").useListener(f,"revoked",function(){y==null?void 0:y.requestDismiss()});d("useWAWebListener").useListener(d("WAWebMsgCollection").MsgCollection,"remove",function(a){a.id.equals(g)&&(y==null?void 0:y.requestDismiss())});d("useWAWebListener").useListener(f,"change:latestEditMsgKey",function(){return y==null?void 0:y.requestDismiss()});var M;!E&&!G&&(M=m.jsx("div",{className:"x78zum5 x6s0dn4 xl56j7k xvv2zd5",children:m.jsx(d("WAWebSpinner.react").Spinner,{size:50,stroke:4})}));L=K();G=L.length?m.jsx(u,{flatListController:e.current,direction:"vertical",forceConsistentRenderCount:!1,data:L,renderItem:function(a){return m.jsx(A,{data:a,msg:f,msgInfo:E})}}):null;K=null;k&&k.length>0&&d("WAWebBizGatingUtils").canDisplayLabel()&&(K=m.jsx(c("WAWebDrawerSection.react"),{theme:"padding",children:m.jsx(c("WAWebLabelsInfoDrawerLabelWell.react"),{labels:k})}));return m.jsxs(c("WAWebDrawer.react"),{ref:b,theme:"striped",children:[m.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:h._(/*BTDS*/"__JHASH__6ZxqC6H3okB__JHASH__"),type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:J,focusBackOrCancel:!0}),m.jsx(c("WAWebMsgPreview.react"),{ref:B,chatPreference:c("WAWebChatPreferenceCollection").assertGet("defaultPreference"),children:m.jsx(d("WAWebWrapper.react").Wrapper,{msg:f,ref:C,displayType:d("WAWebDisplayType").DISPLAY_TYPE.MSG_INFO,isMsgVisible:D,position:d("WAWebMessagePosition").MsgPosition.END,onProductClick:a.onProductClick})}),m.jsxs(c("WAWebDrawerBody.react"),{flatListControllers:[e.current],children:[K,M,m.jsx("div",{className:"x889kno x1t4gjm",children:G})]})]})}a.displayName=a.name+" [from "+f.id+"]";b=e;g["default"]=b}),226);
__d("WAWebGroupMsgInfoFlow.react",["$InternalEnum","WANullthrows","WAWebFrontendMsgGetters","WAWebGroupMsgInfoDrawer.react","WAWebProductDetailsFlowLoadable","react","useWAWebFlow"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react"),k=(h||(h=d("react"))).useState,l=b("$InternalEnum").Mirrored(["GroupMessageInfo","ProductDetails"]);function a(a){a=a.msg;var b=d("useWAWebFlow").useFlow(l.GroupMessageInfo,{transitions:d("useWAWebFlow").FlowTransitions.DrawerRight}),e=b[0],f=b[1];b=k();var g=b[0],h=b[1];if(f.step==null)return null;var i;switch(f.step){case l.GroupMessageInfo:b=function(a){h(a),f.push(l.ProductDetails)};i=j.jsx(c("WAWebGroupMsgInfoDrawer.react"),{msg:a,onProductClick:b});break;case l.ProductDetails:i=j.jsx(d("WAWebProductDetailsFlowLoadable").ProductDetailsFlowLoadable,{refreshCarousel:!0,chat:d("WAWebFrontendMsgGetters").getChat(a),product:c("WANullthrows")(g),onEnd:function(){return f.pop()}});break}return j.jsx(e,{flow:f,children:i})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebGroupsV4InviteAddComment.react",["fbt","WAWebChatInviteWithCommentModal.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");b=j.forwardRef(a);function a(a,b){var d=a.gid;a.groupDesc;var e=a.onClose,f=a.onSend,g=a.participants;a=a.subject;return j.jsx(c("WAWebChatInviteWithCommentModal.react"),{ref:b,onClose:e,onSend:f,wid:d,invitees:g.map(function(a){return a.contact}),chatName:a,initialInviteComment:h._(/*BTDS*/"__JHASH__-DY4gyzswGw__JHASH__"),chatNameSubtitle:h._(/*BTDS*/"__JHASH__-MKYnzTW4lu__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";d=b;g["default"]=d}),226);
__d("WAWebGroupsV4InviteFlow.react",["fbt","$InternalEnum","Promise","WALogger","WAWebChatSendMessages","WAWebConfirmPopup.react","WAWebFbtIntlList","WAWebFindChatAction","WAWebFrontendContactGetters","WAWebGroupMetadataCollection","WAWebGroupsV4InviteAddComment.react","WAWebModalManager","WAWebName.react","WAWebSendMsgResultAction","WAWebToast.react","WAWebToastManager","asyncToGeneratorRuntime","react","useWAWebFlow"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[error] handleSendInvite"]);k=function(){return a};return a}var l=j||c("react"),m=b("$InternalEnum").Mirrored(["Confirm","AddComment"]);function a(a){var e=d("useWAWebFlow").useFlow(m.Confirm),f=e[0],g=e[1],j=function(a,b){b===void 0&&(b=!1);return b?d("WAWebFrontendContactGetters").getFormattedUser(a):l.jsx(d("WAWebName.react").Name,{contact:a})};e=function(a,b){b===void 0&&(b=!1);if(!Array.isArray(a))return j(a,b);a=a.map(function(a){return j(a,b)});return c("WAWebFbtIntlList")(a,c("WAWebFbtIntlList").CONJUNCTIONS.AND,c("WAWebFbtIntlList").DELIMITERS.COMMA)};e=e(a.participantNeedInvite.map(function(a){return a.contact}),!0);e=h._(/*BTDS*/"__JHASH__zVAsJAGQlxg__JHASH__",[h._plural(a.participantNeedInvite.length),h._param("member",e)]);var n=function(e,f){e===void 0&&(e=""),d("WAWebModalManager").ModalManager.close(),(i||(i=b("Promise"))).all(a.participantNeedInvite.map(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var g=b.contact,h=b.invite_code;b=b.invite_code_exp;var i=(yield d("WAWebFindChatAction").findOrCreateLatestChat(g.id,"groupsV4InviteFlow")),j=a.groupGid.toString(),k=c("WAWebGroupMetadataCollection").assertGet(j);i=(yield d("WAWebChatSendMessages").sendGroupInviteMessage(i,j,a.subject,h||"",b,e,f));if(i.messageSendResult===d("WAWebSendMsgResultAction").SendMsgResult.OK){k.pendingParticipants.add({id:g.id});return!0}return!1});return function(a){return g.apply(this,arguments)}}())).then(function(a){a=a.filter(Boolean).length;d("WAWebToastManager").ToastManager.open(l.jsx(d("WAWebToast.react").Toast,{msg:h._(/*BTDS*/"__JHASH__0Mvm1RLqxeY__JHASH__",[h._plural(a,"num")])}))})["catch"](function(a){d("WALogger").ERROR(k()).devConsole(a).sendLogs("groups-v4-invite-send-failed")})};if(g.step==null)return null;var o=null;switch(g.step){case m.Confirm:o=l.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){return g.push(m.AddComment)},okText:h._(/*BTDS*/"__JHASH__9lHmApGpjly__JHASH__"),onCancel:function(){return g.pop()},cancelText:h._(/*BTDS*/"__JHASH__JomY4EcHzcJ__JHASH__"),children:e});break;case m.AddComment:o=l.jsx(c("WAWebGroupsV4InviteAddComment.react"),{participants:a.participantNeedInvite,gid:a.groupGid,subject:a.subject,groupDesc:a.groupDesc,onClose:function(){return g.pop()},onSend:n})}return l.jsx(f,{flow:g,children:o})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebLinkSubgroupsAction",["fbt","WAFilteredCatch","WALogger","WAWebActionToast.react","WAWebBackendErrors","WAWebCommunityGeneralChatFailedParticipantsModal.react","WAWebGroupCommunityJob","WAWebModalManager","WAWebNoop","WAWebToastManager","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Subgroup linking failed"]);j=function(){return a};return a}var k=i||c("react");function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=d("WAWebGroupCommunityJob").sendLinkSubgroups({parentGroupId:a,subgroupIds:e});a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=(yield f);if(a.failedGroups.length>0){var b=a.failedGroups.reduce(function(a,b){return a&&b.error===406},!0);return b?new(d("WAWebActionToast.react").ActionType)(h._(/*BTDS*/"__JHASH__zfaSPLdpGgi__JHASH__",[h._plural(a.failedGroups.length)])):new(d("WAWebActionToast.react").ActionType)(h._(/*BTDS*/"__JHASH__I0z3b_E4AoO__JHASH__",[h._plural(a.failedGroups.length)]))}a.failedParticipantJids.length>0&&d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebCommunityGeneralChatFailedParticipantsModal.react").GeneralChatFailedParticipantsModal,{failedParticipantJids:a.failedParticipantJids}));return new(d("WAWebActionToast.react").ActionType)(h._(/*BTDS*/"__JHASH__OcU6E4MZYpb__JHASH__",[h._plural(e.length)]))}catch(a){d("WALogger").WARN(j()).verbose().devConsole(a).sendLogs("subgroup-linking-failed");return new(d("WAWebActionToast.react").ActionType)(h._(/*BTDS*/"__JHASH__iAVC4vo0o5p__JHASH__"))}})();var g=new(d("WAWebActionToast.react").ActionType)(h._(/*BTDS*/"__JHASH__eMPNkQwjq_G__JHASH__",[h._plural(e.length)]));d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebActionToast.react").ActionToast,{initialAction:g,pendingAction:a}));try{yield f}catch(a){d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,c("WAWebNoop"))(a)}});return l.apply(this,arguments)}g["default"]=a}),226);
__d("WAWebManageCommunityGroupsFlow.react",["$InternalEnum","WANullthrows","WAWebABProps","WAWebChatCollection","WAWebChatCommunityUtils","WAWebCmd","WAWebCommunityExistingGroupsConfirmationDrawer.react","WAWebCommunityExistingGroupsDrawer.react","WAWebCommunityHomeGroupsManager.react","WAWebCommunitySettingsDrawer.react","WAWebComposeBoxActions","WAWebCreateSubgroupSuggestionAction","WAWebDrawerManager","WAWebExistingGroupPermissionsDrawer.react","WAWebFindChatAction","WAWebLinkSubgroupsAction","WAWebNewGroupFlow.react","WAWebNewGroupFlowLoadable","WAWebNewGroupPermissionsDrawer.react","WAWebNewSubgroupSuggestionFlowLoadable","WAWebUiActionWamEvent","WAWebUserPrefsMeUser","WAWebWamEnumUiActionType","WAWebWamPrivateStatsUtils","asyncToGeneratorRuntime","react","useWAWebCallbackOnce","useWAWebCommunitySubgroups","useWAWebFlow","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react"),k=(h||(h=d("react"))).useState,l=b("$InternalEnum").Mirrored(["GROUPS_MANAGER","NEW_GROUP","EXISTING_GROUP","COMMUNITY_SETTINGS","GROUP_PERMISSIONS_DRAWER","NEW_GROUP_PERMISSIONS_DRAWER","EXISTING_GROUPS_CONFIRMATION_DRAWER"]);e=j.forwardRef(a);function a(a,e){a=babelHelpers["extends"]({},a);var f=a.parentGroupMetadata,g=a.fromInfo;g=g===void 0?!1:g;var h=a.onBack;a=a.existingGroupsToBeLinked;a=a===void 0?[]:a;var i=c("useWAWebCommunitySubgroups")(f),m=i.joinedSubgroups,n=i.unjoinedSubgroups;i=i.subgroupCount;var o=d("WAWebChatCommunityUtils").isSubgroupSuggestionCreation(f.id),p=c("useWAWebUnmountSignal")(),q=c("useWAWebCallbackOnce")(function(){h?h():d("WAWebDrawerManager").DrawerManager.closeDrawerRight()}),r=k(!0),s=r[0];r=r[1];var t=k(!0),u=t[0];t=t[1];var v=k(!0),w=v[0];v=v[1];var x=k(!1),y=x[0];x=x[1];var z=k(a),A=z[0],B=z[1];z=k();var C=z[0],D=z[1],E=a.length>0;z=d("useWAWebFlow").useFlow(E?l.EXISTING_GROUPS_CONFIRMATION_DRAWER:l.GROUPS_MANAGER,{transitions:d("useWAWebFlow").FlowTransitions.DrawerRight,onEnd:q});a=z[0];var F=z[1];function G(a){return H.apply(this,arguments)}function H(){H=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield a);F.pop();a!=null&&!p.aborted&&d("WAWebFindChatAction").findOrCreateLatestChat(a,"communityGroupsFlow").then(function(a){d("WAWebCmd").Cmd.openChatBottom(a).then(function(b){b&&d("WAWebComposeBoxActions").ComposeBoxActions.focus(a)})})});return H.apply(this,arguments)}function I(a){return J.apply(this,arguments)}function J(){J=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new Set([].concat(n,m));a=a.filter(function(a){return!b.has(a.id)}).map(function(a){return a.id});if(a.length)if(!f.participants.iAmAdmin())yield d("WAWebCreateSubgroupSuggestionAction").createExistingGroupsSubgroupSuggestionsAction(f.id,a,q,q);else{var e=new(d("WAWebUiActionWamEvent").UiActionWamEvent)({uiActionType:d("WAWebWamEnumUiActionType").UI_ACTION_TYPE.COMMUNITY_LINK,uiActionPreloaded:!1});yield c("WAWebLinkSubgroupsAction")(f.id,a).then(function(){e.markUiActionT(),e.commit(),d("WAWebWamPrivateStatsUtils").logUiActionShadowPrivateStatsTestEvents()});q();E&&d("WAWebCmd").Cmd.openCommunityHome(f.id)}B([])});return J.apply(this,arguments)}if(F.step==null)return null;var K;switch(F.step){case l.GROUPS_MANAGER:K=j.jsx(d("WAWebCommunityHomeGroupsManager.react").CommunityHomeGroupsManager,{joinedSubgroups:m,unjoinedSubgroups:n,currentSubgroupCount:i,fromInfo:g,onBack:q,onNewGroupFlow:function(){return F.push(l.NEW_GROUP)},onExistingGroupFlow:function(){return F.push(l.EXISTING_GROUP)},onCommunitySettingsClick:function(){return F.push(l.COMMUNITY_SETTINGS)},parentId:f.id});break;case l.NEW_GROUP:o?K=j.jsx(d("WAWebNewSubgroupSuggestionFlowLoadable").NewSubgroupSuggestionFlowLoadable,{parentGroup:f.id,onBack:function(){return F.pop()},onEnd:q}):K=j.jsx(d("WAWebNewGroupFlowLoadable").NewGroupFlowLoadable,{onCreateGroup:G,onEnd:function(){return F.pop()},parentGroupWid:f.id,initialStep:d("WAWebNewGroupFlow.react").NewGroupFlowStep.SET_GROUP_INFO_DRAWER,shortenedCreationFlow:!0});break;case l.EXISTING_GROUP:z=d("WAWebABProps").getABPropConfigValue("parent_group_no_disclaimer")&&f.isParentGroupClosed===!0;o=f==null?void 0:f.getSubgroupSuggestions().reduce(function(a,b){d("WAWebUserPrefsMeUser").isMeAccount(b.owner)&&a.push(b.groupId);return a},[]);K=j.jsx(c("WAWebCommunityExistingGroupsDrawer.react"),{onBack:function(){return F.pop()},fromInfo:g,onSubmit:I,communityName:f.subject,isCommunityAdmin:f.participants.iAmAdmin(),onContinue:function(){return F.push(l.EXISTING_GROUPS_CONFIRMATION_DRAWER)},onCreateNewGroup:function(){return F.push(l.NEW_GROUP)},currentSubgroupCount:i,isParentGroupClosed:z,groupsSuggestedByMeToCommunity:o,flowSelectedGroups:A,setFlowSelectedGroups:B});break;case l.COMMUNITY_SETTINGS:G=d("WAWebChatCollection").ChatCollection.assertGet(f.id);K=j.jsx(c("WAWebCommunitySettingsDrawer.react"),{chat:G,onBack:function(){return F.pop()}});break;case l.GROUP_PERMISSIONS_DRAWER:g=d("WAWebChatCollection").ChatCollection.assertGet(c("WANullthrows")(C));K=j.jsx(c("WAWebExistingGroupPermissionsDrawer.react"),{chat:g,groupLinkingFlow:!0,groupMetadata:c("WANullthrows")(g.groupMetadata),onClose:function(){return F.pop()}});break;case l.NEW_GROUP_PERMISSIONS_DRAWER:K=j.jsx(c("WAWebNewGroupPermissionsDrawer.react"),{onBack:function(){return F.pop()},restrict:s,setRestrict:r,announce:u,setAnnounce:t,membershipApprovalMode:y,setMembershipApprovalMode:x,memberAddMode:w,setMemberAddMode:v});break;case l.EXISTING_GROUPS_CONFIRMATION_DRAWER:i=d("WAWebABProps").getABPropConfigValue("parent_group_no_disclaimer")&&f.isParentGroupClosed===!0;K=j.jsx(c("WAWebCommunityExistingGroupsConfirmationDrawer.react"),{onBack:function(){return F.pop()},onGroupPermissions:function(a){D(a),F.push(l.GROUP_PERMISSIONS_DRAWER)},isParentGroupClosed:i,isCommunityAdmin:f.participants.iAmAdmin(),onSubmit:I,selectedGroups:A,communityName:f.subject,parentGroupId:f.id})}return j.jsx(a,{flow:F,ref:e,children:K})}a.displayName=a.name+" [from "+f.id+"]";a=e;g["default"]=a}),98);
__d("WAWebWamEnumWebContactListStartNewChatType",[],(function(a,b,c,d,e,f){a=Object.freeze({CONTACT:1,GROUP:2,CONTACTLESS:3});f.WEB_CONTACT_LIST_START_NEW_CHAT_TYPE=a}),66);
__d("WAWebWebContactListStartNewChatWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebContactListStartNewChatType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebContactListStartNewChat:[4560,{webContactListStartNewChatSearch:[1,d("WAWebWamCodegenUtils").TYPES.BOOLEAN],webContactListStartNewChatType:[2,d("WAWebWamEnumWebContactListStartNewChatType").WEB_CONTACT_LIST_START_NEW_CHAT_TYPE]},[1,1,1],"regular"]},{WebContactListStartNewChat:[]});g.WebContactListStartNewChatWamEvent=a}),98);
__d("WAWebNewChatMetricUtils",["WATimeUtils","WAWebChatConstants","WAWebChatThreadLogging","WAWebWebContactListStartNewChatWamEvent"],(function(a,b,c,d,e,f,g){function a(a){var b=a.isSearchResult;a=a.chatType;new(d("WAWebWebContactListStartNewChatWamEvent").WebContactListStartNewChatWamEvent)({webContactListStartNewChatSearch:b,webContactListStartNewChatType:a}).commit()}function b(a){var b=!(a.msgs.some(function(a){return a.isRealMessage()})||a.endOfHistoryTransferType===d("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType.INCOMPLETE);b&&d("WAWebChatThreadLogging").handleActivitiesForChatThreadLogging([{activityType:"viaContactlessChats",ts:d("WATimeUtils").unixTime(),chatId:a.id,boolValue:!0}])}g.logContactListStartNewChatAction=a;g.logInitiatedContactlessChat=b}),98);
__d("WAWebNewChatDrawer.react",["fbt","WALogger","WAWebAccountTakeOverBanner.react","WAWebApiContact","WAWebBox.react","WAWebCellBorder.react","WAWebChatContactList.react","WAWebChatListSearch.react","WAWebCmd","WAWebCommunityGatingUtils","WAWebComposeBoxActions","WAWebContactCollection","WAWebContactGetters","WAWebContactManagementGating","WAWebContactlessChatUtils","WAWebDefaultAddProfilePicture.react","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDrawerManager","WAWebDrawerViewType","WAWebEmptyState.react","WAWebFbtCommon","WAWebFindChatAction","WAWebFlatListController","WAWebFocusIndicator","WAWebL10N","WAWebLidContactsGatingUtils","WAWebNewChatMetricUtils","WAWebPhoneNumberSearch","WAWebQueryExistsJob","WAWebUIRefreshGatingUtils","WAWebUISpacing","WAWebUnknownContactSection.react","WAWebUseContactManagementAvailability","WAWebUserPrefsMeUser","WAWebUsernameGatingUtils","WAWebWDSCell.react","WAWebWDSText.react","WAWebWamEnumWebContactListStartNewChatType","WAWebWidFactory","asyncToGeneratorRuntime","react","useLazyRef","useWAWebDebouncedCallback","useWAWebForceUpdate","useWAWebListener","useWAWebStableCallback","useWAWebUnknownContact"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryUsernameExists failed with error:",""]);k=function(){return a};return a}e=j||d("react");var l=i||(i=c("react")),m=e.useCallback,n=e.useRef,o=e.useState,p={atoBanner:{paddingTop:"x1cnzs8",paddingBottom:"x1a8lsjc",marginTop:"x1kgmq87",marginBottom:"xmgb6t1",backgroundColor:"x150wa6m",zIndex:"xyw6214",position:"x1n2onr6",$$css:!0}},q=3;function r(a){var b=a.image,e=a.onClick;a=a.primary;var f=h._(/*BTDS*/"__JHASH__vDb1gwdkYRB__JHASH__",[h._param("item-title",a.toString())]);return l.jsxs(d("WAWebBox.react").Box,{padding:d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?[0,8]:null,children:[l.jsx(d("WAWebWDSCell.react").WDSCell,{size:"medium",material:d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled(),detailLeft:b,detailLeftXStyle:[d("WAWebUISpacing").uiPadding.start13],primary:l.jsxs(d("WAWebWDSText.react").WDSTextTitle,{children:[a," "]}),onClick:e,ariaLabel:f}),!d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()&&l.jsx(c("WAWebCellBorder.react"),{})]})}r.displayName=r.name+" [from "+f.id+"]";e=l.forwardRef(a);function a(a,e){a=babelHelpers["extends"]({},a);var f=a.title,g=a.onBack,i=a.onClick,j=a.onNewGroup,s=a.onNewCommunity,t=a.onNewContact;a=a.viewType;var u=o(""),v=u[0],w=u[1];u=o(null);var x=u[0],y=u[1];u=n();var z=n(),A=n(),B=Boolean(v),C=x!=null?d("WAWebContactCollection").ContactCollection.get(x):null;x=c("useLazyRef")(function(){return new(c("WAWebFlatListController"))()});var D=d("WAWebLidContactsGatingUtils").isLidContactOneOnOneChatEnabled(),E=d("WAWebUsernameGatingUtils").usernameContactlessChatEnabled(),F=h._(/*BTDS*/"__JHASH__UGA_7UxgMl-__JHASH__"),G=d("useWAWebForceUpdate").useForceUpdateDONOTUSE();d("useWAWebListener").useListener(d("WAWebContactCollection").ContactCollection,"change:name",G);G=d("WAWebUseContactManagementAvailability").useAccountIntegrityState();E?F=h._(/*BTDS*/"__JHASH__9_YtmuZHuHu__JHASH__"):F=c("WAWebFbtCommon")("Search name or number");var H=m(function(b){d("WAWebContactCollection").ContactCollection.ensureSorted();b=typeof b==="string"?b:v;if(!b)return d("WAWebContactCollection").ContactCollection.getFilteredContacts({showMe:!!b,includeLidContacts:D});var a=d("WAWebContactCollection").ContactCollection.getFilteredContacts({showMe:!!b,includeLidContacts:D}).concat(d("WAWebContactCollection").ContactCollection.filter(function(a){return a.name&&!d("WAWebContactGetters").getIsMe(a)&&!d("WAWebContactGetters").getIsPSA(a)&&!d("WAWebContactGetters").getIsWAContact(a)&&!d("WAWebContactGetters").getIsNewsletter(a)})),e=c("WAWebL10N").accentFold(b),f=d("WAWebPhoneNumberSearch").numberSearch(e);return a.filter(function(a){return a.searchMatch(e,f)})},[v,D]),I=H(),J=c("useWAWebUnknownContact")({phoneNumber:v,shouldStartSearch:I.length===0}),K=J.unknownContactInfo,L=J.loading,M=J.error;J=J.onRetry;var N=c("useWAWebDebouncedCallback")(function(a){return w(a)},100),O=m(function(a){A.current=a,E&&a.length>=q&&d("WAWebQueryExistsJob").queryUsernameExists(a).then(function(b){if(A.current===a){y((b=b==null?void 0:b.wid)!=null?b:null);N(a)}})["catch"](function(b){A.current===a&&(y(null),N(a)),d("WALogger").ERROR(k(),b).devConsole(b)}),A.current=a,N(a)},[E,N]),P=m(function(a,b,d){c("WAWebFocusIndicator").shouldIndicateFocus(),i(a,b,void 0,d)},[i]),Q=c("useWAWebStableCallback")(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a.preventDefault();a.stopPropagation();d("WAWebDrawerManager").DrawerManager.closeDrawerLeft();a=(a=K==null?void 0:K.chat)!=null?a:yield d("WAWebFindChatAction").findOrCreateLatestChat(b,"newChatFlow");b=d("WAWebCmd").Cmd.openChatFromUnread(a);if(!b)return;d("WAWebNewChatMetricUtils").logInitiatedContactlessChat(a);d("WAWebNewChatMetricUtils").logContactListStartNewChatAction({chatType:d("WAWebWamEnumWebContactListStartNewChatType").WEB_CONTACT_LIST_START_NEW_CHAT_TYPE.CONTACTLESS,isSearchResult:!0});d("WAWebComposeBoxActions").ComposeBoxActions.focus(a)});return function(b,c){return a.apply(this,arguments)}}()),R=m(function(a){a.preventDefault();a.stopPropagation();if(C){P(a,C,"username_contactless_search");return}if(!B){var b=d("WAWebContactCollection").ContactCollection.assertGet(d("WAWebUserPrefsMeUser").getMeUser());P(a,b);return}b=H(A.current)[0];if(b){P(a,b);return}(K==null?void 0:K.wid)&&void Q(a,K.wid)},[C,B,H,K==null?void 0:K.wid,P,Q]),S=[];if(!v){var T=l.jsx(d("WAWebDefaultAddProfilePicture.react").DefaultAddProfilePicture,{directional:!0,type:"group",size:48});S.push({image:T,id:h._(/*BTDS*/"__JHASH__6EroHqWSWmZ__JHASH__"),onClick:j});if(d("WAWebContactManagementGating").contactManagementEnabled()){T=l.jsx(d("WAWebDefaultAddProfilePicture.react").DefaultAddProfilePicture,{directional:!0,type:"contact",size:48});j=h._(/*BTDS*/"__JHASH__UtaS3T1Ecyz__JHASH__");S.push({image:T,id:j,onClick:t})}if(d("WAWebCommunityGatingUtils").communitiesCreationEnabled()){T=l.jsx(d("WAWebDefaultAddProfilePicture.react").DefaultAddProfilePicture,{directional:!0,type:"community",size:48});S.push({image:T,id:h._(/*BTDS*/"__JHASH__KIkd5AW9_IK__JHASH__"),onClick:s})}}j=null;G===d("WAWebUseContactManagementAvailability").AccountIntegrityState.TIMELOCK&&(j=l.jsx(d("WAWebAccountTakeOverBanner.react").AccountTakeOverBanner,{entryPoint:"new-chat",xstyle:p.atoBanner}));t=function(a){if(a!=null){var b=d("WAWebApiContact").getPhoneNumber(d("WAWebWidFactory").toUserWid(a.id));b=b!=null?d("WAWebContactCollection").ContactCollection.get(b):null;if((b==null||!I.includes(b))&&!I.includes(a))return[a]}return};T=t(C);I.length===0&&!C&&!!v?L?s=l.jsx(d("WAWebEmptyState.react").SearchingNonContact,{}):M?s=l.jsx(d("WAWebEmptyState.react").SearchingNonContactError,{error:d("WAWebContactlessChatUtils").getErrorStr(M),onClick:J}):K?s=l.jsx(c("WAWebUnknownContactSection.react"),{contactInfo:K,onUnknownContactClick:Q}):s=l.jsx(d("WAWebEmptyState.react").SearchWithKeyword,{keyword:v}):s=l.jsx(c("WAWebChatContactList.react"),{ref:z,contacts:I,flatListController:x.current,usernameContacts:T,onClick:i,showMe:!B,showBot:!B,showPersonGroupDivisionHeader:!0,showHeaderSpinner:G===d("WAWebUseContactManagementAvailability").AccountIntegrityState.PENDING});t=a===c("WAWebDrawerViewType").FLYOUT?d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.FLYOUT:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL;return l.jsxs(c("WAWebDrawer.react"),{ref:e,testid:void 0,viewType:a,children:[l.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:f,type:t,onBack:a===c("WAWebDrawerViewType").FLYOUT?void 0:g}),l.jsx(d("WAWebChatListSearch.react").ListSearch,{ref:u,onSearch:O,onEnter:R,placeholder:F,type:d("WAWebChatListSearch.react").ListSearchType.NEW_CHAT_CONTACT_SEARCH,loading:L,showPlaceholderUntilType:!0,focusOnMount:!0}),l.jsxs(c("WAWebDrawerBody.react"),{flatListControllers:[x.current],backgroundColor:"default",children:[S.map(function(a,b){var c=a.image,d=a.id;a=a.onClick;return l.jsx(r,{image:c,primary:d,onClick:a},b)}),j,s]})]},"contact-modal")}a.displayName=a.name+" [from "+f.id+"]";a=e;g["default"]=a}),226);
__d("WAWebNewChatFlowTypes",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["NewChatDrawer","NewCommunityFlow","NewGroupFlow","NewContactFlow"]);f.NewChatFlowStep=a}),66);
__d("WAWebNewChatFlow.react",["fbt","WAWebChatGetters","WAWebCmd","WAWebCommunityCreationFlowMetricUtils","WAWebComposeBoxActions","WAWebContactCollection","WAWebContactEditDrawer.react","WAWebContactEditUtils","WAWebContactGetters","WAWebContactLogging","WAWebDrawerViewType","WAWebFindChatAction","WAWebMessageYourselfMetricUtils","WAWebModal.react","WAWebModalManager","WAWebNativeContactsNuxPopup.react","WAWebNewChatDrawer.react","WAWebNewChatFlowTypes","WAWebNewChatMetricUtils","WAWebNewCommunityInfoDrawer.react","WAWebNewGroupFlowLoadable","WAWebUIRefreshGatingUtils","WAWebWamEnumCommunityCreationCurrentScreenType","WAWebWamEnumCommunityCreationEntrypointType","WAWebWamEnumWebContactListStartNewChatType","asyncToGeneratorRuntime","react","useWAWebFlow","useWAWebListener"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react"),l=(i||(i=d("react"))).useRef;e=k.forwardRef(a);function a(a,e){var f=a.onEnd,g=a.viewType;d("WAWebContactCollection").ContactCollection.ensureSorted();var i=l();a=d("useWAWebFlow").useFlow(d("WAWebNewChatFlowTypes").NewChatFlowStep.NewChatDrawer,{transitions:d("useWAWebFlow").FlowTransitions.DrawerRight,onEnd:f});f=a[0];var j=a[1];a=function(){j.end()};d("useWAWebListener").useListener(d("WAWebCmd").Cmd,"end_flow",a);var m=function(a,b,c){c===void 0&&(c=!1);var e={};a.isEnterprise&&a.privacyMode!=null&&(e.nextPrivacyMode=a.privacyMode);void d("WAWebFindChatAction").findOrCreateLatestChat(a.id,(b=b)!=null?b:"newChatFlow",e).then(function(b){d("WAWebCmd").Cmd.openChatFromUnread(b).then(function(e){if(!e)return;e=d("WAWebChatGetters").getIsGroup(b)?d("WAWebWamEnumWebContactListStartNewChatType").WEB_CONTACT_LIST_START_NEW_CHAT_TYPE.GROUP:d("WAWebWamEnumWebContactListStartNewChatType").WEB_CONTACT_LIST_START_NEW_CHAT_TYPE.CONTACT;d("WAWebNewChatMetricUtils").logContactListStartNewChatAction({chatType:e,isSearchResult:d("WAWebChatGetters").getIsGroup(b)||c});d("WAWebContactGetters").getIsMe(a)&&d("WAWebMessageYourselfMetricUtils").UiMessageYourselfNewChatAction.logMessageYourselfOpenedEvent(b,c);d("WAWebComposeBoxActions").ComposeBoxActions.focus(b)})})};a=function(a,b,c,d){c===void 0&&(c=!1),m(b,d,c),j.end()};var n=function(a){a=d("WAWebContactCollection").ContactCollection.assertGet(a);m(a,"createContact");g===c("WAWebDrawerViewType").FLYOUT||d("WAWebUIRefreshGatingUtils").newChatCreationModalEnabled()?d("WAWebModalManager").ModalManager.close():j.end()},o=function(a){g===c("WAWebDrawerViewType").FLYOUT||d("WAWebUIRefreshGatingUtils").newChatCreationModalEnabled()?(j.end(),d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebModal.react").Modal,{type:d("WAWebModal.react").ModalTheme.Tower,children:k.jsx(d("WAWebNewGroupFlowLoadable").NewGroupFlowLoadable,{onCreateGroup:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield a,d("WAWebModalManager").ModalManager.close()});return function(b){return a.apply(this,arguments)}}(),onEnd:function(){d("WAWebModalManager").ModalManager.close()},viewType:c("WAWebDrawerViewType").MODAL})}))):j.push(d("WAWebNewChatFlowTypes").NewChatFlowStep.NewGroupFlow)},p=function(a){g===c("WAWebDrawerViewType").FLYOUT||d("WAWebUIRefreshGatingUtils").newChatCreationModalEnabled()?(j.end(),d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebModal.react").Modal,{type:d("WAWebModal.react").ModalTheme.Tower,children:k.jsx(c("WAWebNewCommunityInfoDrawer.react"),{onCreateCommunity:function(){d("WAWebModalManager").ModalManager.close()},viewType:c("WAWebDrawerViewType").MODAL,onCancel:function(){d("WAWebModalManager").ModalManager.close()}})}))):j.push(d("WAWebNewChatFlowTypes").NewChatFlowStep.NewCommunityFlow),d("WAWebCommunityCreationFlowMetricUtils").UiCommunityCreationAction.startSession(d("WAWebWamEnumCommunityCreationEntrypointType").COMMUNITY_CREATION_ENTRYPOINT_TYPE.CHATS_TAB),d("WAWebCommunityCreationFlowMetricUtils").UiCommunityCreationAction.enter(d("WAWebWamEnumCommunityCreationCurrentScreenType").COMMUNITY_CREATION_CURRENT_SCREEN_TYPE.CHATS_TAB)},q=function(a){if(d("WAWebContactEditUtils").shouldShowNativeContactsNux()){d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebNativeContactsNuxPopup.react").NativeContactsNuxPopup,{source:d("WAWebContactLogging").ContactSourceType.NewChat}));return}g===c("WAWebDrawerViewType").FLYOUT||d("WAWebUIRefreshGatingUtils").newChatCreationModalEnabled()?(j.end(),d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebModal.react").Modal,{type:d("WAWebModal.react").ModalTheme.Tower,children:k.jsx(c("WAWebContactEditDrawer.react"),{ref:i,origin:d("WAWebContactLogging").ContactSourceType.NewChat,onSave:n,viewType:c("WAWebDrawerViewType").MODAL,onCancel:function(){d("WAWebModalManager").ModalManager.close()}})}))):j.push(d("WAWebNewChatFlowTypes").NewChatFlowStep.NewContactFlow)},r=function(){if(j.step===d("WAWebNewChatFlowTypes").NewChatFlowStep.NewContactFlow){var a;(a=i.current)==null?void 0:a.handleDismiss()}j.pop()};if(j.step==null)return null;var s=null;switch(j.step){case d("WAWebNewChatFlowTypes").NewChatFlowStep.NewChatDrawer:s=k.jsx(c("WAWebNewChatDrawer.react"),{title:h._(/*BTDS*/"__JHASH__G__8-ng2r4N__JHASH__"),onBack:function(){return j.end()},onClick:a,onNewGroup:o,onNewCommunity:p,onNewContact:q,viewType:(a=g)!=null?a:c("WAWebDrawerViewType").DRAWER});break;case d("WAWebNewChatFlowTypes").NewChatFlowStep.NewGroupFlow:s=k.jsx(d("WAWebNewGroupFlowLoadable").NewGroupFlowLoadable,{onCreateGroup:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield a,j.end()});return function(b){return a.apply(this,arguments)}}(),onEnd:j.pop,viewType:(o=g)!=null?o:c("WAWebDrawerViewType").DRAWER});break;case d("WAWebNewChatFlowTypes").NewChatFlowStep.NewCommunityFlow:s=k.jsx(c("WAWebNewCommunityInfoDrawer.react"),{onBack:j.pop,onCreateCommunity:g===c("WAWebDrawerViewType").MODAL?j.end:void 0,viewType:(p=g)!=null?p:c("WAWebDrawerViewType").DRAWER});break;case d("WAWebNewChatFlowTypes").NewChatFlowStep.NewContactFlow:s=k.jsx(c("WAWebContactEditDrawer.react"),{ref:i,origin:d("WAWebContactLogging").ContactSourceType.NewChat,onSave:n,onBack:j.pop,viewType:(q=g)!=null?q:c("WAWebDrawerViewType").DRAWER});break}return k.jsx(f,{ref:e,flow:j,requestDismiss:r,children:s})}a.displayName=a.name+" [from "+f.id+"]";a=e;g["default"]=a}),226);
__d("WAWebOrderIcons",["WAWebCircledPlusCustomIcon","WAWebListMsgIconIcon.react","WAWebProductCatalogProductThumb.react","WAWebUISpacing","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j={customItemSVG:{color:"xx2jlie",$$css:!0},addItemSVG:{color:"xx2jlie",borderTopWidth:"xamhcws",borderEndWidth:"xol2nv",borderBottomWidth:"xlxy82",borderStartWidth:"x19p7ews",$$css:!0}};function k(){return i.jsx("div",{className:"x78zum5 x6s0dn4 x1useyqa xsdox4t x1lq5wgf xgqcy7u x30kzoy x9jhf4c x16kknjp xuh0odg",children:i.jsx(d("WAWebListMsgIconIcon.react").ListMsgIconIcon,{xstyle:[j.customItemSVG,d("WAWebUISpacing").uiMargin.allAuto]})})}k.displayName=k.name+" [from "+f.id+"]";function a(){return i.jsx("div",{className:"x78zum5 x6s0dn4 x1useyqa xsdox4t x1lq5wgf xgqcy7u x30kzoy x9jhf4c x16kknjp xuh0odg",children:i.jsx(d("WAWebCircledPlusCustomIcon").CircledPlusCustomIcon,{wrapperStyles:[j.addItemSVG,d("WAWebUISpacing").uiMargin.allAuto],height:18})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){var b=a.mediaData;a=a.useCustomIcon;return a||b==null?i.jsx(k,{}):i.jsx(d("WAWebProductCatalogProductThumb.react").ProductThumb,{mediaData:b,theme:"orderSquareThumb"})}b.displayName=b.name+" [from "+f.id+"]";g.AddItemIcon=a;g.OrderItemIcon=b}),98);
__d("WAWebOrderAddItem",["WAWebCellFrame.react","WAWebOrderIcons","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.onClick;a=a.title;return i.jsx(c("WAWebCellFrame.react"),{testid:void 0,image:i.jsx(d("WAWebOrderIcons").AddItemIcon,{}),primary:a,theme:"add-order-item",onClick:b})}a.displayName=a.name+" [from "+f.id+"]";g.AddOrderItem=a}),98);
__d("WAWebOrderDetailErrorUtils",["fbt","WATypeUtils","WAWebCurrencyUtils","WAWebOrderDetailMath","WAWebToast.react","WAWebToastManager","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react"),l=(i||(i=d("react"))).useEffect;function a(a){l(function(){for(var b in a){var c=a[b];c!=null&&d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebToast.react").Toast,{duration:1e4,id:b+c.toString(),msg:c,action:{actionText:h._(/*BTDS*/"__JHASH__nLwPTwDvvsf__JHASH__"),dismiss:!0,theme:"success"}}))}},[a])}function m(){return h._(/*BTDS*/"__JHASH__tqDDvTVPFPw__JHASH__")}m.displayName=m.name+" [from "+f.id+"]";function n(){return h._(/*BTDS*/"__JHASH__66sCzqcyhX4__JHASH__")}n.displayName=n.name+" [from "+f.id+"]";var o=function(a){return h._(/*BTDS*/"__JHASH__AaN_pZwLUWu__JHASH__",[h._param("input_label",a)])},p=function(a){return h._(/*BTDS*/"__JHASH__ZpoQZjdbWJ3__JHASH__",[h._param("input_label",a)])};function b(a){var b=a.label,c=a.currency,e=a.fieldType,f=a.maxFlatValue,g=a.enablePercentValueCheck;a=a.value;if(!d("WAWebCurrencyUtils").validatePriceString(c,a))return m();c=d("WAWebCurrencyUtils").valueFromString(c,a)/d("WAWebOrderDetailMath").DEFAULT_OFFSET;if(c<0)return n();if(e===d("WAWebOrderDetailMath").PERCENTAGE_SYMBOL){if(Boolean(g)&&c>100){return o((a=b)!=null?a:"")}}else if(d("WATypeUtils").isNumber(f)&&c>f){return p((e=b)!=null?e:"")}return""}g.useShowToastErrors=a;g.getOrderDetailInvalidNumberErrorMessage=m;g.getOrderDetailNegativeNumberErrorMessage=n;g.errorMessageBigPercentageValue=o;g.errorMessageBigFlatValue=p;g.additionalChargeErrorHandler=b}),226);
__d("WAWebOrderDetailAmountInput",["fbt","WAWebCurrencyUtils","WAWebOrderDetailErrorUtils","WAWebOrderDetailMath","WAWebRichTextField.react","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k,l=k||c("react"),m=(i||(i=d("react"))).useState;function n(a,b){if(a==null||!a.length||!d("WAWebCurrencyUtils").validatePriceString(b,a))return h._(/*BTDS*/"__JHASH__ZweQ2CBBcMh__JHASH__");b=d("WAWebCurrencyUtils").valueFromString(b,a)/d("WAWebOrderDetailMath").DEFAULT_OFFSET;if(b<0)return h._(/*BTDS*/"__JHASH__u43SMPYf3Hq__JHASH__")}var o={container:{textAlign:"x1yc453h",width:"x1dmp6jm",overflowX:"x6ikm8r",overflowY:"x10wlt62",marginTop:"xs9mwh0",$$css:!0}};function a(a){var b=a.currency,e=a.onCancel,f=a.onSave;a=a.value;var g=m(null),i=g[0],k=g[1];g=m(a);var p=g[0],q=g[1];d("WAWebOrderDetailErrorUtils").useShowToastErrors({productPriceError:i});return l.jsx("div",{className:(j||(j=c("stylex")))([o.container,d("WAWebUISpacing").uiPadding.end2]),children:l.jsx(d("WAWebRichTextField.react").RichTextField,{managed:!0,constrainedWidth:!0,hideFloatingLabel:!0,focusOnMount:!0,editable:!0,lockable:!0,startActive:!0,placeholder:h._(/*BTDS*/"__JHASH__-SoDyY-vVy6__JHASH__"),value:p,theme:"default",maxLength:12,customStyleThemes:["disabledLabel","noErrorInfo"],testid:void 0,validate:function(a){a=n(a,b);k(a);return!a},onChange:function(a){a=a.text;q(a);k(n(a,b))},onSave:function(){f(p)},onCancel:e,error:i})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebOrderDetailSharedStyles",[],(function(a,b,c,d,e,f,g){a={clickableText:{color:"x1a06ls3",cursor:"x1ypdohk",fontWeight:"xo1l8bm",lineHeight:"x15bjb6t",letterSpacing:"x12oo3zp",":hover_textDecoration":"xt0b8zv",$$css:!0}};g["default"]=a}),98);
__d("WAWebOrderCatalogProductPrice",["fbt","$InternalEnum","WAWebCurrencyUtils","WAWebFlex.react","WAWebOrderDetailAmountInput","WAWebOrderDetailSharedStyles","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k=i||c("react"),l=b("$InternalEnum").Mirrored(["Readonly","EditableBlank","EditableFilled","Editing"]);function a(a){var b=a.currency;a.onEnter;var e=a.onPriceChange,f=a.onPriceStageChange,g=a.orderItem,i=a.price;a=a.priceStage;switch(a){case l.Editing:return k.jsx("div",{role:"textbox",onClick:function(a){return a.stopPropagation()},"data-testid":void 0,children:k.jsxs(d("WAWebFlex.react").FlexRow,{align:"center",children:[k.jsx("span",{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiPadding.end3),children:d("WAWebCurrencyUtils").formatAmount1000ToParts(b,0).symbol}),k.jsx(c("WAWebOrderDetailAmountInput"),{currency:b,value:i!=null?String(i/1e3):"",onSave:function(a){f(l.EditableFilled),e(d("WAWebCurrencyUtils").valueFromString(b,a))},onCancel:function(){f(i==null?l.EditableBlank:l.EditableFilled)}})]})});case l.EditableFilled:return k.jsx("div",{role:"button",className:(j||(j=c("stylex")))(c("WAWebOrderDetailSharedStyles").clickableText),onClick:function(a){f(l.Editing),a.stopPropagation()},"data-testid":void 0,children:d("WAWebCurrencyUtils").formatAmount1000(b,Number(i))});case l.EditableBlank:return k.jsx("span",{role:"button",className:(j||(j=c("stylex")))(c("WAWebOrderDetailSharedStyles").clickableText),onClick:function(a){f(l.Editing),a.stopPropagation()},"data-testid":void 0,children:h._(/*BTDS*/"__JHASH__HSD4ClGLE8C__JHASH__")});default:return k.jsx("div",{"data-testid":void 0,children:d("WAWebCurrencyUtils").formatAmount1000(b,g.price)})}}a.displayName=a.name+" [from "+f.id+"]";g.PriceStage=l;g.CatalogProductPrice=a}),226);
__d("WAWebOrderDetailItems",["fbt","WAWebBizGatingUtils","WAWebCartDeleteIcon.react","WAWebCellFrame.react","WAWebCommonQuantityControls.react","WAWebConfirmPopup.react","WAWebFlex.react","WAWebModalManager","WAWebOrderAddItem","WAWebOrderCatalogProductPrice","WAWebOrderIcons","WAWebOrderItemGetters","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k;b=k||d("react");var l=i||(i=c("react")),m=b.useCallback,n=b.useState,o={orderItemsContainer:{marginTop:"x7wgvq7",marginEnd:"x11i5rnm",marginBottom:"xh3wvx0",marginStart:"x1mh8g0r",$$css:!0}};function p(a,b){d("WAWebModalManager").ModalManager.open(l.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._(/*BTDS*/"__JHASH__Lt6RXPmqBXb__JHASH__",[h._param("order_item_name",b)]),okText:h._(/*BTDS*/"__JHASH__Ui8DRBy34xc__JHASH__"),onOK:function(){a==null?void 0:a(),d("WAWebModalManager").ModalManager.close()},cancelText:h._(/*BTDS*/"__JHASH__J0wgiJDfDW-__JHASH__"),onCancel:function(){d("WAWebModalManager").ModalManager.close()}}))}function a(a){var b=a.currency,e=a.details,f=a.items,g=a.onAddItem,i=a.onDeleteItem,k=a.onItemQuantityChange,q=a.onPriceChange,r=a.priceMap;a=n(null);var s=a[0],t=a[1];a=n({});var u=a[0],v=a[1],w=m(function(a){if(a.price!=null)return d("WAWebOrderCatalogProductPrice").PriceStage.Readonly;else if((r==null?void 0:r[a.id])!=null)return d("WAWebOrderCatalogProductPrice").PriceStage.EditableFilled;return d("WAWebOrderCatalogProductPrice").PriceStage.EditableBlank},[r]),x=m(function(a,b){v(function(c){return babelHelpers["extends"]({},c,(c={},c[b.id]=a,c))})},[]),y=Boolean(e),z=function(a,e){var f;return l.jsxs("div",{className:"x78zum5 x6s0dn4",children:[l.jsx(d("WAWebOrderCatalogProductPrice").CatalogProductPrice,{price:(f=r==null?void 0:r[a.id])!=null?f:null,priceStage:(f=u[a.id])!=null?f:w(a),currency:b,orderItem:a,onPriceChange:function(b){return q==null?void 0:q(b,a.id)},onPriceStageChange:function(b){x(b,a)},onEnter:function(){t(null)}}),e===s&&l.jsx("div",{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiMargin.start5),children:l.jsx(c("WAWebCartDeleteIcon.react"),{onClick:function(b){b.stopPropagation(),p(function(){return i==null?void 0:i(e)},a.name)}})})]})};return l.jsxs(d("WAWebFlex.react").FlexColumn,{align:"stretch",xstyle:o.orderItemsContainer,children:[!y&&(d("WAWebBizGatingUtils").orderDetailsFromCatalogEnabled()||d("WAWebBizGatingUtils").orderDetailsCustomItemEnabled())&&l.jsx(d("WAWebOrderAddItem").AddOrderItem,{title:h._(/*BTDS*/"__JHASH__SSsOJuYz6YE__JHASH__"),onClick:function(){return g==null?void 0:g()}}),f.map(function(a,b){var e=h._(/*BTDS*/"__JHASH__OTl03tJfRde__JHASH__",[h._param("item-quantity",a.quantity)]);return l.jsx(c("WAWebCellFrame.react"),babelHelpers["extends"]({testid:void 0,className:(j||(j=c("stylex")))(b>0&&d("WAWebUISpacing").uiPadding.top10),disabled:!0,image:l.jsx(d("WAWebOrderIcons").OrderItemIcon,{mediaData:a.thumbnailUrl?d("WAWebOrderItemGetters").getMediaData(a):null,useCustomIcon:a.isCustomItem}),primary:l.jsx("span",{className:"xzwifym xuxw1ft x6ikm8r x10wlt62 xlyipyv",title:a.name,children:a.name}),secondary:y?e:l.jsx(c("WAWebCommonQuantityControls.react"),{quantity:a.quantity,onAddOneClick:function(){return k==null?void 0:k(b,a.quantity+1)},onRemoveOneClick:function(){return k==null?void 0:k(b,a.quantity-1)}}),theme:"add-order-item",detail:z(a,b)},y?void 0:{onMouseEnter:function(){return t(b)},onMouseLeave:function(){return t(null)}}),b)})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebOrderDetailRadioButton.react",["WAWebCheckBoxRound.react","WAWebFlex.react","WAWebUISpacing","WAWebUnstyledButton.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b,e=a.checked,f=a.isCanceled,g=a.label,h=a.onClick;a=a.testid;return i.jsx(c("WAWebUnstyledButton.react"),{onClick:h,testid:void 0,children:i.jsxs(d("WAWebFlex.react").FlexRow,{children:[i.jsx(d("WAWebFlex.react").FlexColumn,{xstyle:[d("WAWebUISpacing").uiPadding.start12,d("WAWebUISpacing").uiPadding.end24],children:i.jsx(c("WAWebCheckBoxRound.react"),{checked:e,radio:!0,hover:!1,systemUncheckedColor:!0,onChange:function(){return void h()}})}),i.jsx("div",{className:f?"x1sr8853":null,children:g})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrderDetailSectionContainer.react",["WAWebFlex.react","react"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react"),k=(h||(h=d("react"))).Children,l={container:{rowGap:"xgpatz3",columnGap:"x40hh3e",$$css:!0}};function a(a){a=a.children;return j.jsx(d("WAWebFlex.react").FlexColumn,{xstyle:l.container,align:"stretch",children:k.map(a,function(a,b){return j.jsxs(j.Fragment,{children:[b!==0?j.jsx("div",{className:"xqtp20y x178xt8z xlya59e xyj1x25"}):null,a]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrderDetailSellerProfile.react",["fbt","WAWebBizGatingUtils","WAWebContactCollection","WAWebDetailImage.react","WAWebFlex.react","WAWebName.react","WAWebText_DONOTUSE.react","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k=i||c("react"),l={container:{rowGap:"x1b8z93w",columnGap:"x1amjocr",$$css:!0},uppercase:{textTransform:"xtvhhri",$$css:!0}};function a(a){var b=a.orderId,e=a.orderStatus,f=a.sellerWid;a=a.testid;a=d("WAWebContactCollection").ContactCollection.get(f);f=a?k.jsxs(k.Fragment,{children:[k.jsx(d("WAWebFlex.react").FlexRow,{children:k.jsx(d("WAWebDetailImage.react").DetailImage,{id:f,size:48})}),k.jsxs(d("WAWebFlex.react").FlexColumn,{align:"center",children:[k.jsx(d("WAWebName.react").Name,{className:"x1603h9y x1u7k74 xk50ysn x1wm35g",useDisplayName:!0,contact:a}),b!=null?k.jsx(d("WAWebText_DONOTUSE.react").TextDiv,{color:"secondary",weight:"medium",className:(j||(j=c("stylex")))(l.uppercase,d("WAWebUISpacing").uiMargin.top4),children:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._(/*BTDS*/"__JHASH__5Y7gpQOhqp8__JHASH__",[h._param("order-id",b)]):h._(/*BTDS*/"__JHASH__ke1rTLyoyvQ__JHASH__",[h._param("order-id",b)])}):null]})]}):null;return k.jsxs(d("WAWebFlex.react").FlexColumn,{align:"center",xstyle:[l.container,d("WAWebUISpacing").uiPadding.horiz16],testid:void 0,children:[f,e]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebOrderEphemeralExemptionPopup.react",["fbt","WAWebBizGatingUtils","WAWebCheckBox.react","WAWebConfirmPopup.react","WAWebFrontendContactGetters","WAWebModalManager","WAWebUISpacing","WAWebUserPrefsKeys","WAWebUserPrefsStore","WAWebWDSText.react","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k,l=k||c("react"),m=(i||(i=d("react"))).useState;function a(a){var b=a.chat,e=a.onSubmit;a=d("WAWebFrontendContactGetters").getFormattedUser(b.contact);b=m(!1);var f=b[0],g=b[1];b=function(){g(!f)};var i=function(){f&&c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.DISAPPEARING_MSG_DISCLAIMER_DIMISSED,!0),d("WAWebModalManager").ModalManager.close(),e()},k=function(){d("WAWebModalManager").ModalManager.close()};return l.jsxs(d("WAWebConfirmPopup.react").ConfirmPopup,{testid:void 0,title:h._(/*BTDS*/"__JHASH__MIsnms4txfd__JHASH__"),onOK:i,onCancel:k,children:[l.jsx(d("WAWebWDSText.react").WDSTextSectionTitle,{children:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._(/*BTDS*/"__JHASH__RAgaSFHxAu2__JHASH__",[h._param("contact-name",a)]):h._(/*BTDS*/"__JHASH__r0ZIh2f-hHW__JHASH__",[h._param("contact-name",a)])}),l.jsx("div",{children:l.jsxs("div",{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiPadding.vert6),children:[l.jsx(d("WAWebCheckBox.react").CheckBox,{testid:void 0,id:"order-ephemeral-exemption-popup-skip-checkbox-id",checked:f,onChange:b}),l.jsx("label",{htmlFor:"order-ephemeral-exemption-popup-skip-checkbox-id",className:d("WAWebUISpacing").uiMargin.start8,children:h._(/*BTDS*/"__JHASH__M21Bt0gDpmG__JHASH__")})]})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebSmbMarkAsXOrderAction",["WASmaxInBizSettingsEnums","WAWebBizGatingUtils","WAWebCTWADataSharingModel","WAWebCommonCTWADataSharing","WAWebCtwaOrderSignalWamEvent","WAWebOrderStatus","WAWebWamEnumCustomerAdsSharingSettingEnabled","WAWebWamEnumOrderSignalType","WAWebWamEnumOrderStatus"],(function(a,b,c,d,e,f,g){var h=function(a){switch(a){case d("WAWebOrderStatus").OrderStatus.Processing:case d("WAWebOrderStatus").OrderStatus.PreparingToShip:return d("WAWebWamEnumOrderStatus").ORDER_STATUS.PROCESSING;case d("WAWebOrderStatus").OrderStatus.Shipped:return d("WAWebWamEnumOrderStatus").ORDER_STATUS.SHIPPED;case d("WAWebOrderStatus").OrderStatus.Complete:case d("WAWebOrderStatus").OrderStatus.Delivered:return d("WAWebWamEnumOrderStatus").ORDER_STATUS.COMPLETED;case d("WAWebOrderStatus").OrderStatus.Canceled:return d("WAWebWamEnumOrderStatus").ORDER_STATUS.CANCELLED;case d("WAWebOrderStatus").OrderStatus.Pending:case d("WAWebOrderStatus").OrderStatus.PartiallyShipped:case d("WAWebOrderStatus").OrderStatus.PaymentRequested:return null}},i=function(a){var b=d("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue();b===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"]?a={globalSharingSettingEnabled:!0,eventSharingSettingEnabled:a}:b===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["false"]?a={globalSharingSettingEnabled:!1}:a=null;return a};a=function(a,b,e,f){e=h(e);if(e==null)return;a=c("WAWebCommonCTWADataSharing").getCTWAEligibilityFromChat(a);if(a==null||!d("WAWebBizGatingUtils").smbDataSharingConsentEnabled())return;a={ctwaOrderSignalVersion:1,deepLinkConversionSource:a.source,orderPaid:f,orderSignalType:d("WAWebWamEnumOrderSignalType").ORDER_SIGNAL_TYPE.UPDATED,orderStatus:e,customerAdsSharingSettingEnabled:d("WAWebWamEnumCustomerAdsSharingSettingEnabled").CUSTOMER_ADS_SHARING_SETTING_ENABLED.UNSET};new(d("WAWebCtwaOrderSignalWamEvent").CtwaOrderSignalWamEvent)(babelHelpers["extends"]({},a,i(b))).commit()};b=function(a,b){a=c("WAWebCommonCTWADataSharing").getCTWAEligibilityFromChat(a);if(a==null||!d("WAWebBizGatingUtils").smbDataSharingConsentEnabled())return;a={ctwaOrderSignalVersion:1,deepLinkConversionSource:a.source,orderPaid:!1,orderSignalType:d("WAWebWamEnumOrderSignalType").ORDER_SIGNAL_TYPE.CREATED,orderStatus:d("WAWebWamEnumOrderStatus").ORDER_STATUS.PROCESSING,customerAdsSharingSettingEnabled:d("WAWebWamEnumCustomerAdsSharingSettingEnabled").CUSTOMER_ADS_SHARING_SETTING_ENABLED.UNSET};new(d("WAWebCtwaOrderSignalWamEvent").CtwaOrderSignalWamEvent)(babelHelpers["extends"]({},a,i(b))).commit()};g.markOrderAsUpdatedStatusAction=a;g.markOrderAsCreatedAction=b}),98);
__d("WAWebOrderStatusUpdateDrawer.react",["fbt","WALogger","WASmaxInBizSettingsEnums","WAWebBizGatingUtils","WAWebBizOrderStatusLabels","WAWebBizSendOrderAction","WAWebBusinessProfileCollection","WAWebBusinessProfileUtils","WAWebButton.react","WAWebCTWADataSharingModel","WAWebCmd","WAWebCommonCTWADataSharing","WAWebConfirmPopup.react","WAWebConstantsDeprecated","WAWebDataSharingOptOutOrUpsell","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDrawerManager","WAWebDrawerSection.react","WAWebFbtCommon","WAWebFlex.react","WAWebModalManager","WAWebOrderDetailMath","WAWebOrderDetailRadioButton.react","WAWebOrderDetailsActionCategory","WAWebOrderDetailsActionsSmbWamEvent","WAWebOrderPaymentStatus","WAWebOrderStatus","WAWebOrdersExpansionUtils","WAWebRichTextField.react","WAWebSmb3pdConversionSignalAction","WAWebSmbMarkAsXOrderAction","WAWebSwitch.react","WAWebUISpacing","WAWebUserPrefsMeUser","WAWebWamEnumOrderDetailsCreationAction","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error opening chat"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error sending order status in chat"]);m=function(){return a};return a}b=k||d("react");var n=i||(i=c("react")),o=b.useEffect,p=b.useMemo,q=b.useState,r=d("WAWebBizGatingUtils").isOrderStatusM1Enabled()?[d("WAWebOrderStatus").OrderStatus.PaymentRequested,d("WAWebOrderStatus").OrderStatus.PreparingToShip,d("WAWebOrderStatus").OrderStatus.Shipped,d("WAWebOrderStatus").OrderStatus.Delivered,d("WAWebOrderStatus").OrderStatus.Canceled]:[d("WAWebOrderStatus").OrderStatus.Processing,d("WAWebOrderStatus").OrderStatus.Shipped,d("WAWebOrderStatus").OrderStatus.Complete,d("WAWebOrderStatus").OrderStatus.Canceled],s={checkboxContainer:{rowGap:"x1na6gtj",columnGap:"x1qgv0r9",$$css:!0},spacer:{height:"xqtp20y",borderTopWidth:"x178xt8z",borderTopStyle:"x13fuv20",borderTopColor:"xyj1x25",$$css:!0}};function t(a){a=a.xstyle;return n.jsx("div",{className:(j||(j=c("stylex")))(s.spacer,d("WAWebUISpacing").uiMargin.top16,a)})}t.displayName=t.name+" [from "+f.id+"]";var u=function(a,b,e,f){if(c("WAWebCommonCTWADataSharing").shouldDisplayDataSharingOrderOptOutOrUpsell(a,"order-update",b))return n.jsx(d("WAWebDataSharingOptOutOrUpsell").DataSharingOptOutOrUpsell,{theme:"order-update",onCheckboxToggle:function(){return f(!e)},checkboxValue:e})},v=function(){return d("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue()===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"]};e=n.forwardRef(a);function a(a,b){var e=babelHelpers["extends"]({},a);a=q(v);var f=a[0],g=a[1];a=q("");var i=a[0],k=a[1],w=p(function(){return d("WAWebOrderStatus").findOrderStatus(e.chat,e.orderInfo.referenceId)},[e.chat,e.orderInfo.referenceId]),x=p(function(){return d("WAWebOrderPaymentStatus").findLastOrderPaymentStatusInfo(e.chat,e.orderInfo.referenceId)},[e.chat,e.orderInfo.referenceId]);a=q(w);var y=a[0],z=a[1];a=q((x==null?void 0:x.paymentStatus)===d("WAWebOrderPaymentStatus").OrderPaymentStatus.Captured);var A=a[0],B=a[1];o(function(){var a=function(a){return g(a===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"])};d("WAWebCTWADataSharingModel").CTWADataSharingModel.subscribeForUpdates(a);return function(){d("WAWebCTWADataSharingModel").CTWADataSharingModel.unsubscribeFromUpdates(a)}},[]);var C=e.chat,D=e.sellerJid,E=e.orderInfo,F="no_method_confirmed",G=function(){var a;a=(a=(a=E.externalPaymentConfigurations)==null?void 0:(a=a.at(0))==null?void 0:a.type)!=null?a:F;new(d("WAWebOrderDetailsActionsSmbWamEvent").OrderDetailsActionsSmbWamEvent)({orderDetailsCreationAction:d("WAWebWamEnumOrderDetailsCreationAction").ORDER_DETAILS_CREATION_ACTION.SEND_MARK_AS_PAID,actionCategory:String(c("WAWebOrderDetailsActionCategory").ORDER_DETAILS_MANAGEMENT),orderDetailEntryPoint:String(e.entryPoint),hasNote:Boolean(i),paymentStatus:!0,paymentType:a}).commit()};function H(a,b,c,e){d("WAWebDrawerManager").DrawerManager.closeDrawerRight(),a&&(J(!b,c,e),f&&d("WAWebSmb3pdConversionSignalAction").log3pdConversionSignalForOrders({chat:C,orderStatus:y,paidData:{amount:String(E.totalAmount),currency:E.currency,paid:A},type:"order_updated",isPaidStateChanged:!0})),b&&I(c,e)}function I(a,b){var g=d("WAWebUserPrefsMeUser").getMaybeMeUser();g=g?d("WAWebBusinessProfileUtils").hasCatalog(d("WAWebBusinessProfileCollection").BusinessProfileCollection.get(g)):!1;new(d("WAWebOrderDetailsActionsSmbWamEvent").OrderDetailsActionsSmbWamEvent)({orderDetailsCreationAction:d("WAWebWamEnumOrderDetailsCreationAction").ORDER_DETAILS_CREATION_ACTION.SEND_ORDER_STATUS,actionCategory:String(c("WAWebOrderDetailsActionCategory").ORDER_DETAILS_MANAGEMENT),orderDetailEntryPoint:String(e.entryPoint),hasCatalog:g,hasNote:Boolean(i)}).commit();d("WAWebBizSendOrderAction").sendOrderStatusMessageAsMerchant({chat:C,sellerJid:D,orderInfo:E,orderNote:i,orderStatus:a,offset:d("WAWebOrderDetailMath").DEFAULT_OFFSET,paymentStatus:b?d("WAWebOrderPaymentStatus").OrderPaymentStatus.Captured:d("WAWebOrderPaymentStatus").OrderPaymentStatus.Pending,paymentMethod:null})["catch"](function(a){d("WALogger").ERROR(m()).verbose().devConsole(a)});d("WAWebSmbMarkAsXOrderAction").markOrderAsUpdatedStatusAction(C,f,y,A);f&&d("WAWebSmb3pdConversionSignalAction").log3pdConversionSignalForOrders({chat:C,orderStatus:y,paidData:{amount:String(E.totalAmount),currency:E.currency,paid:A},type:"order_updated"});d("WAWebCmd").Cmd.openChatFromUnread(C)["catch"](function(a){d("WALogger").ERROR(l()).verbose().devConsole(a)})}function J(a,b,c){d("WAWebBizSendOrderAction").sendOrderPaymentStatusMessageAsMerchant({chat:C,sellerJid:D,orderInfo:E,orderNote:a?i:null,orderStatus:b,offset:d("WAWebOrderDetailMath").DEFAULT_OFFSET,paymentStatus:c?d("WAWebOrderPaymentStatus").OrderPaymentStatus.Captured:d("WAWebOrderPaymentStatus").OrderPaymentStatus.Pending,paymentMethod:null})["finally"](function(){G()})}function K(a){return r.findIndex(function(b){return b===a})}function L(){var a=K(y),b=K(w),e=(x==null?void 0:x.paymentStatus)===d("WAWebOrderPaymentStatus").OrderPaymentStatus.Captured,f=a!==b,g=e!==A;e=!f&&!g;a=a<b;var i=y,j=A;d("WAWebBizGatingUtils").isOrderStatusM1Enabled()&&(g&&(A?y===d("WAWebOrderStatus").OrderStatus.PaymentRequested&&(i=d("WAWebOrderStatus").OrderStatus.PreparingToShip):!A&&y===d("WAWebOrderStatus").OrderStatus.PreparingToShip&&(i=d("WAWebOrderStatus").OrderStatus.PaymentRequested)),f&&(A&&y===d("WAWebOrderStatus").OrderStatus.PaymentRequested&&(j=!1)));e?d("WAWebModalManager").ModalManager.open(n.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._(/*BTDS*/"__JHASH__sq5vCQ5USss__JHASH__"),okText:c("WAWebFbtCommon")("OK"),onOK:function(){d("WAWebModalManager").ModalManager.close()},children:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._(/*BTDS*/"__JHASH__MokQoGmWX6F__JHASH__",[h._param("originalOrderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(w))]):h._(/*BTDS*/"__JHASH__1vB_eHa7weV__JHASH__",[h._param("originalOrderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(w))])})):a?d("WAWebModalManager").ModalManager.open(n.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._(/*BTDS*/"__JHASH__8N28pK0sbYA__JHASH__"),okText:h._(/*BTDS*/"__JHASH__IBFlvfnDAy4__JHASH__"),onOK:function(){H(g,f,i,j),d("WAWebModalManager").ModalManager.close()},cancelText:h._(/*BTDS*/"__JHASH__Zxn4YYs9oaP__JHASH__"),onCancel:function(){d("WAWebModalManager").ModalManager.close()},children:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._(/*BTDS*/"__JHASH__bZ2ScGcUD7R__JHASH__",[h._param("originalOrderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(w)),h._param("orderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(y))]):h._(/*BTDS*/"__JHASH__UARVCowcoXl__JHASH__",[h._param("originalOrderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(w)),h._param("orderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(y))])})):H(g,f,i,j)}a=h._(/*BTDS*/"__JHASH__W9JHo2yaW9d__JHASH__");var M=function(){B(!A)};return n.jsxs(c("WAWebDrawer.react"),{onDrop:e.onBack,ref:b,children:[n.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._(/*BTDS*/"__JHASH__jHYMghYQIO6__JHASH__"):h._(/*BTDS*/"__JHASH__IaAnh-WqNbE__JHASH__"),onBack:e.onBack,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL}),n.jsx(c("WAWebDrawerBody.react"),{children:n.jsxs(c("WAWebDrawerSection.react"),{children:[d("WAWebOrdersExpansionUtils").isOrderExpansionEnabled()&&n.jsxs(n.Fragment,{children:[n.jsxs(d("WAWebFlex.react").FlexRow,{align:"center",xstyle:[d("WAWebUISpacing").uiPadding.top16,d("WAWebUISpacing").uiPadding.horiz16],children:[n.jsx(d("WAWebFlex.react").FlexColumn,{xstyle:d("WAWebUISpacing").uiPadding.end24,children:n.jsx(d("WAWebSwitch.react").Switch,{checked:A,onChange:M,testid:void 0})}),n.jsx("div",{children:h._(/*BTDS*/"__JHASH__g87pBZZ6PR8__JHASH__")})]}),n.jsx(t,{xstyle:d("WAWebUISpacing").uiMargin.bottom16})]}),n.jsx("div",{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiPadding.vert4,d("WAWebUISpacing").uiPadding.horiz16),children:n.jsx(d("WAWebFlex.react").FlexColumn,{xstyle:s.checkboxContainer,children:r.map(function(a){return n.jsx(c("WAWebOrderDetailRadioButton.react"),{testid:void 0,label:d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(a),isCanceled:a===d("WAWebOrderStatus").OrderStatus.Canceled,checked:y===a,onClick:function(){z(a)}},a)})})}),n.jsx(t,{}),n.jsx("div",{className:j(d("WAWebUISpacing").uiPadding.horiz28),children:n.jsx(d("WAWebRichTextField.react").RichTextField,{maxLength:c("WAWebConstantsDeprecated").MAX_CART_MESSAGE_LENGTH,placeholder:a,value:i,testid:void 0,multiline:!0,showRemaining:!0,spellCheck:!0,emojiBtnPosition:"side",textFormatEnabled:!0,onEnter:L,onChange:function(a){return k(a.text)}})}),u(e.chat,E.items.length,f,g),n.jsx(d("WAWebFlex.react").FlexColumn,{align:"center",xstyle:[d("WAWebUISpacing").uiPadding.horiz16,d("WAWebUISpacing").uiMargin.top8,d("WAWebUISpacing").uiMargin.bottom24],children:n.jsx(c("WAWebButton.react"),{testid:void 0,type:"primary",onClick:L,children:h._(/*BTDS*/"__JHASH__ozB-3Zgb8C4__JHASH__")})})]})})]})}a.displayName=a.name+" [from "+f.id+"]";b=e;g["default"]=b}),226);
__d("WAWebOrderTotalPrice",["fbt","WAWebBizEntryPoint","WAWebButton.react","WAWebOrdersExpansionUtils","WAWebText_DONOTUSE.react","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k=i||c("react"),l={buttonWrapper:{display:"x78zum5",flexDirection:"xdt5ytf",alignItems:"x6s0dn4",$$css:!0},errorLabel:{textAlign:"x2b8uid",$$css:!0}};function m(a){var b=a.disabled,e=a.onClick,f=a.testid;f=a.title;return k.jsx("div",{className:(j||(j=c("stylex")))(l.buttonWrapper,d("WAWebUISpacing").uiMargin.top16),children:k.jsx(c("WAWebButton.react"),{type:"primary",disabled:b,onClick:e,testid:void 0,children:f})})}m.displayName=m.name+" [from "+f.id+"]";function n(a){var b=a.entryPoint;b=b===void 0?null:b;a=a.onClick;a=a===void 0?null:a;return b===c("WAWebBizEntryPoint").FROM_CART&&a!=null&&d("WAWebOrdersExpansionUtils").isOrderExpansionEnabled()?k.jsx("div",{className:(j||(j=c("stylex")))(l.buttonWrapper,d("WAWebUISpacing").uiMargin.top16),children:k.jsx(c("WAWebButton.react"),{type:"secondary",onClick:a,testid:void 0,children:h._(/*BTDS*/"__JHASH__C07QMq_wDuh__JHASH__")})}):null}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.confirmTitle,c=a.disabled,e=a.entryPoint;e=e===void 0?null:e;var f=a.error;f=f===void 0?null:f;var g=a.onConfirm,h=a.onDeclineOrder;h=h===void 0?null:h;var i=a.testid;i=a.title;var j=a.totalPrice,o=a.visible;a=a.xstyle;return o?k.jsxs(d("WAWebText_DONOTUSE.react").TextDiv,{xstyle:a,children:[f==null?k.jsxs("div",{className:"x78zum5 x1q0g3np x1qughib x117nqv4","data-testid":void 0,children:[i,k.jsx("p",{children:j})]}):k.jsx(d("WAWebText_DONOTUSE.react").TextDiv,{color:"danger",size:"16",xstyle:l.errorLabel,children:f}),k.jsx(m,{title:b,onClick:g,disabled:c||Boolean(f),testid:void 0}),k.jsx(n,{entryPoint:e,onClick:h})]}):null}a.displayName=a.name+" [from "+f.id+"]";g.OrderApplyChangesButton=m;g.OrderTotalPrice=a}),226);
__d("WAWebOrderSummaryDrawer",["fbt","WASmaxInBizSettingsEnums","WAWebBizGatingUtils","WAWebCTWADataSharingModel","WAWebChatEphemerality","WAWebClickableLink.react","WAWebCommonCTWADataSharing","WAWebCurrencyUtils","WAWebDataSharingOptOutOrUpsell","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDrawerSection.react","WAWebFlex.react","WAWebModalManager","WAWebOrderDetailItems","WAWebOrderDetailMath","WAWebOrderDetailSectionContainer.react","WAWebOrderDetailSellerProfile.react","WAWebOrderDetailSharedStyles","WAWebOrderEphemeralExemptionPopup.react","WAWebOrderExpansionNotSupportedPopup.react","WAWebOrderStatus","WAWebOrderTotalPrice","WAWebOrdersExpansionUtils","WAWebSmb3pdConversionSignalAction","WAWebSmbMarkAsXOrderAction","WAWebText_DONOTUSE.react","WAWebUISpacing","WAWebUserPrefsKeys","WAWebUserPrefsMeUser","WAWebUserPrefsStore","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k;b=k||d("react");var l=i||(i=c("react")),m=b.useEffect,n=b.useState,o={orderFieldsContainer:{rowGap:"x1kb72lq",columnGap:"x18hwk67",$$css:!0},orderItemsContainer:{flexShrink:"xs83m0k",overflowY:"x1odjw0f",$$css:!0}},p=function(a,b,c,e){if(!a)return h._(/*BTDS*/"__JHASH__nxIWxJIusFw__JHASH__").toString();a=d("WAWebBizGatingUtils").orderDetailsTotalOrderMinimumValue()*1e3;e=d("WAWebBizGatingUtils").orderDetailsTotalMaxValue(e)*1e3;if(b<a)return h._(/*BTDS*/"__JHASH__-z9LCa2bdyI__JHASH__",[h._param("order_min_allowed_amount",d("WAWebCurrencyUtils").formatAmount1000(c,a))]).toString();return b>e?h._(/*BTDS*/"__JHASH__jF_gxLc7sdO__JHASH__",[h._param("order_max_allowed_amount",d("WAWebCurrencyUtils").formatAmount1000(c,e))]).toString():null};function q(a){var b=a.additionalCharges,e=a.canChangeAdditionalCharges,f=a.canDisplayAdditionalCharges,g=a.currency,i=a.discount,k=a.onAdditionalCharges,m=a.shipping,n=a.subtotal;a=a.tax;var p=(b==null?void 0:b.discountText)&&b.discountType===d("WAWebOrderDetailMath").PERCENTAGE_SYMBOL?h._(/*BTDS*/"__JHASH__2_x53XD3AEf__JHASH__",[h._param("discount_percent",b.discountText)]):null;b=(b==null?void 0:b.taxText)&&b.taxType===d("WAWebOrderDetailMath").PERCENTAGE_SYMBOL?h._(/*BTDS*/"__JHASH__JXbDug8zZkS__JHASH__",[h._param("tax_percent",b.taxText)]):null;return l.jsxs(d("WAWebFlex.react").FlexColumn,{align:"stretch",xstyle:[o.orderFieldsContainer,d("WAWebUISpacing").uiPadding.horiz16,d("WAWebUISpacing").uiPadding.bottom20],children:[l.jsxs(d("WAWebFlex.react").FlexRow,{justify:"all",testid:void 0,children:[l.jsx(d("WAWebText_DONOTUSE.react").TextSpan,{color:"secondary",size:"16",children:h._(/*BTDS*/"__JHASH__NMvrVWkEOKi__JHASH__")}),l.jsx(d("WAWebText_DONOTUSE.react").TextSpan,{color:"secondary",size:"16",children:d("WAWebCurrencyUtils").formatAmount1000(g,n)})]}),Boolean(f)&&l.jsxs(l.Fragment,{children:[i!=null&&l.jsxs(d("WAWebFlex.react").FlexRow,{justify:"all",testid:void 0,children:[l.jsxs(d("WAWebText_DONOTUSE.react").TextSpan,{color:"secondary",size:"16",children:[h._(/*BTDS*/"__JHASH__JMELG2VgMhA__JHASH__")," ",p]}),l.jsx(d("WAWebText_DONOTUSE.react").TextSpan,{color:"secondary",size:"16",children:d("WAWebCurrencyUtils").formatAmount1000(g,-i)})]}),m!=null&&l.jsxs(d("WAWebFlex.react").FlexRow,{justify:"all",testid:void 0,children:[l.jsx(d("WAWebText_DONOTUSE.react").TextSpan,{color:"secondary",size:"16",children:h._(/*BTDS*/"__JHASH__qtF7i6rL0XZ__JHASH__")}),l.jsx(d("WAWebText_DONOTUSE.react").TextSpan,{color:"secondary",size:"16",children:d("WAWebCurrencyUtils").formatAmount1000(g,m)})]}),a!=null&&l.jsxs(d("WAWebFlex.react").FlexRow,{justify:"all",testid:void 0,children:[l.jsxs(d("WAWebText_DONOTUSE.react").TextSpan,{color:"secondary",size:"16",children:[h._(/*BTDS*/"__JHASH__GBYYSzc5gjv__JHASH__")," ",b]}),l.jsx(d("WAWebText_DONOTUSE.react").TextSpan,{color:"secondary",size:"16",children:d("WAWebCurrencyUtils").formatAmount1000(g,a)})]}),Boolean(e)&&l.jsx(d("WAWebFlex.react").FlexRow,{justify:"all",align:"center",children:l.jsx(c("WAWebClickableLink.react"),{onClick:function(){return k==null?void 0:k()},testid:void 0,className:(j||(j=c("stylex")))(c("WAWebOrderDetailSharedStyles").clickableText,d("WAWebUISpacing").uiMargin.bottom0),children:l.jsx("span",{children:h._(/*BTDS*/"__JHASH__-kJ0FYV3_WB__JHASH__")})})})]})]})}q.displayName=q.name+" [from "+f.id+"]";var r=function(a,b,e,f){if(c("WAWebCommonCTWADataSharing").shouldDisplayDataSharingOrderOptOutOrUpsell(a,"order-create",b))return l.jsx(d("WAWebDataSharingOptOutOrUpsell").DataSharingOptOutOrUpsell,{checkboxValue:e,onCheckboxToggle:f,theme:"order-create"})},s=function(){return d("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue()===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"]},t=function(a){var b=a.chat,e=a.smbOptOut,f=a.amount,g=a.currency,h=a.onSubmit;a=!d("WAWebOrdersExpansionUtils").isOrderExpansionEnabled()&&d("WAWebOrdersExpansionUtils").isSellerCountrySameAsBuyer(b)||d("WAWebOrdersExpansionUtils").isContactCountrySupported(b);if(!a){d("WAWebModalManager").ModalManager.open(l.jsx(c("WAWebOrderExpansionNotSupportedPopup.react"),{chat:b}));return}a=function(){d("WAWebSmbMarkAsXOrderAction").markOrderAsCreatedAction(b,e),e&&d("WAWebSmb3pdConversionSignalAction").log3pdConversionSignalForOrders({chat:b,type:"order_created",paidData:{amount:String(f),currency:g,paid:!1},orderStatus:d("WAWebOrderStatus").OrderStatus.Processing}),h()};c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.DISAPPEARING_MSG_DISCLAIMER_DIMISSED)!==!0&&d("WAWebBizGatingUtils").inOrderMessagesEphemeralExceptionEnabled()&&d("WAWebChatEphemerality").isEphemeralSettingOn(b)?d("WAWebModalManager").ModalManager.open(l.jsx(c("WAWebOrderEphemeralExemptionPopup.react"),{chat:b,onSubmit:a})):a()};function a(a){var b=a.additionalCharges,e=a.chat,f=a.currency,g=a.entryPoint;g=g===void 0?null:g;var i=a.flatAmounts,j=a.onAddItem,k=a.onAdditionalCharges,u=a.onBack,v=a.onDeclineOrder;v=v===void 0?null:v;var w=a.onDeleteItem,x=a.onItemQuantityChange,y=a.onPriceChange,z=a.onSubmit,A=a.orderItems,B=a.orderSubtotal,C=a.priceMap;a=n(s);var D=a[0],E=a[1];m(function(){var a=function(){var a=d("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue()===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"];E(a)};d("WAWebCTWADataSharingModel").CTWADataSharingModel.subscribeForUpdates(a);return function(){d("WAWebCTWADataSharingModel").CTWADataSharingModel.unsubscribeFromUpdates(a)}},[]);a=A.every(function(a){var b;return Number.isInteger((b=a.price)!=null?b:C[a.id])});var F=A.length!==0;return l.jsxs(c("WAWebDrawer.react"),{children:[l.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._(/*BTDS*/"__JHASH__Evhgg2EE5iQ__JHASH__"):h._(/*BTDS*/"__JHASH__hsTTiXw3ZsE__JHASH__"),onBack:u,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL}),l.jsxs(c("WAWebDrawerBody.react"),{children:[l.jsxs(c("WAWebDrawerSection.react"),{xstyle:[o.orderItemsContainer,d("WAWebUISpacing").uiPadding.top20,d("WAWebUISpacing").uiMargin.bottom0],theme:"refresh-padding-title",children:[l.jsxs(c("WAWebOrderDetailSectionContainer.react"),{children:[l.jsx(c("WAWebOrderDetailSellerProfile.react"),{sellerWid:d("WAWebUserPrefsMeUser").getMeUser()}),l.jsx(c("WAWebOrderDetailItems"),{currency:f,priceMap:C,items:A,onDeleteItem:w,onPriceChange:y,onAddItem:j,onItemQuantityChange:x}),l.jsx(q,{tax:i.tax,discount:i.discount,shipping:i.shipping,currency:f,subtotal:B,additionalCharges:b,canDisplayAdditionalCharges:F,canChangeAdditionalCharges:F,onAdditionalCharges:k})]}),r(e,A.length,D,function(){return E(!D)})]}),l.jsx(c("WAWebDrawerSection.react"),{children:l.jsx(d("WAWebOrderTotalPrice").OrderTotalPrice,{xstyle:d("WAWebUISpacing").uiPadding.all16,visible:F,disabled:!a,testid:void 0,totalPrice:d("WAWebCurrencyUtils").formatAmount1000(f,i.total),title:h._(/*BTDS*/"__JHASH__3MvYlG5X9Mo__JHASH__"),onConfirm:function(){return t({chat:e,smbOptOut:D,currency:f,amount:i.total/1e3,onSubmit:z})},confirmTitle:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._(/*BTDS*/"__JHASH__bF2Ty2SIX58__JHASH__"):h._(/*BTDS*/"__JHASH__UXGBDYWps3R__JHASH__"),error:p(a,i.total,f,e),entryPoint:g,onDeclineOrder:v})})]})]})}a.displayName=a.name+" [from "+f.id+"]";g.getErrorLabel=p;g.OrderValues=q;g.getDataSharing=r;g.maybeShowDialogOnSubmit=t;g.OrderSummaryDrawer=a}),226);
__d("WAWebSendGroupInviteFlow.react",["fbt","WANullthrows","WAWebGroupType","WAWebSendTextFlow.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b;a=a.chat;b=c("WANullthrows")((b=a.groupMetadata)==null?void 0:b.groupInviteLink);a=((a=a.groupMetadata)==null?void 0:a.groupType)===d("WAWebGroupType").GroupType.COMMUNITY;a=a?h._(/*BTDS*/"__JHASH__JrlCg9TMHkl__JHASH__").toString()+" "+b:h._(/*BTDS*/"__JHASH__2oCqXm_Ze0x__JHASH__").toString()+" "+b;return j.jsx(c("WAWebSendTextFlow.react"),{title:h._(/*BTDS*/"__JHASH__LenP8XNVLj1__JHASH__"),text:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebUploadUserReport",["WALogger","WAWebCrashlog","WAWebCrashlogConstants","WAWebLoggerDebugInfo","WAWebXHR","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["UploadUserReport:uploadUserReport failed ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["UploadUserReport:uploadUserReport succeeded"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["UploadUserReport:uploadUserReport submitting"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["UploadUserReport:uploadUserReport description: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["UploadUserReport:uploadUserReport uploading"]);l=function(){return a};return a}function a(a,b,c,d,e,f,g){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,m,n){try{d("WALogger").LOG(l());d("WALogger").LOG(k(),f).verbose();var o=(yield d("WAWebCrashlog").upload({reason:d("WAWebCrashlog").USER_REPORT,immediate:!1,isHighPri:!0,logType:d("WAWebCrashlog").LogType.SUPPORT})),p=new FormData();a!=null&&p.append("user",String(a));p.append("email",b);o&&p.append("crashlog",o);p.append("desc",f);g.map(function(a,b){p.append("screenshot-"+b,a)});a=(yield d("WAWebLoggerDebugInfo").getDebugInfo({supportTag:m,entityId:n}));b=babelHelpers["extends"]({},a,{subject:e});p.append("info",JSON.stringify(b));d("WALogger").LOG(j());yield c("WAWebXHR").post(d("WAWebCrashlogConstants").TICKET_URL,p);d("WALogger").LOG(i())}catch(a){d("WALogger").LOG(h(),String(a))}});return m.apply(this,arguments)}g.uploadUserReport=a}),98);
__d("WAWebSendLogsPopup.react",["fbt","WALinkify","WAPhoneUtils","WAWebABPropsSaga","WAWebConfirmPopup.react","WAWebConnModel","WAWebEventFiles","WAWebExternalLink.react","WAWebFaqUrl","WAWebKeyboardHotKeys.react","WAWebModalManager","WAWebRichTextField.react","WAWebSupportChatStrings","WAWebToast.react","WAWebToastManager","WAWebUploadUserReport","WAWebUserPrefsMeUser","WAWebWDSText.react","WAWebXAltIcon.react","asyncToGeneratorRuntime","fbs","react"],(function(a,b,c,d,e,f,g,h){var i,j;e=j||d("react");var k=i||(i=c("react")),l=e.useEffect,m=e.useRef,n=e.useState,o=320,p=50,q=10,r=500,s=3,t=10485760;function u(){return d("WAWebConnModel").Conn.isSMB?h._(/*BTDS*/"__JHASH__I601hnHGrFJ__JHASH__"):h._(/*BTDS*/"__JHASH__AhgPLhWKIJ-__JHASH__")}function v(a){var b=a.onDeleteScreenshot;a=a.screenshots;a=a.map(function(a,c){if(a.url==null)return null;var e="url("+a.url+")";a=a.url+"-"+c;return k.jsx("div",{className:"x1n2onr6 x1faq86j x1vtj31x x1t79jtt x1gslohp xw3qccf x12nagc xsgj6o6 x1oreiyq x1vwr25l x18d0r48 x1e7nkc8",style:{backgroundImage:e},children:k.jsx("button",{className:"x10l6tqk xnfr1j xgmwauy x7o08j2",onClick:function(){b(c)},children:k.jsx(d("WAWebXAltIcon.react").XAltIcon,{})})},a)}).filter(Boolean);return a.length!==0?k.jsx("div",{className:"x78zum5 x1iorvi4 x150jy0e xjkvuk6 x1e558r4 x1q7yeco",children:a}):null}v.displayName=v.name+" [from "+f.id+"]";function w(a){var b=a.isDragging,c=a.onAttachClick;a=a.reachedMaxScreenshots;if(a){a=s;return k.jsx("div",{className:"x9f619 x78zum5 xdt5ytf x6s0dn4 xl56j7k xh8yej3 xlup9mm xexx8yu x4uap5 x18d9i69 xkhd6sd xw7yly9 x1pg5gke x2b8uid xtvhhri xlwc9sh xpw2u0k xt0e3qv",children:h._(/*BTDS*/"__JHASH__nRq1j6poVpM__JHASH__",[h._plural(a,"number")])})}else if(b)return k.jsx("div",{className:"x9f619 x78zum5 xdt5ytf x6s0dn4 xl56j7k xh8yej3 xlup9mm xexx8yu x4uap5 x18d9i69 xkhd6sd xw7yly9 x1pg5gke x1jrnqrx x2b8uid xtvhhri x1ypdohk xlwc9sh",children:h._(/*BTDS*/"__JHASH__E4yN8s83x3u__JHASH__")});return k.jsx("div",{className:"x9f619 x78zum5 xdt5ytf x6s0dn4 xl56j7k xh8yej3 xlup9mm xexx8yu x4uap5 x18d9i69 xkhd6sd xw7yly9 x1pg5gke x1jrnqrx x2b8uid xtvhhri x1ypdohk xlwc9sh",onClick:c,children:h._(/*BTDS*/"__JHASH__q6f6QlMKgDZ__JHASH__")})}w.displayName=w.name+" [from "+f.id+"]";function a(a){var e=a.onCancel,f=a.supportTag,g=a.onSend,i=a.entityId,j=n(""),x=j[0],y=j[1];j=n(void 0);var z=j[0],A=j[1];j=n("");var B=j[0],C=j[1];j=n(void 0);var D=j[0],E=j[1];j=n(u().toString());var F=j[0],G=j[1];j=n(void 0);var H=j[0],I=j[1];a=n((j=a.description)!=null?j:"");var J=a[0],K=a[1];j=n(void 0);a=j[0];var L=j[1];j=n([]);var M=j[0],N=j[1];j=n(!1);var O=j[0],P=j[1];j=n(!1);var Q=j[0],R=j[1],S=m(null),T=m(null);l(function(){var a;(a=S.current)==null?void 0:a.restoreFocus();R(d("WAWebABPropsSaga").getIsSagaV1Enabled());return function(){M.map(function(a){a=a.url;return URL.revokeObjectURL(a)})}},[]);var U=function(a){return!0},V=function(a){return a.length>q},W=function(a){return x===a},X=function(){return M.length>=s};j=function(){e&&e(),d("WAWebModalManager").ModalManager.close()};var Y=function(a){a.stopPropagation()},aa=function(a,b){P(a)},ba=function(){var a=B.trim();B&&!W(a)&&E(h._(/*BTDS*/"__JHASH__kSyfdOHyTbj__JHASH__"));C(a)},ca=function(){var a=x.trim();x&&!d("WALinkify").validateEmail(a)&&A(h._(/*BTDS*/"__JHASH__Ioswb2NNWQY__JHASH__"));y(a)},da=function(a){d("WALinkify").validateEmail(a)&&A(void 0),y(a)},ea=function(){J&&!V(J)&&L(h._(/*BTDS*/"__JHASH___eUeaUfWHur__JHASH__"))},fa=function(a){if(!X()){(a=T.current)==null?void 0:a.click()}},Z=function(a){a.preventDefault();a.stopPropagation();if(X())return;d("WAWebEventFiles").getFiles(a,"image/*").then(function(a){T.current&&(T.current.value="");var b=a.filter(function(a){return a.size<=t});b.length<a.length&&d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebToast.react").Toast,{msg:h._(/*BTDS*/"__JHASH__mOHw834i-ag__JHASH__")}));if(X())return;a=s-M.length;b=b.slice(0,a);a=b.map(function(a){return{file:a,url:URL.createObjectURL(a)}});N(M.concat(a))})},ga=function(a){C(a),W(a)&&E(void 0)},ha=function(a){K(a),V(a)&&L(void 0)},ia=function(){U(F)||I(h._(/*BTDS*/"__JHASH__fnvIAVy3YLj__JHASH__"))},ja=function(a){G(a),U(a)&&I(void 0)},ka=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=0,b=x.trim(),e=B.trim();y(b);C(e);d("WALinkify").validateEmail(b)||(A(h._(/*BTDS*/"__JHASH__Ioswb2NNWQY__JHASH__")),a+=1);W(e)||(E(h._(/*BTDS*/"__JHASH__kSyfdOHyTbj__JHASH__")),a+=1);V(J)||(L(h._(/*BTDS*/"__JHASH___eUeaUfWHur__JHASH__")),a+=1);U(F)||(I(h._(/*BTDS*/"__JHASH__fnvIAVy3YLj__JHASH__")),a+=1);if(a===0){A(void 0);E(void 0);I(void 0);L(void 0);e=M.map(function(a){URL.revokeObjectURL(a.url);return a.file});N([]);a=d("WAWebUserPrefsMeUser").getMaybeMeUser();a=a?d("WAPhoneUtils").formatPhone(a.user):null;var j=F.trim()||c("fbs")._(/*BTDS*/"__JHASH__LLblzY4NWPN__JHASH__").toString();d("WAWebUploadUserReport").uploadUserReport(a,b,j,J,e,f,i);g&&g({subject:j,description:J,numScreenshots:e.length});d("WAWebModalManager").ModalManager.close();d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebToast.react").Toast,{msg:h._(/*BTDS*/"__JHASH__dREXQThAWkL__JHASH__")}))}});return function(){return a.apply(this,arguments)}}(),$=function(a){var b=M.slice();a=b.splice(a,1);a=a[0];URL.revokeObjectURL(a.url);N(b)};$=k.jsxs("div",{children:[k.jsx(v,{screenshots:M,onDeleteScreenshot:$}),k.jsx(w,{reachedMaxScreenshots:X(),isDragging:O,onAttachClick:fa}),k.jsx("input",{className:"x1s85apg",accept:"image/*",type:"file",multiple:!0,onClick:Y,onChange:Z,ref:T,disabled:X()})]});O={enter:Y};return k.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._(/*BTDS*/"__JHASH__IK0yJR9Mtbx__JHASH__"),okText:h._(/*BTDS*/"__JHASH__RTw8nDkS9-7__JHASH__"),onOK:ka,onCancel:j,onDrop:Z,onDragChange:aa,children:k.jsxs(d("WAWebKeyboardHotKeys.react").HotKeys,{handlers:O,children:[k.jsx(d("WAWebRichTextField.react").RichTextField,{testid:void 0,ref:S,value:x,error:z,maxLength:o,onChange:function(a){return da(a.text)},onBlur:ca,placeholder:h._(/*BTDS*/"__JHASH__2OrCmOFp5S1__JHASH__")}),k.jsx(d("WAWebRichTextField.react").RichTextField,{testid:void 0,editable:!0,value:B,error:D,maxLength:o,onChange:function(a){return ga(a.text)},onBlur:ba,placeholder:h._(/*BTDS*/"__JHASH__b4yojxulKS1__JHASH__")}),k.jsx(d("WAWebRichTextField.react").RichTextField,{testid:void 0,value:F,error:H,maxLength:p,onChange:function(a){return ja(a.text)},onBlur:ia,placeholder:h._(/*BTDS*/"__JHASH__sLKnNPiXK3e__JHASH__")}),k.jsx(d("WAWebRichTextField.react").RichTextField,{testid:void 0,value:J,error:a,maxLength:r,onChange:function(a){return ha(a.text)},onBlur:ea,placeholder:h._(/*BTDS*/"__JHASH__XlXcJ0JDEsr__JHASH__"),multiline:!0}),$,Q&&k.jsxs(d("WAWebWDSText.react").WDSTextMuted,{marginTop:20,children:[d("WAWebSupportChatStrings").SupportChatDeviceInfoDisclaimer()," ",k.jsx(d("WAWebExternalLink.react").ExternalLink,{href:d("WAWebFaqUrl").getSupportChatFaqUrl(),children:h._(/*BTDS*/"__JHASH__RR1bpeluTQm__JHASH__")})]})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebSendMsgMultiModal.react",["fbt","Promise","WATimeUtils","WAWebBlockContactAction","WAWebChatGetters","WAWebCmd","WAWebComposeBoxActions","WAWebModalManager","WAWebSelectModal.react","WAWebSendTextMsgChatAction","WAWebServerPropConstants","asyncToGeneratorRuntime","isStringNullOrEmpty","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react");function a(a){var e=a.msgText,f=a.urlText;a=function(a){var g=e;if(a.length===1){var h,j=a[0];d("WAWebChatGetters").getIsUser(j)&&j.contact.isContactBlocked?h=d("WAWebBlockContactAction").unblockContact(j.contact):h=(i||(i=b("Promise"))).resolve(!0);h.then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!c("isStringNullOrEmpty")(g)){j.urlText=f;if(j.active){d("WAWebComposeBoxActions").ComposeBoxActions.paste(j,g);return}j.setComposeContents({text:g,timestamp:d("WATimeUtils").unixTime()})}a=(yield d("WAWebCmd").Cmd.openChatFromUnread(j));a&&d("WAWebComposeBoxActions").ComposeBoxActions.focus(j)});return function(b){return a.apply(this,arguments)}}())}else(i||(i=b("Promise"))).all(a.map(function(c){var a;d("WAWebChatGetters").getIsUser(c)&&c.contact.isContactBlocked?a=d("WAWebBlockContactAction").unblockContact(c.contact):a=(i||(i=b("Promise"))).resolve(!0);a.then(function(a){c.urlText=f,d("WAWebSendTextMsgChatAction").sendTextMsgToChat(c,g)})})),d("WAWebCmd").Cmd.openChatFromUnread(a[0]);d("WAWebModalManager").ModalManager.close()};return k.jsx(d("WAWebSelectModal.react").SelectModal,{onConfirm:a,maxItems:d("WAWebServerPropConstants").MULTICAST_LIMIT_GLOBAL,title:h._(/*BTDS*/"__JHASH__Pz11_y6jv6u__JHASH__"),listType:d("WAWebSelectModal.react").ListType.ChatSelectModal})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebUnstarAllPopup.react",["fbt","WAWebChatCollection","WAWebConfirmPopup.react","WAWebEmojiText.react","WAWebModalManager","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k=function(){d("WAWebModalManager").ModalManager.close()};function a(a){var b=a.chat,c=a.msgs;a=function(){b&&b.pendingAction++,d("WAWebChatCollection").ChatCollection.unstarAllMessages(c,b)["finally"](function(){b&&b.pendingAction--}),d("WAWebModalManager").ModalManager.close()};return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:a,okText:h._(/*BTDS*/"__JHASH__9lzxpfjhJ2m__JHASH__"),onCancel:k,children:j.jsx("div",{children:j.jsx(d("WAWebEmojiText.react").EmojiText,{text:h._(/*BTDS*/"__JHASH__QDsbV0gAqF3__JHASH__")})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebStarredHeaderDropdown.react",["fbt","WAWebDropdownItem.react","WAWebModalManager","WAWebUnstarAllPopup.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.msgs,e=a.chat,f;if(b.length>0)f=b;else{f=(a=e==null?void 0:e.getStarredMsgs().toArray())!=null?a:[]}b=function(){d("WAWebModalManager").ModalManager.open(j.jsx(c("WAWebUnstarAllPopup.react"),{msgs:f,chat:e}))};return j.jsx(d("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:b,disabled:f.length===0,children:h._(/*BTDS*/"__JHASH__SVp7zZnwcuu__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g.StarredHeaderDropdown=a}),226);
__d("WAWebStarredDrawerV2.react",["fbt","WAWebDisplayType","WAWebDropdown.react","WAWebEmptyState.react","WAWebHistorySyncComponents.react","WAWebMenuBar.react","WAWebMenuIcon.react","WAWebMessageComponentContext.react","WAWebMoreRefreshedIcon.react","WAWebMsgDrawer.react","WAWebStarredHeaderDropdown.react","WAWebUIRefreshGatingUtils","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react"),l=(i||(i=d("react"))).useMemo;b=k.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.starredMsgs,f=a.onClose,g=a.chat,i=a.headerType,j=a.onSaveContact;a=h._(/*BTDS*/"__JHASH__uSSuzpxR3c8__JHASH__");var m=k.jsx(d("WAWebEmptyState.react").StarredMsgs,{}),n=g!=null?k.jsx(d("WAWebHistorySyncComponents.react").HistorySyncChatStarredMsgsPlaceholderText,{}):k.jsx(d("WAWebHistorySyncComponents.react").HistorySyncStarredMsgsPlaceholderText,{}),o=k.jsx(d("WAWebMenuBar.react").MenuBarItem,{testid:void 0,icon:d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?k.jsx(d("WAWebMoreRefreshedIcon.react").MoreRefreshedIcon,{}):k.jsx(d("WAWebMenuIcon.react").MenuIcon,{}),title:h._(/*BTDS*/"__JHASH__vnnO4cNTiS8__JHASH__"),dropdownMenu:{menu:k.jsx(d("WAWebStarredHeaderDropdown.react").StarredHeaderDropdown,{chat:g,msgs:e.toArray()}),type:d("WAWebDropdown.react").MenuType.DropdownMenu,flipOnRTL:!0,dirX:d("WAWebDropdown.react").DirX.LEFT}}),p=l(function(){return{onSaveContact:j}},[j]);return k.jsx(d("WAWebMessageComponentContext.react").MessageComponentContext.Provider,{value:p,children:k.jsx(c("WAWebMsgDrawer.react"),{ref:b,msgCollection:e,onClose:f,chat:g,title:a,emptyListText:m,footerText:n,headerMenu:o,headerType:i,displayType:d("WAWebDisplayType").DISPLAY_TYPE.STARRED_MSGS,tsNavigationSurface:"starred-messages-drawer"})})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),226);
__d("WAWebStatusQuotedFlow.react",["WAWebStatusViewer.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.status,d=a.msgKey,e=a.onMsgNotFound,f=a.onClose,g=a.rowSection;a=a.rowIndex;return i.jsx(c("WAWebStatusViewer.react"),{initialStatus:b,quotedMsgKey:d,closeStatusViewer:f,onMsgNotFound:e,rowSection:g,rowIdx:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);